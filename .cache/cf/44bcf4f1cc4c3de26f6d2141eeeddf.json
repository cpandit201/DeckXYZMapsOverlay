{"id":"MByF","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"@babel/runtime/helpers/esm/defineProperty","loc":{"line":1,"column":28,"index":28},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@babel/runtime/helpers/esm/defineProperty.js"},{"name":"@luma.gl/core","loc":{"line":2,"column":42,"index":115},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/core/dist/esm/index.js"},{"name":"./ambient-light","loc":{"line":3,"column":29,"index":161},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js"},{"name":"./directional-light","loc":{"line":4,"column":33,"index":213},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js"},{"name":"@math.gl/core","loc":{"line":5,"column":33,"index":269},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/core/dist/esm/index.js"},{"name":"../../passes/shadow-pass","loc":{"line":6,"column":23,"index":309},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js"},{"name":"../../shaderlib/shadow/shadow","loc":{"line":7,"column":19,"index":356},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=r(require(\"@babel/runtime/helpers/esm/defineProperty\")),e=require(\"@luma.gl/core\"),s=require(\"./ambient-light\"),i=require(\"./directional-light\"),a=require(\"@math.gl/core\"),h=r(require(\"../../passes/shadow-pass\")),o=r(require(\"../../shaderlib/shadow/shadow\"));function r(t){return t&&t.__esModule?t:{default:t}}const d={color:[255,255,255],intensity:1},l=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],n=[0,0,0,200/255];class g{constructor(e={}){(0,t.default)(this,\"id\",\"lighting-effect\"),(0,t.default)(this,\"props\",void 0),(0,t.default)(this,\"shadowColor\",n),(0,t.default)(this,\"shadow\",void 0),(0,t.default)(this,\"ambientLight\",void 0),(0,t.default)(this,\"directionalLights\",void 0),(0,t.default)(this,\"pointLights\",void 0),(0,t.default)(this,\"shadowPasses\",[]),(0,t.default)(this,\"shadowMaps\",[]),(0,t.default)(this,\"dummyShadowMap\",null),(0,t.default)(this,\"programManager\",void 0),(0,t.default)(this,\"shadowMatrices\",void 0),this.setProps(e)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const s=t[e];switch(s.type){case\"ambient\":this.ambientLight=s;break;case\"directional\":this.directionalLights.push(s);break;case\"point\":this.pointLights.push(s)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow),this.props=t}preRender(t,{layers:s,layerFilter:i,viewports:a,onViewportActive:h,views:r}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=e.ProgramManager.getDefaultProgramManager(t),o.default&&this.programManager.addDefaultModule(o.default)),this.dummyShadowMap||(this.dummyShadowMap=new e.Texture2D(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:s,layerFilter:i,viewports:a,onViewportActive:h,views:r,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(e=>e.getProjectedLight({layer:t})),pointLights:this.pointLights.map(e=>e.getProjectedLight({layer:t}))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(o.default),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const s=(new a.Matrix4).lookAt({eye:new a.Vector3(e.direction).negate()});t.push(s)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const s=new h.default(t);this.shadowPasses[e]=s,this.shadowMaps[e]=s.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:a}=this;t||0!==e.length||0!==a.length||(this.ambientLight=new s.AmbientLight(d),this.directionalLights.push(new i.DirectionalLight(l[0]),new i.DirectionalLight(l[1])))}}exports.default=g;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":0}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":13}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":20}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":35}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":43}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":56}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":57}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":64}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":68}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":76}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":89}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":91}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":95}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":97}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":99}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":107}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":153}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":155}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":163}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":180}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":182}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":190}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":209}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":211}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":219}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":242}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":244}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":252}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":269}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":271}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":273}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":281}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":310}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":312}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":314}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":322}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":356}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":365}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":367}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":370}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":377}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":380}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":382}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":393}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":395}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":396}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":404}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":407}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_AMBIENT_LIGHT_PROPS","original":{"line":12,"column":6},"generated":{"line":1,"column":413}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":36},"generated":{"line":1,"column":415}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"color","original":{"line":12,"column":37},"generated":{"line":1,"column":416}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":44},"generated":{"line":1,"column":422}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":45},"generated":{"line":1,"column":423}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":50},"generated":{"line":1,"column":427}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":55},"generated":{"line":1,"column":431}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"intensity","original":{"line":12,"column":61},"generated":{"line":1,"column":436}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":12,"column":72},"generated":{"line":1,"column":446}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_DIRECTIONAL_LIGHT_PROPS","original":{"line":13,"column":6},"generated":{"line":1,"column":449}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":13,"column":40},"generated":{"line":1,"column":451}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":452}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"color","original":{"line":15,"column":4},"generated":{"line":1,"column":453}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":15,"column":11},"generated":{"line":1,"column":459}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":15,"column":12},"generated":{"line":1,"column":460}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":15,"column":17},"generated":{"line":1,"column":464}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":15,"column":22},"generated":{"line":1,"column":468}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"intensity","original":{"line":16,"column":4},"generated":{"line":1,"column":473}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":16,"column":15},"generated":{"line":1,"column":483}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"direction","original":{"line":17,"column":4},"generated":{"line":1,"column":485}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":17,"column":15},"generated":{"line":1,"column":495}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":17,"column":17},"generated":{"line":1,"column":497}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":17,"column":20},"generated":{"line":1,"column":499}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":17,"column":24},"generated":{"line":1,"column":502}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":1,"column":506}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"color","original":{"line":20,"column":4},"generated":{"line":1,"column":507}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":20,"column":11},"generated":{"line":1,"column":513}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":1,"column":514}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":20,"column":17},"generated":{"line":1,"column":518}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":20,"column":22},"generated":{"line":1,"column":522}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"intensity","original":{"line":21,"column":4},"generated":{"line":1,"column":527}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":21,"column":15},"generated":{"line":1,"column":537}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"direction","original":{"line":22,"column":4},"generated":{"line":1,"column":540}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":22,"column":15},"generated":{"line":1,"column":550}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":551}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":554}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":22,"column":24},"generated":{"line":1,"column":557}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_SHADOW_COLOR","original":{"line":25,"column":6},"generated":{"line":1,"column":564}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":25,"column":29},"generated":{"line":1,"column":566}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":25,"column":30},"generated":{"line":1,"column":567}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":25,"column":33},"generated":{"line":1,"column":569}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":25,"column":36},"generated":{"line":1,"column":571}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":25,"column":39},"generated":{"line":1,"column":573}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":25,"column":45},"generated":{"line":1,"column":577}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":15},"generated":{"line":1,"column":582}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"LightingEffect","original":{"line":30,"column":21},"generated":{"line":1,"column":588}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"constructor","original":{"line":45,"column":2},"generated":{"line":1,"column":590}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":45,"column":14},"generated":{"line":1,"column":602}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":43},"generated":{"line":1,"column":604}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":609}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":611}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":613}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":622}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":627}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":31,"column":7},"generated":{"line":1,"column":632}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":652}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":654}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":656}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":665}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":670}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":683}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":687}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":689}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":691}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":700}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":705}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_SHADOW_COLOR","original":{"line":33,"column":26},"generated":{"line":1,"column":719}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":723}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":725}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":727}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":736}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":741}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":755}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":759}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":761}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":763}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":772}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":777}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":797}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":801}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":803}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":805}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":814}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":819}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":844}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":848}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":850}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":852}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":861}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":866}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":885}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":889}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":891}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":893}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":902}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":907}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":39,"column":39},"generated":{"line":1,"column":922}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":927}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":929}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":931}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":940}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":945}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":40,"column":36},"generated":{"line":1,"column":958}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":963}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":965}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":967}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":976}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":981}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":41,"column":45},"generated":{"line":1,"column":998}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1005}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1007}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1009}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1018}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1023}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1045}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1049}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1051}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1053}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1062}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1067}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":1089}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":1,"column":1092}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"setProps","original":{"line":46,"column":9},"generated":{"line":1,"column":1097}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":46,"column":18},"generated":{"line":1,"column":1106}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"setProps","original":{"line":49,"column":2},"generated":{"line":1,"column":1109}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":49,"column":11},"generated":{"line":1,"column":1118}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":50,"column":4},"generated":{"line":1,"column":1121}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":50,"column":9},"generated":{"line":1,"column":1126}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":50,"column":24},"generated":{"line":1,"column":1139}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":51,"column":4},"generated":{"line":1,"column":1144}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":51,"column":9},"generated":{"line":1,"column":1149}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":51,"column":29},"generated":{"line":1,"column":1167}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":1170}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLights","original":{"line":52,"column":9},"generated":{"line":1,"column":1175}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":52,"column":23},"generated":{"line":1,"column":1187}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":1190}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":54,"column":9},"generated":{"line":1,"column":1194}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"key","original":{"line":54,"column":15},"generated":{"line":1,"column":1200}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":54,"column":22},"generated":{"line":1,"column":1205}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":54,"column":29},"generated":{"line":1,"column":1207}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":1,"column":1208}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightSource","original":{"line":55,"column":12},"generated":{"line":1,"column":1214}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":55,"column":26},"generated":{"line":1,"column":1216}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"key","original":{"line":55,"column":32},"generated":{"line":1,"column":1218}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":57,"column":6},"generated":{"line":1,"column":1221}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightSource","original":{"line":57,"column":14},"generated":{"line":1,"column":1228}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"type","original":{"line":57,"column":26},"generated":{"line":1,"column":1230}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":1236}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":58,"column":13},"generated":{"line":1,"column":1240}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":59,"column":10},"generated":{"line":1,"column":1250}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":59,"column":15},"generated":{"line":1,"column":1255}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightSource","original":{"line":59,"column":30},"generated":{"line":1,"column":1268}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":60,"column":10},"generated":{"line":1,"column":1270}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":1276}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":62,"column":13},"generated":{"line":1,"column":1280}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":1294}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":63,"column":15},"generated":{"line":1,"column":1299}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"push","original":{"line":63,"column":33},"generated":{"line":1,"column":1317}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightSource","original":{"line":63,"column":38},"generated":{"line":1,"column":1322}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":64,"column":10},"generated":{"line":1,"column":1325}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":1331}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":1335}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":67,"column":10},"generated":{"line":1,"column":1343}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLights","original":{"line":67,"column":15},"generated":{"line":1,"column":1348}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"push","original":{"line":67,"column":27},"generated":{"line":1,"column":1360}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightSource","original":{"line":67,"column":32},"generated":{"line":1,"column":1365}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":1,"column":1369}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"_applyDefaultLights","original":{"line":72,"column":9},"generated":{"line":1,"column":1374}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":74,"column":4},"generated":{"line":1,"column":1396}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":74,"column":9},"generated":{"line":1,"column":1401}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":74,"column":18},"generated":{"line":1,"column":1408}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":74,"column":23},"generated":{"line":1,"column":1413}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"some","original":{"line":74,"column":41},"generated":{"line":1,"column":1431}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"light","original":{"line":74,"column":46},"generated":{"line":1,"column":1436}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"light","original":{"line":74,"column":55},"generated":{"line":1,"column":1439}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":74,"column":61},"generated":{"line":1,"column":1441}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":75,"column":4},"generated":{"line":1,"column":1449}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":75,"column":9},"generated":{"line":1,"column":1454}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"props","original":{"line":75,"column":17},"generated":{"line":1,"column":1460}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"preRender","original":{"line":78,"column":2},"generated":{"line":1,"column":1462}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"gl","original":{"line":79,"column":4},"generated":{"line":1,"column":1472}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":1475}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layers","original":{"line":80,"column":5},"generated":{"line":1,"column":1482}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":1484}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layerFilter","original":{"line":80,"column":13},"generated":{"line":1,"column":1496}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":1498}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"viewports","original":{"line":80,"column":26},"generated":{"line":1,"column":1508}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":1510}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"onViewportActive","original":{"line":80,"column":37},"generated":{"line":1,"column":1527}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":1529}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"views","original":{"line":80,"column":55},"generated":{"line":1,"column":1535}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":1539}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":82,"column":9},"generated":{"line":1,"column":1542}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":82,"column":14},"generated":{"line":1,"column":1547}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":1554}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":85,"column":4},"generated":{"line":1,"column":1555}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMatrices","original":{"line":85,"column":9},"generated":{"line":1,"column":1560}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":85,"column":26},"generated":{"line":1,"column":1575}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"_calculateMatrices","original":{"line":85,"column":31},"generated":{"line":1,"column":1580}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":87,"column":37},"generated":{"line":1,"column":1601}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":1605}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPasses","original":{"line":87,"column":13},"generated":{"line":1,"column":1610}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":87,"column":26},"generated":{"line":1,"column":1623}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":88,"column":6},"generated":{"line":1,"column":1631}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"_createShadowPasses","original":{"line":88,"column":11},"generated":{"line":1,"column":1636}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"gl","original":{"line":88,"column":31},"generated":{"line":1,"column":1656}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":90,"column":9},"generated":{"line":1,"column":1659}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"programManager","original":{"line":90,"column":14},"generated":{"line":1,"column":1664}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":1,"column":1681}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"programManager","original":{"line":92,"column":11},"generated":{"line":1,"column":1686}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ProgramManager","original":{"line":92,"column":28},"generated":{"line":1,"column":1701}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":92,"column":42},"generated":{"line":1,"column":1703}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"getDefaultProgramManager","original":{"line":92,"column":43},"generated":{"line":1,"column":1718}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"gl","original":{"line":92,"column":68},"generated":{"line":1,"column":1743}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":93,"column":10},"generated":{"line":1,"column":1746}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":93,"column":6},"generated":{"line":1,"column":1748}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":94,"column":8},"generated":{"line":1,"column":1757}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"programManager","original":{"line":94,"column":13},"generated":{"line":1,"column":1762}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"addDefaultModule","original":{"line":94,"column":28},"generated":{"line":1,"column":1777}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":94,"column":45},"generated":{"line":1,"column":1794}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":94,"column":8},"generated":{"line":1,"column":1796}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":98,"column":9},"generated":{"line":1,"column":1806}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":98,"column":14},"generated":{"line":1,"column":1811}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":99,"column":6},"generated":{"line":1,"column":1828}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":99,"column":11},"generated":{"line":1,"column":1833}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":99,"column":28},"generated":{"line":1,"column":1848}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"Texture2D","original":{"line":99,"column":32},"generated":{"line":1,"column":1852}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":99,"column":28},"generated":{"line":1,"column":1854}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"gl","original":{"line":99,"column":42},"generated":{"line":1,"column":1864}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":99,"column":46},"generated":{"line":1,"column":1866}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"width","original":{"line":100,"column":8},"generated":{"line":1,"column":1867}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":100,"column":15},"generated":{"line":1,"column":1873}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"height","original":{"line":101,"column":8},"generated":{"line":1,"column":1875}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":101,"column":16},"generated":{"line":1,"column":1882}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":105,"column":4},"generated":{"line":1,"column":1887}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":105,"column":9},"generated":{"line":1,"column":1891}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":105,"column":13},"generated":{"line":1,"column":1895}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":105,"column":17},"generated":{"line":1,"column":1897}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":105,"column":20},"generated":{"line":1,"column":1899}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":105,"column":24},"generated":{"line":1,"column":1901}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPasses","original":{"line":105,"column":29},"generated":{"line":1,"column":1906}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":105,"column":42},"generated":{"line":1,"column":1919}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":105,"column":50},"generated":{"line":1,"column":1926}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":105,"column":55},"generated":{"line":1,"column":1930}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":106,"column":25},"generated":{"line":1,"column":1931}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPasses","original":{"line":106,"column":30},"generated":{"line":1,"column":1936}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":106,"column":43},"generated":{"line":1,"column":1949}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"render","original":{"line":107,"column":17},"generated":{"line":1,"column":1952}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":107,"column":24},"generated":{"line":1,"column":1959}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layers","original":{"line":108,"column":8},"generated":{"line":1,"column":1960}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layers","original":{"line":108,"column":8},"generated":{"line":1,"column":1967}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layerFilter","original":{"line":109,"column":8},"generated":{"line":1,"column":1969}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layerFilter","original":{"line":109,"column":8},"generated":{"line":1,"column":1981}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"viewports","original":{"line":110,"column":8},"generated":{"line":1,"column":1983}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"viewports","original":{"line":110,"column":8},"generated":{"line":1,"column":1993}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"onViewportActive","original":{"line":111,"column":8},"generated":{"line":1,"column":1995}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"onViewportActive","original":{"line":111,"column":8},"generated":{"line":1,"column":2012}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"views","original":{"line":112,"column":8},"generated":{"line":1,"column":2014}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"views","original":{"line":112,"column":8},"generated":{"line":1,"column":2020}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"moduleParameters","original":{"line":113,"column":8},"generated":{"line":1,"column":2022}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":113,"column":26},"generated":{"line":1,"column":2039}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowLightId","original":{"line":114,"column":10},"generated":{"line":1,"column":2040}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":114,"column":25},"generated":{"line":1,"column":2054}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":115,"column":10},"generated":{"line":1,"column":2056}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":115,"column":26},"generated":{"line":1,"column":2071}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":115,"column":31},"generated":{"line":1,"column":2076}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMatrices","original":{"line":116,"column":10},"generated":{"line":1,"column":2091}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":116,"column":26},"generated":{"line":1,"column":2106}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMatrices","original":{"line":116,"column":31},"generated":{"line":1,"column":2111}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"getModuleParameters","original":{"line":122,"column":2},"generated":{"line":1,"column":2131}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layer","original":{"line":122,"column":22},"generated":{"line":1,"column":2151}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":123,"column":4},"generated":{"line":1,"column":2154}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"parameters","original":{"line":123,"column":10},"generated":{"line":1,"column":2160}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":133,"column":8},"generated":{"line":1,"column":2162}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":133,"column":13},"generated":{"line":1,"column":2167}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":134,"column":8},"generated":{"line":1,"column":2174}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMaps","original":{"line":135,"column":10},"generated":{"line":1,"column":2175}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":135,"column":22},"generated":{"line":1,"column":2186}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMaps","original":{"line":135,"column":27},"generated":{"line":1,"column":2191}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":136,"column":10},"generated":{"line":1,"column":2202}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":136,"column":26},"generated":{"line":1,"column":2217}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":136,"column":31},"generated":{"line":1,"column":2222}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowColor","original":{"line":137,"column":10},"generated":{"line":1,"column":2237}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":137,"column":23},"generated":{"line":1,"column":2249}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowColor","original":{"line":137,"column":28},"generated":{"line":1,"column":2254}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMatrices","original":{"line":138,"column":10},"generated":{"line":1,"column":2266}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":138,"column":26},"generated":{"line":1,"column":2281}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMatrices","original":{"line":138,"column":31},"generated":{"line":1,"column":2286}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":140,"column":8},"generated":{"line":1,"column":2302}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":152,"column":4},"generated":{"line":1,"column":2305}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"parameters","original":{"line":144,"column":4},"generated":{"line":1,"column":2312}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightSources","original":{"line":144,"column":15},"generated":{"line":1,"column":2314}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":144,"column":30},"generated":{"line":1,"column":2327}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":145,"column":6},"generated":{"line":1,"column":2328}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":145,"column":20},"generated":{"line":1,"column":2341}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":145,"column":25},"generated":{"line":1,"column":2346}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":146,"column":6},"generated":{"line":1,"column":2359}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":146,"column":25},"generated":{"line":1,"column":2377}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":146,"column":30},"generated":{"line":1,"column":2382}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"map","original":{"line":146,"column":48},"generated":{"line":1,"column":2400}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLight","original":{"line":146,"column":52},"generated":{"line":1,"column":2404}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLight","original":{"line":147,"column":8},"generated":{"line":1,"column":2407}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"getProjectedLight","original":{"line":147,"column":25},"generated":{"line":1,"column":2409}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":147,"column":43},"generated":{"line":1,"column":2427}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layer","original":{"line":147,"column":44},"generated":{"line":1,"column":2428}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layer","original":{"line":147,"column":44},"generated":{"line":1,"column":2434}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLights","original":{"line":149,"column":6},"generated":{"line":1,"column":2439}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":149,"column":19},"generated":{"line":1,"column":2451}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLights","original":{"line":149,"column":24},"generated":{"line":1,"column":2456}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"map","original":{"line":149,"column":36},"generated":{"line":1,"column":2468}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLight","original":{"line":149,"column":40},"generated":{"line":1,"column":2472}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLight","original":{"line":149,"column":54},"generated":{"line":1,"column":2475}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"getProjectedLight","original":{"line":149,"column":65},"generated":{"line":1,"column":2477}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":149,"column":83},"generated":{"line":1,"column":2495}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layer","original":{"line":149,"column":84},"generated":{"line":1,"column":2496}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"layer","original":{"line":149,"column":84},"generated":{"line":1,"column":2502}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"parameters","original":{"line":152,"column":11},"generated":{"line":1,"column":2508}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"cleanup","original":{"line":155,"column":2},"generated":{"line":1,"column":2510}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":156,"column":4},"generated":{"line":1,"column":2520}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":156,"column":9},"generated":{"line":1,"column":2524}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPass","original":{"line":156,"column":15},"generated":{"line":1,"column":2530}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":156,"column":29},"generated":{"line":1,"column":2535}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPasses","original":{"line":156,"column":34},"generated":{"line":1,"column":2540}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPass","original":{"line":157,"column":6},"generated":{"line":1,"column":2553}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"delete","original":{"line":157,"column":17},"generated":{"line":1,"column":2555}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":159,"column":4},"generated":{"line":1,"column":2564}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPasses","original":{"line":159,"column":9},"generated":{"line":1,"column":2569}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":159,"column":22},"generated":{"line":1,"column":2582}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":159,"column":31},"generated":{"line":1,"column":2589}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":160,"column":4},"generated":{"line":1,"column":2591}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMaps","original":{"line":160,"column":9},"generated":{"line":1,"column":2596}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":160,"column":20},"generated":{"line":1,"column":2607}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":160,"column":29},"generated":{"line":1,"column":2614}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":162,"column":8},"generated":{"line":1,"column":2616}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":162,"column":13},"generated":{"line":1,"column":2621}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":163,"column":6},"generated":{"line":1,"column":2638}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":163,"column":11},"generated":{"line":1,"column":2643}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"delete","original":{"line":163,"column":26},"generated":{"line":1,"column":2658}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":164,"column":6},"generated":{"line":1,"column":2667}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"dummyShadowMap","original":{"line":164,"column":11},"generated":{"line":1,"column":2672}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":164,"column":28},"generated":{"line":1,"column":2687}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":167,"column":8},"generated":{"line":1,"column":2693}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":167,"column":13},"generated":{"line":1,"column":2698}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":167,"column":23},"generated":{"line":1,"column":2706}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"programManager","original":{"line":167,"column":28},"generated":{"line":1,"column":2711}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":168,"column":6},"generated":{"line":1,"column":2728}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"programManager","original":{"line":168,"column":11},"generated":{"line":1,"column":2733}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"removeDefaultModule","original":{"line":168,"column":26},"generated":{"line":1,"column":2748}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadow","original":{"line":168,"column":46},"generated":{"line":1,"column":2768}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":168,"column":6},"generated":{"line":1,"column":2770}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":169,"column":6},"generated":{"line":1,"column":2779}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"programManager","original":{"line":169,"column":11},"generated":{"line":1,"column":2784}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":169,"column":28},"generated":{"line":1,"column":2799}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"_calculateMatrices","original":{"line":173,"column":10},"generated":{"line":1,"column":2805}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":174,"column":4},"generated":{"line":1,"column":2826}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightMatrices","original":{"line":174,"column":10},"generated":{"line":1,"column":2832}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":174,"column":37},"generated":{"line":1,"column":2834}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":175,"column":4},"generated":{"line":1,"column":2837}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":175,"column":9},"generated":{"line":1,"column":2841}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"light","original":{"line":175,"column":15},"generated":{"line":1,"column":2847}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":175,"column":24},"generated":{"line":1,"column":2852}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":175,"column":29},"generated":{"line":1,"column":2857}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":175,"column":48},"generated":{"line":1,"column":2875}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":176,"column":6},"generated":{"line":1,"column":2876}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"viewMatrix","original":{"line":176,"column":12},"generated":{"line":1,"column":2882}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":176,"column":25},"generated":{"line":1,"column":2885}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"Matrix4","original":{"line":176,"column":29},"generated":{"line":1,"column":2889}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":176,"column":25},"generated":{"line":1,"column":2891}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lookAt","original":{"line":176,"column":39},"generated":{"line":1,"column":2900}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":176,"column":46},"generated":{"line":1,"column":2907}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"eye","original":{"line":177,"column":8},"generated":{"line":1,"column":2908}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":177,"column":13},"generated":{"line":1,"column":2912}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"Vector3","original":{"line":177,"column":17},"generated":{"line":1,"column":2916}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":177,"column":13},"generated":{"line":1,"column":2918}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"light","original":{"line":177,"column":25},"generated":{"line":1,"column":2926}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"direction","original":{"line":177,"column":31},"generated":{"line":1,"column":2928}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"negate","original":{"line":177,"column":42},"generated":{"line":1,"column":2939}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightMatrices","original":{"line":180,"column":6},"generated":{"line":1,"column":2950}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"push","original":{"line":180,"column":20},"generated":{"line":1,"column":2952}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"viewMatrix","original":{"line":180,"column":25},"generated":{"line":1,"column":2957}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":182,"column":4},"generated":{"line":1,"column":2960}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"lightMatrices","original":{"line":182,"column":11},"generated":{"line":1,"column":2967}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"_createShadowPasses","original":{"line":185,"column":10},"generated":{"line":1,"column":2969}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"gl","original":{"line":185,"column":30},"generated":{"line":1,"column":2989}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":186,"column":4},"generated":{"line":1,"column":2992}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":186,"column":9},"generated":{"line":1,"column":2996}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":186,"column":13},"generated":{"line":1,"column":3000}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":186,"column":17},"generated":{"line":1,"column":3002}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":186,"column":20},"generated":{"line":1,"column":3004}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":186,"column":24},"generated":{"line":1,"column":3006}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":186,"column":29},"generated":{"line":1,"column":3011}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":186,"column":47},"generated":{"line":1,"column":3029}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":186,"column":55},"generated":{"line":1,"column":3036}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":186,"column":60},"generated":{"line":1,"column":3040}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":187,"column":6},"generated":{"line":1,"column":3041}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPass","original":{"line":187,"column":12},"generated":{"line":1,"column":3047}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":187,"column":25},"generated":{"line":1,"column":3049}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ShadowPass","original":{"line":187,"column":29},"generated":{"line":1,"column":3053}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":187,"column":25},"generated":{"line":1,"column":3055}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"gl","original":{"line":187,"column":40},"generated":{"line":1,"column":3063}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":188,"column":6},"generated":{"line":1,"column":3066}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPasses","original":{"line":188,"column":11},"generated":{"line":1,"column":3071}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":188,"column":24},"generated":{"line":1,"column":3084}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPass","original":{"line":188,"column":29},"generated":{"line":1,"column":3087}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":189,"column":6},"generated":{"line":1,"column":3089}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMaps","original":{"line":189,"column":11},"generated":{"line":1,"column":3094}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"i","original":{"line":189,"column":22},"generated":{"line":1,"column":3105}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowPass","original":{"line":189,"column":27},"generated":{"line":1,"column":3108}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"shadowMap","original":{"line":189,"column":38},"generated":{"line":1,"column":3110}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"_applyDefaultLights","original":{"line":193,"column":10},"generated":{"line":1,"column":3121}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":194,"column":4},"generated":{"line":1,"column":3143}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":194,"column":10},"generated":{"line":1,"column":3149}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":194,"column":11},"generated":{"line":1,"column":3162}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":194,"column":10},"generated":{"line":1,"column":3164}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLights","original":{"line":194,"column":25},"generated":{"line":1,"column":3176}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":194,"column":10},"generated":{"line":1,"column":3178}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":194,"column":38},"generated":{"line":1,"column":3196}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":194,"column":59},"generated":{"line":1,"column":3199}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":195,"column":9},"generated":{"line":1,"column":3204}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":195,"column":48},"generated":{"line":1,"column":3207}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"pointLights","original":{"line":195,"column":25},"generated":{"line":1,"column":3211}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":195,"column":37},"generated":{"line":1,"column":3213}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":195,"column":82},"generated":{"line":1,"column":3221}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":195,"column":53},"generated":{"line":1,"column":3225}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"length","original":{"line":195,"column":71},"generated":{"line":1,"column":3227}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":196,"column":6},"generated":{"line":1,"column":3236}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"ambientLight","original":{"line":196,"column":11},"generated":{"line":1,"column":3241}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":196,"column":26},"generated":{"line":1,"column":3254}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"AmbientLight","original":{"line":196,"column":30},"generated":{"line":1,"column":3258}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":196,"column":26},"generated":{"line":1,"column":3260}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_AMBIENT_LIGHT_PROPS","original":{"line":196,"column":43},"generated":{"line":1,"column":3273}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":197,"column":6},"generated":{"line":1,"column":3276}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"directionalLights","original":{"line":197,"column":11},"generated":{"line":1,"column":3281}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"push","original":{"line":197,"column":29},"generated":{"line":1,"column":3299}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":198,"column":8},"generated":{"line":1,"column":3304}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DirectionalLight","original":{"line":198,"column":12},"generated":{"line":1,"column":3308}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":198,"column":8},"generated":{"line":1,"column":3310}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_DIRECTIONAL_LIGHT_PROPS","original":{"line":198,"column":29},"generated":{"line":1,"column":3327}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":198,"column":61},"generated":{"line":1,"column":3329}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":199,"column":8},"generated":{"line":1,"column":3333}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DirectionalLight","original":{"line":199,"column":12},"generated":{"line":1,"column":3337}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":199,"column":8},"generated":{"line":1,"column":3339}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":"DEFAULT_DIRECTIONAL_LIGHT_PROPS","original":{"line":199,"column":29},"generated":{"line":1,"column":3356}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":199,"column":61},"generated":{"line":1,"column":3358}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":3365}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":3373}},{"source":"../../../../src/effects/lighting/lighting-effect.ts","name":null,"original":{"line":30,"column":54},"generated":{"line":1,"column":3381}}],"sources":{"../../../../src/effects/lighting/lighting-effect.ts":"import {Texture2D, ProgramManager} from '@luma.gl/core';\nimport {AmbientLight} from './ambient-light';\nimport {DirectionalLight} from './directional-light';\nimport {PointLight} from './point-light';\nimport {Matrix4, Vector3} from '@math.gl/core';\nimport ShadowPass from '../../passes/shadow-pass';\nimport shadow from '../../shaderlib/shadow/shadow';\n\nimport type Layer from '../../lib/layer';\nimport type {Effect, PreRenderOptions} from '../../lib/effect';\n\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {color: [255, 255, 255], intensity: 1.0};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [\n  {\n    color: [255, 255, 255],\n    intensity: 1.0,\n    direction: [-1, 3, -1]\n  },\n  {\n    color: [255, 255, 255],\n    intensity: 0.9,\n    direction: [1, -8, -2.5]\n  }\n];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\n\ntype LightingEffectProps = Record<string, PointLight | DirectionalLight | AmbientLight>;\n\n// Class to manage ambient, point and directional light sources in deck\nexport default class LightingEffect implements Effect {\n  id = 'lighting-effect';\n  props!: LightingEffectProps;\n  shadowColor: number[] = DEFAULT_SHADOW_COLOR;\n\n  private shadow!: boolean;\n  private ambientLight!: AmbientLight | null;\n  private directionalLights!: DirectionalLight[];\n  private pointLights!: PointLight[];\n  private shadowPasses: ShadowPass[] = [];\n  private shadowMaps: Texture2D[] = [];\n  private dummyShadowMap: Texture2D | null = null;\n  private programManager?: ProgramManager;\n  private shadowMatrices?: Matrix4[];\n\n  constructor(props: LightingEffectProps = {}) {\n    this.setProps(props);\n  }\n\n  setProps(props: LightingEffectProps) {\n    this.ambientLight = null;\n    this.directionalLights = [];\n    this.pointLights = [];\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource as DirectionalLight);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource as PointLight);\n          break;\n        default:\n      }\n    }\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n    this.props = props;\n  }\n\n  preRender(\n    gl: WebGLRenderingContext,\n    {layers, layerFilter, viewports, onViewportActive, views}: PreRenderOptions\n  ) {\n    if (!this.shadow) return;\n\n    // create light matrix every frame to make sure always updated from light source\n    this.shadowMatrices = this._calculateMatrices();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n    if (!this.programManager) {\n      // TODO - support multiple contexts\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer: Layer) {\n    const parameters: {\n      lightSources?: {\n        ambientLight: AmbientLight | null;\n        directionalLights: DirectionalLight[];\n        pointLights: PointLight[];\n      };\n      shadowMaps?: Texture2D[];\n      dummyShadowMap?: Texture2D;\n      shadowColor?: number[];\n      shadowMatrices?: Matrix4[];\n    } = this.shadow\n      ? {\n          shadowMaps: this.shadowMaps,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowColor: this.shadowColor,\n          shadowMatrices: this.shadowMatrices\n        }\n      : {};\n\n    // when not rendering to screen, turn off lighting by adding empty light source object\n    // lights shader module relies on the `lightSources` to turn on/off lighting\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight =>\n        directionalLight.getProjectedLight({layer})\n      ),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({layer}))\n    };\n\n    return parameters;\n  }\n\n  cleanup(): void {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  private _calculateMatrices(): Matrix4[] {\n    const lightMatrices: Matrix4[] = [];\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n\n      lightMatrices.push(viewMatrix);\n    }\n    return lightMatrices;\n  }\n\n  private _createShadowPasses(gl: WebGLRenderingContext): void {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  private _applyDefaultLights(): void {\n    const {ambientLight, pointLights, directionalLights} = this;\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(\n        new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]),\n        new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1])\n      );\n    }\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"4049031e4fdf37b98562acfa7b5c74bf","cacheData":{"env":{}}}