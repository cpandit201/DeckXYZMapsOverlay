{"id":"node_modules/@loaders.gl/core/dist/esm/iterators/make-stream/make-dom-stream.js","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@loaders.gl/core/dist/esm/iterators/make-stream/make-dom-stream.js.map","includedInParent":true,"mtime":1688284130527},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@loaders.gl/core/package.json","includedInParent":true,"mtime":1688284130527}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeStream = makeStream;\nfunction makeStream(source, options) {\n  const iterator = source[Symbol.asyncIterator] ? source[Symbol.asyncIterator]() : source[Symbol.iterator]();\n  return new ReadableStream({\n    type: 'bytes',\n    async pull(controller) {\n      try {\n        const {\n          done,\n          value\n        } = await iterator.next();\n        if (done) {\n          controller.close();\n        } else {\n          controller.enqueue(new Uint8Array(value));\n        }\n      } catch (error) {\n        controller.error(error);\n      }\n    },\n    async cancel() {\n      var _iterator$return;\n      await (iterator === null || iterator === void 0 ? void 0 : (_iterator$return = iterator.return) === null || _iterator$return === void 0 ? void 0 : _iterator$return.call(iterator));\n    }\n  }, {\n    highWaterMark: 2 ** 24,\n    ...options\n  });\n}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":14,"column":7},"generated":{"line":7,"column":0}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"makeStream","original":{"line":14,"column":16},"generated":{"line":7,"column":9}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"makeStream","original":{"line":14,"column":26},"generated":{"line":7,"column":19}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"source","original":{"line":15,"column":2},"generated":{"line":7,"column":20}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":15,"column":60},"generated":{"line":7,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"options","original":{"line":16,"column":2},"generated":{"line":7,"column":28}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":16,"column":29},"generated":{"line":7,"column":35}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":17,"column":18},"generated":{"line":7,"column":37}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":8,"column":2}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":18,"column":8},"generated":{"line":8,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":18,"column":16},"generated":{"line":8,"column":16}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"source","original":{"line":18,"column":19},"generated":{"line":8,"column":19}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":8,"column":25}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"Symbol","original":{"line":18,"column":26},"generated":{"line":8,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":18,"column":32},"generated":{"line":8,"column":32}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"asyncIterator","original":{"line":18,"column":33},"generated":{"line":8,"column":33}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":18,"column":46},"generated":{"line":8,"column":46}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":18,"column":47},"generated":{"line":8,"column":47}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"source","original":{"line":19,"column":7},"generated":{"line":8,"column":50}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":19,"column":13},"generated":{"line":8,"column":56}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"Symbol","original":{"line":19,"column":45},"generated":{"line":8,"column":57}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":19,"column":51},"generated":{"line":8,"column":63}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"asyncIterator","original":{"line":19,"column":52},"generated":{"line":8,"column":64}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":19,"column":65},"generated":{"line":8,"column":77}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":19,"column":66},"generated":{"line":8,"column":78}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":19,"column":67},"generated":{"line":8,"column":79}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":19,"column":68},"generated":{"line":8,"column":80}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"source","original":{"line":20,"column":7},"generated":{"line":8,"column":83}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":8,"column":89}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"Symbol","original":{"line":20,"column":40},"generated":{"line":8,"column":90}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":20,"column":46},"generated":{"line":8,"column":96}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":20,"column":47},"generated":{"line":8,"column":97}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":20,"column":55},"generated":{"line":8,"column":105}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":20,"column":56},"generated":{"line":8,"column":106}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":20,"column":57},"generated":{"line":8,"column":107}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":20,"column":58},"generated":{"line":8,"column":108}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":9,"column":2}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":22,"column":9},"generated":{"line":9,"column":9}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"ReadableStream","original":{"line":22,"column":13},"generated":{"line":9,"column":13}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":22,"column":27},"generated":{"line":9,"column":27}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":9,"column":28}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"type","original":{"line":27,"column":6},"generated":{"line":10,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":10,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":10,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":27,"column":19},"generated":{"line":10,"column":17}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":11,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"pull","original":{"line":29,"column":12},"generated":{"line":11,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"pull","original":{"line":29,"column":16},"generated":{"line":11,"column":14}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"controller","original":{"line":29,"column":17},"generated":{"line":11,"column":15}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":29,"column":27},"generated":{"line":11,"column":25}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":29,"column":29},"generated":{"line":11,"column":27}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":12,"column":6}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":12,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":13,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":13,"column":14}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"done","original":{"line":31,"column":17},"generated":{"line":14,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":21},"generated":{"line":14,"column":14}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"value","original":{"line":31,"column":23},"generated":{"line":15,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":28},"generated":{"line":16,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":16,"column":9}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":32},"generated":{"line":16,"column":12}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":31,"column":38},"generated":{"line":16,"column":18}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":46},"generated":{"line":16,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"next","original":{"line":31,"column":47},"generated":{"line":16,"column":27}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":51},"generated":{"line":16,"column":31}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":52},"generated":{"line":16,"column":32}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":31,"column":53},"generated":{"line":16,"column":33}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":32,"column":10},"generated":{"line":17,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"done","original":{"line":32,"column":14},"generated":{"line":17,"column":12}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":32,"column":18},"generated":{"line":17,"column":16}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":32,"column":20},"generated":{"line":17,"column":18}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"controller","original":{"line":33,"column":12},"generated":{"line":18,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":33,"column":22},"generated":{"line":18,"column":20}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"close","original":{"line":33,"column":23},"generated":{"line":18,"column":21}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":33,"column":28},"generated":{"line":18,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":33,"column":29},"generated":{"line":18,"column":27}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":33,"column":30},"generated":{"line":18,"column":28}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":19,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":34,"column":11},"generated":{"line":19,"column":9}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":34,"column":17},"generated":{"line":19,"column":15}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"controller","original":{"line":37,"column":12},"generated":{"line":20,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":22},"generated":{"line":20,"column":20}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"enqueue","original":{"line":37,"column":23},"generated":{"line":20,"column":21}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":30},"generated":{"line":20,"column":28}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":31},"generated":{"line":20,"column":29}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"Uint8Array","original":{"line":37,"column":35},"generated":{"line":20,"column":33}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":45},"generated":{"line":20,"column":43}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"value","original":{"line":37,"column":46},"generated":{"line":20,"column":44}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":51},"generated":{"line":20,"column":49}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":52},"generated":{"line":20,"column":50}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":37,"column":53},"generated":{"line":20,"column":51}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":21,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":22,"column":6}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":22,"column":7}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":22,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"error","original":{"line":39,"column":17},"generated":{"line":22,"column":15}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":22,"column":20}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":39,"column":24},"generated":{"line":22,"column":22}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"controller","original":{"line":40,"column":10},"generated":{"line":23,"column":8}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":23,"column":18}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"error","original":{"line":40,"column":21},"generated":{"line":23,"column":19}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":23,"column":24}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"error","original":{"line":40,"column":27},"generated":{"line":23,"column":25}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":40,"column":32},"generated":{"line":23,"column":30}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":40,"column":33},"generated":{"line":23,"column":31}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":24,"column":6}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":25,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":42,"column":7},"generated":{"line":25,"column":5}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":44,"column":6},"generated":{"line":26,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"cancel","original":{"line":44,"column":12},"generated":{"line":26,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"cancel","original":{"line":44,"column":18},"generated":{"line":26,"column":16}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"cancel","original":{"line":44,"column":18},"generated":{"line":26,"column":17}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":44,"column":21},"generated":{"line":26,"column":19}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":44,"column":21},"generated":{"line":27,"column":6}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"_iterator$return","original":{"line":44,"column":21},"generated":{"line":27,"column":10}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":44,"column":21},"generated":{"line":27,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":28,"column":6}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":45,"column":14},"generated":{"line":28,"column":13}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":21}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":30}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":45,"column":14},"generated":{"line":28,"column":34}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":42}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":47}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":52}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":53}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":56}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":61}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":62}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":65}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"_iterator$return","original":{"line":45,"column":22},"generated":{"line":28,"column":66}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":82}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":45,"column":14},"generated":{"line":28,"column":85}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":28,"column":93}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"return","original":{"line":45,"column":24},"generated":{"line":28,"column":94}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":100}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":106}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":110}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"_iterator$return","original":{"line":45,"column":30},"generated":{"line":28,"column":114}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":130}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":135}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":140}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":141}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":144}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":149}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":28,"column":150}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"_iterator$return","original":{"line":45,"column":14},"generated":{"line":28,"column":153}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":28,"column":169}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"call","original":{"line":45,"column":14},"generated":{"line":28,"column":170}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":28,"column":174}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"iterator","original":{"line":45,"column":14},"generated":{"line":28,"column":175}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":28,"column":183}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":34},"generated":{"line":28,"column":184}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":45,"column":34},"generated":{"line":28,"column":185}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":29,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":30,"column":2}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":47,"column":5},"generated":{"line":30,"column":3}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":49,"column":4},"generated":{"line":30,"column":5}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"highWaterMark","original":{"line":51,"column":6},"generated":{"line":31,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":51,"column":19},"generated":{"line":31,"column":17}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":51,"column":21},"generated":{"line":31,"column":19}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":51,"column":22},"generated":{"line":31,"column":20}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":51,"column":26},"generated":{"line":31,"column":24}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":51,"column":28},"generated":{"line":31,"column":26}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":32,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":"options","original":{"line":52,"column":9},"generated":{"line":32,"column":7}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":53,"column":4},"generated":{"line":33,"column":2}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":33,"column":3}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":54,"column":3},"generated":{"line":33,"column":4}},{"source":"../../../../src/iterators/make-stream/make-dom-stream.ts","name":null,"original":{"line":55,"column":0},"generated":{"line":34,"column":0}}],"sources":{"../../../../src/iterators/make-stream/make-dom-stream.ts":"export type MakeStreamOptions = {\n  /** Stream allocates an arrayBuffer. Enables use of a default reader. */\n  autoAllocateChunkSize?: number;\n  /** Total number of chunks in queue before back pressure is applied */\n  highWaterMark?: number;\n};\n\n/**\n * Builds a DOM stream from an iterator\n * This stream is currently used in browsers only,\n * but note that Web stream support is present in Node from Node 16\n * https://nodejs.org/api/webstreams.html#webstreams_web_streams_api\n */\nexport function makeStream<ArrayBuffer>(\n  source: Iterable<ArrayBuffer> | AsyncIterable<ArrayBuffer>,\n  options?: MakeStreamOptions\n): ReadableStream {\n  const iterator = source[Symbol.asyncIterator]\n    ? (source as AsyncIterable<ArrayBuffer>)[Symbol.asyncIterator]()\n    : (source as Iterable<ArrayBuffer>)[Symbol.iterator]();\n\n  return new ReadableStream<Uint8Array>(\n    {\n      // Create a byte stream (enables `Response(stream).arrayBuffer()`)\n      // Only supported on Chrome\n      // See: https://developer.mozilla.org/en-US/docs/Web/API/ReadableByteStreamController\n      type: 'bytes',\n\n      async pull(controller) {\n        try {\n          const {done, value} = await iterator.next();\n          if (done) {\n            controller.close();\n          } else {\n            // TODO - ignores controller.desiredSize\n            // @ts-expect-error Unclear why value is not correctly typed\n            controller.enqueue(new Uint8Array(value));\n          }\n        } catch (error) {\n          controller.error(error);\n        }\n      },\n\n      async cancel() {\n        await iterator?.return?.();\n      }\n    },\n    // options: QueingStrategy<Uint8Array>\n    {\n      // This is bytes, not chunks\n      highWaterMark: 2 ** 24,\n      ...options\n    }\n  );\n}\n"},"lineCount":null}},"error":null,"hash":"ffb1065c95c85dae48b4c128b9a4b1ba","cacheData":{"env":{}}}