{"id":"gw95","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"../../lib/constants","loc":{"line":1,"column":51,"index":51},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/constants.js"},{"name":"../project/project","loc":{"line":2,"column":20,"index":94},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js"},{"name":"@math.gl/core","loc":{"line":3,"column":33,"index":149},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/core/dist/esm/index.js"},{"name":"../../utils/memoize","loc":{"line":4,"column":20,"index":186},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/utils/memoize.js"},{"name":"@math.gl/web-mercator","loc":{"line":5,"column":30,"index":239},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var o=require(\"../../lib/constants\"),a=i(require(\"../project/project\")),t=require(\"@math.gl/core\"),n=i(require(\"../../utils/memoize\")),e=require(\"@math.gl/web-mercator\");function i(o){return o&&o.__esModule?o:{default:o}}const s=\"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\",h=\"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\",r=(0,n.default)(u),d=(0,n.default)(l),w=[0,0,0,1],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function p(o,a){const[t,n,i]=o,s=(0,e.pixelsToWorld)([t,n,i],a);return Number.isFinite(i)?s:[s[0],s[1],0]}function u({viewport:o,center:a}){return new t.Matrix4(o.viewProjectionMatrix).invert().transform(a)}function l({viewport:o,shadowMatrices:a}){const n=[],e=o.pixelUnprojectionMatrix,i=o.isGeospatial?void 0:1,s=[[0,0,i],[o.width,0,i],[0,o.height,i],[o.width,o.height,i],[0,0,-1],[o.width,0,-1],[0,o.height,-1],[o.width,o.height,-1]].map(o=>p(o,e));for(const h of a){const a=h.clone().translate(new t.Vector3(o.center).negate()),e=s.map(o=>a.transform(o)),i=(new t.Matrix4).ortho({left:Math.min(...e.map(o=>o[0])),right:Math.max(...e.map(o=>o[0])),bottom:Math.min(...e.map(o=>o[1])),top:Math.max(...e.map(o=>o[1])),near:Math.min(...e.map(o=>-o[2])),far:Math.max(...e.map(o=>-o[2]))});n.push(i.multiplyRight(h))}return n}function _(a,n){const{shadowEnabled:e=!0}=a;if(!e||!a.shadowMatrices||!a.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:Boolean(a.drawToShadowMap),shadow_uUseShadowMap:!!a.shadowMaps&&a.shadowMaps.length>0,shadow_uColor:a.shadowColor||w,shadow_uLightId:a.shadowLightId||0,shadow_uLightCount:a.shadowMatrices.length},s=r({viewport:a.viewport,center:n.project_uCenter}),h=[],p=d({shadowMatrices:a.shadowMatrices,viewport:a.viewport}).slice();for(let r=0;r<a.shadowMatrices.length;r++){const e=p[r],i=e.clone().translate(new t.Vector3(a.viewport.center).negate());n.project_uCoordinateSystem===o.COORDINATE_SYSTEM.LNGLAT&&n.project_uProjectionMode===o.PROJECTION_MODE.WEB_MERCATOR?(p[r]=i,h[r]=s):(p[r]=e.clone().multiplyRight(c),h[r]=i.transform(s))}for(let o=0;o<p.length;o++)i[\"shadow_uViewProjectionMatrices[\".concat(o,\"]\")]=p[o],i[\"shadow_uProjectCenters[\".concat(o,\"]\")]=h[o],a.shadowMaps&&a.shadowMaps.length>0?i[\"shadow_uShadowMap\".concat(o)]=a.shadowMaps[o]:i[\"shadow_uShadowMap\".concat(o)]=a.dummyShadowMap;return i}var m={name:\"shadow\",dependencies:[a.default],vs:s,fs:h,inject:{\"vs:DECKGL_FILTER_GL_POSITION\":\"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\"fs:DECKGL_FILTER_COLOR\":\"\\n    color = shadow_filterShadowColor(color);\\n    \"},getUniforms:(o={},a={})=>\"viewport\"in o&&(o.drawToShadowMap||o.shadowMaps&&o.shadowMaps.length>0)?_(o,a):{}};exports.default=m;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":89}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":91}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":97}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":105}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":128}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":130}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":132}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":140}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":163}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":165}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":173}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":190}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":192}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":194}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":202}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":226}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":228}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":236}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":261}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":270}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":272}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":275}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":282}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":285}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":287}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":298}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":300}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":301}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":309}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":312}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"vs","original":{"line":31,"column":6},"generated":{"line":1,"column":318}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":320}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"fs","original":{"line":58,"column":6},"generated":{"line":1,"column":1317}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":1319}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getMemoizedViewportCenterPosition","original":{"line":104,"column":6},"generated":{"line":1,"column":2787}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"memoize","original":{"line":104,"column":42},"generated":{"line":1,"column":2790}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"memoize","original":{"line":104,"column":42},"generated":{"line":1,"column":2792}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":104,"column":49},"generated":{"line":1,"column":2794}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getViewportCenterPosition","original":{"line":104,"column":50},"generated":{"line":1,"column":2803}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getMemoizedViewProjectionMatrices","original":{"line":105,"column":6},"generated":{"line":1,"column":2806}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"memoize","original":{"line":105,"column":42},"generated":{"line":1,"column":2809}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"memoize","original":{"line":105,"column":42},"generated":{"line":1,"column":2811}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":105,"column":49},"generated":{"line":1,"column":2813}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getViewProjectionMatrices","original":{"line":105,"column":50},"generated":{"line":1,"column":2822}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"DEFAULT_SHADOW_COLOR","original":{"line":107,"column":6},"generated":{"line":1,"column":2825}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":107,"column":29},"generated":{"line":1,"column":2827}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":107,"column":30},"generated":{"line":1,"column":2828}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":107,"column":33},"generated":{"line":1,"column":2830}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":107,"column":36},"generated":{"line":1,"column":2832}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":107,"column":39},"generated":{"line":1,"column":2834}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"VECTOR_TO_POINT_MATRIX","original":{"line":108,"column":6},"generated":{"line":1,"column":2837}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":31},"generated":{"line":1,"column":2839}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":32},"generated":{"line":1,"column":2840}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":35},"generated":{"line":1,"column":2842}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":38},"generated":{"line":1,"column":2844}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":41},"generated":{"line":1,"column":2846}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":44},"generated":{"line":1,"column":2848}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":47},"generated":{"line":1,"column":2850}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":50},"generated":{"line":1,"column":2852}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":53},"generated":{"line":1,"column":2854}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":56},"generated":{"line":1,"column":2856}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":59},"generated":{"line":1,"column":2858}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":62},"generated":{"line":1,"column":2860}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":65},"generated":{"line":1,"column":2862}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":68},"generated":{"line":1,"column":2864}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":71},"generated":{"line":1,"column":2866}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":74},"generated":{"line":1,"column":2868}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":108,"column":77},"generated":{"line":1,"column":2870}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":121,"column":0},"generated":{"line":1,"column":2873}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"screenToCommonSpace","original":{"line":121,"column":9},"generated":{"line":1,"column":2882}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"xyz","original":{"line":121,"column":29},"generated":{"line":1,"column":2884}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelUnprojectionMatrix","original":{"line":121,"column":44},"generated":{"line":1,"column":2886}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":122,"column":2},"generated":{"line":1,"column":2889}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"x","original":{"line":122,"column":9},"generated":{"line":1,"column":2895}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"y","original":{"line":122,"column":12},"generated":{"line":1,"column":2897}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"z","original":{"line":122,"column":15},"generated":{"line":1,"column":2899}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"xyz","original":{"line":122,"column":20},"generated":{"line":1,"column":2902}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"coord","original":{"line":123,"column":8},"generated":{"line":1,"column":2904}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelsToWorld","original":{"line":123,"column":16},"generated":{"line":1,"column":2907}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelsToWorld","original":{"line":123,"column":16},"generated":{"line":1,"column":2909}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":123,"column":29},"generated":{"line":1,"column":2911}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":123,"column":30},"generated":{"line":1,"column":2926}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"x","original":{"line":123,"column":31},"generated":{"line":1,"column":2927}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"y","original":{"line":123,"column":34},"generated":{"line":1,"column":2929}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"z","original":{"line":123,"column":37},"generated":{"line":1,"column":2931}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelUnprojectionMatrix","original":{"line":123,"column":41},"generated":{"line":1,"column":2934}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":125,"column":2},"generated":{"line":1,"column":2937}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Number","original":{"line":125,"column":6},"generated":{"line":1,"column":2944}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"isFinite","original":{"line":125,"column":13},"generated":{"line":1,"column":2951}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"z","original":{"line":125,"column":22},"generated":{"line":1,"column":2960}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"coord","original":{"line":126,"column":11},"generated":{"line":1,"column":2963}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":128,"column":9},"generated":{"line":1,"column":2965}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"coord","original":{"line":128,"column":10},"generated":{"line":1,"column":2966}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":128,"column":16},"generated":{"line":1,"column":2968}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"coord","original":{"line":128,"column":20},"generated":{"line":1,"column":2971}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":128,"column":26},"generated":{"line":1,"column":2973}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":128,"column":30},"generated":{"line":1,"column":2976}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":131,"column":0},"generated":{"line":1,"column":2979}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getViewportCenterPosition","original":{"line":131,"column":9},"generated":{"line":1,"column":2988}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":131,"column":35},"generated":{"line":1,"column":2991}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":132,"column":2},"generated":{"line":1,"column":3000}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":131,"column":35},"generated":{"line":1,"column":3002}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":133,"column":2},"generated":{"line":1,"column":3009}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":138,"column":2},"generated":{"line":1,"column":3013}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":138,"column":9},"generated":{"line":1,"column":3020}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Matrix4","original":{"line":138,"column":13},"generated":{"line":1,"column":3024}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":138,"column":9},"generated":{"line":1,"column":3026}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":138,"column":21},"generated":{"line":1,"column":3034}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrix","original":{"line":138,"column":30},"generated":{"line":1,"column":3036}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"invert","original":{"line":138,"column":52},"generated":{"line":1,"column":3058}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"transform","original":{"line":138,"column":61},"generated":{"line":1,"column":3067}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":138,"column":71},"generated":{"line":1,"column":3077}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":141,"column":0},"generated":{"line":1,"column":3080}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getViewProjectionMatrices","original":{"line":141,"column":9},"generated":{"line":1,"column":3089}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":141,"column":35},"generated":{"line":1,"column":3092}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":142,"column":2},"generated":{"line":1,"column":3101}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":141,"column":35},"generated":{"line":1,"column":3103}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":143,"column":2},"generated":{"line":1,"column":3118}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":148,"column":2},"generated":{"line":1,"column":3122}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectionMatrices","original":{"line":148,"column":8},"generated":{"line":1,"column":3128}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":148,"column":40},"generated":{"line":1,"column":3130}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelUnprojectionMatrix","original":{"line":149,"column":8},"generated":{"line":1,"column":3133}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":149,"column":34},"generated":{"line":1,"column":3135}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelUnprojectionMatrix","original":{"line":149,"column":43},"generated":{"line":1,"column":3137}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"farZ","original":{"line":150,"column":8},"generated":{"line":1,"column":3161}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":150,"column":15},"generated":{"line":1,"column":3163}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"isGeospatial","original":{"line":150,"column":24},"generated":{"line":1,"column":3165}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"undefined","original":{"line":150,"column":39},"generated":{"line":1,"column":3183}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":150,"column":51},"generated":{"line":1,"column":3185}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"corners","original":{"line":151,"column":8},"generated":{"line":1,"column":3187}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":151,"column":18},"generated":{"line":1,"column":3189}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":152,"column":4},"generated":{"line":1,"column":3190}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":152,"column":5},"generated":{"line":1,"column":3191}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":152,"column":8},"generated":{"line":1,"column":3193}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"farZ","original":{"line":152,"column":11},"generated":{"line":1,"column":3195}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":153,"column":4},"generated":{"line":1,"column":3198}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":153,"column":5},"generated":{"line":1,"column":3199}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"width","original":{"line":153,"column":14},"generated":{"line":1,"column":3201}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":153,"column":21},"generated":{"line":1,"column":3207}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"farZ","original":{"line":153,"column":24},"generated":{"line":1,"column":3209}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":154,"column":4},"generated":{"line":1,"column":3212}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":154,"column":5},"generated":{"line":1,"column":3213}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":154,"column":8},"generated":{"line":1,"column":3215}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"height","original":{"line":154,"column":17},"generated":{"line":1,"column":3217}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"farZ","original":{"line":154,"column":25},"generated":{"line":1,"column":3224}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":155,"column":4},"generated":{"line":1,"column":3227}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":155,"column":5},"generated":{"line":1,"column":3228}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"width","original":{"line":155,"column":14},"generated":{"line":1,"column":3230}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":155,"column":21},"generated":{"line":1,"column":3236}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"height","original":{"line":155,"column":30},"generated":{"line":1,"column":3238}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"farZ","original":{"line":155,"column":38},"generated":{"line":1,"column":3245}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":156,"column":4},"generated":{"line":1,"column":3248}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":156,"column":5},"generated":{"line":1,"column":3249}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":3251}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":156,"column":12},"generated":{"line":1,"column":3254}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":157,"column":4},"generated":{"line":1,"column":3257}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":157,"column":5},"generated":{"line":1,"column":3258}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"width","original":{"line":157,"column":14},"generated":{"line":1,"column":3260}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":157,"column":21},"generated":{"line":1,"column":3266}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":157,"column":25},"generated":{"line":1,"column":3269}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":158,"column":4},"generated":{"line":1,"column":3272}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":158,"column":5},"generated":{"line":1,"column":3273}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":158,"column":8},"generated":{"line":1,"column":3275}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"height","original":{"line":158,"column":17},"generated":{"line":1,"column":3277}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":158,"column":26},"generated":{"line":1,"column":3285}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":159,"column":4},"generated":{"line":1,"column":3288}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":159,"column":5},"generated":{"line":1,"column":3289}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"width","original":{"line":159,"column":14},"generated":{"line":1,"column":3291}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":159,"column":21},"generated":{"line":1,"column":3297}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"height","original":{"line":159,"column":30},"generated":{"line":1,"column":3299}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":159,"column":39},"generated":{"line":1,"column":3307}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":160,"column":4},"generated":{"line":1,"column":3311}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixel","original":{"line":160,"column":8},"generated":{"line":1,"column":3315}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"screenToCommonSpace","original":{"line":162,"column":4},"generated":{"line":1,"column":3318}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixel","original":{"line":162,"column":24},"generated":{"line":1,"column":3320}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"pixelUnprojectionMatrix","original":{"line":162,"column":31},"generated":{"line":1,"column":3322}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":165,"column":2},"generated":{"line":1,"column":3326}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":165,"column":7},"generated":{"line":1,"column":3330}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrix","original":{"line":165,"column":13},"generated":{"line":1,"column":3336}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":165,"column":29},"generated":{"line":1,"column":3341}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":165,"column":45},"generated":{"line":1,"column":3343}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":166,"column":4},"generated":{"line":1,"column":3344}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewMatrix","original":{"line":166,"column":10},"generated":{"line":1,"column":3350}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrix","original":{"line":166,"column":23},"generated":{"line":1,"column":3352}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"clone","original":{"line":166,"column":36},"generated":{"line":1,"column":3354}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"translate","original":{"line":166,"column":44},"generated":{"line":1,"column":3362}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":166,"column":54},"generated":{"line":1,"column":3372}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Vector3","original":{"line":166,"column":58},"generated":{"line":1,"column":3376}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":166,"column":54},"generated":{"line":1,"column":3378}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":166,"column":66},"generated":{"line":1,"column":3386}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":166,"column":75},"generated":{"line":1,"column":3388}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"negate","original":{"line":166,"column":83},"generated":{"line":1,"column":3396}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":167,"column":10},"generated":{"line":1,"column":3406}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"corners","original":{"line":167,"column":22},"generated":{"line":1,"column":3408}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":167,"column":30},"generated":{"line":1,"column":3410}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"corner","original":{"line":167,"column":34},"generated":{"line":1,"column":3414}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewMatrix","original":{"line":167,"column":44},"generated":{"line":1,"column":3417}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"transform","original":{"line":167,"column":55},"generated":{"line":1,"column":3419}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"corner","original":{"line":167,"column":65},"generated":{"line":1,"column":3429}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectionMatrix","original":{"line":168,"column":10},"generated":{"line":1,"column":3433}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":168,"column":29},"generated":{"line":1,"column":3436}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Matrix4","original":{"line":168,"column":33},"generated":{"line":1,"column":3440}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":168,"column":29},"generated":{"line":1,"column":3442}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"ortho","original":{"line":168,"column":43},"generated":{"line":1,"column":3451}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":168,"column":49},"generated":{"line":1,"column":3457}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"left","original":{"line":169,"column":6},"generated":{"line":1,"column":3458}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Math","original":{"line":169,"column":12},"generated":{"line":1,"column":3463}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"min","original":{"line":169,"column":17},"generated":{"line":1,"column":3468}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":169,"column":24},"generated":{"line":1,"column":3475}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":169,"column":34},"generated":{"line":1,"column":3477}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":169,"column":38},"generated":{"line":1,"column":3481}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":169,"column":50},"generated":{"line":1,"column":3484}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":169,"column":59},"generated":{"line":1,"column":3486}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"right","original":{"line":170,"column":6},"generated":{"line":1,"column":3491}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Math","original":{"line":170,"column":13},"generated":{"line":1,"column":3497}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"max","original":{"line":170,"column":18},"generated":{"line":1,"column":3502}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":170,"column":25},"generated":{"line":1,"column":3509}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":170,"column":35},"generated":{"line":1,"column":3511}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":170,"column":39},"generated":{"line":1,"column":3515}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":170,"column":51},"generated":{"line":1,"column":3518}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":170,"column":60},"generated":{"line":1,"column":3520}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"bottom","original":{"line":171,"column":6},"generated":{"line":1,"column":3525}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Math","original":{"line":171,"column":14},"generated":{"line":1,"column":3532}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"min","original":{"line":171,"column":19},"generated":{"line":1,"column":3537}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":171,"column":26},"generated":{"line":1,"column":3544}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":171,"column":36},"generated":{"line":1,"column":3546}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":171,"column":40},"generated":{"line":1,"column":3550}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":171,"column":52},"generated":{"line":1,"column":3553}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":171,"column":61},"generated":{"line":1,"column":3555}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"top","original":{"line":172,"column":6},"generated":{"line":1,"column":3560}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Math","original":{"line":172,"column":11},"generated":{"line":1,"column":3564}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"max","original":{"line":172,"column":16},"generated":{"line":1,"column":3569}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":172,"column":23},"generated":{"line":1,"column":3576}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":172,"column":33},"generated":{"line":1,"column":3578}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":172,"column":37},"generated":{"line":1,"column":3582}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":172,"column":49},"generated":{"line":1,"column":3585}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":172,"column":58},"generated":{"line":1,"column":3587}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"near","original":{"line":173,"column":6},"generated":{"line":1,"column":3592}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Math","original":{"line":173,"column":12},"generated":{"line":1,"column":3597}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"min","original":{"line":173,"column":17},"generated":{"line":1,"column":3602}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":173,"column":24},"generated":{"line":1,"column":3609}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":173,"column":34},"generated":{"line":1,"column":3611}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":173,"column":38},"generated":{"line":1,"column":3615}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":173,"column":51},"generated":{"line":1,"column":3619}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":173,"column":60},"generated":{"line":1,"column":3621}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"far","original":{"line":174,"column":6},"generated":{"line":1,"column":3626}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Math","original":{"line":174,"column":11},"generated":{"line":1,"column":3630}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"max","original":{"line":174,"column":16},"generated":{"line":1,"column":3635}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"positions","original":{"line":174,"column":23},"generated":{"line":1,"column":3642}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"map","original":{"line":174,"column":33},"generated":{"line":1,"column":3644}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":174,"column":37},"generated":{"line":1,"column":3648}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"position","original":{"line":174,"column":50},"generated":{"line":1,"column":3652}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":174,"column":59},"generated":{"line":1,"column":3654}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectionMatrices","original":{"line":176,"column":4},"generated":{"line":1,"column":3661}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"push","original":{"line":176,"column":23},"generated":{"line":1,"column":3663}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectionMatrix","original":{"line":176,"column":28},"generated":{"line":1,"column":3668}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"multiplyRight","original":{"line":176,"column":45},"generated":{"line":1,"column":3670}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrix","original":{"line":176,"column":59},"generated":{"line":1,"column":3684}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":178,"column":2},"generated":{"line":1,"column":3688}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectionMatrices","original":{"line":178,"column":9},"generated":{"line":1,"column":3695}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":184,"column":0},"generated":{"line":1,"column":3697}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"createShadowUniforms","original":{"line":184,"column":9},"generated":{"line":1,"column":3706}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":185,"column":2},"generated":{"line":1,"column":3708}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"context","original":{"line":186,"column":2},"generated":{"line":1,"column":3710}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":188,"column":2},"generated":{"line":1,"column":3713}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":188,"column":8},"generated":{"line":1,"column":3719}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowEnabled","original":{"line":188,"column":9},"generated":{"line":1,"column":3733}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":188,"column":25},"generated":{"line":1,"column":3736}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":188,"column":33},"generated":{"line":1,"column":3739}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":189,"column":2},"generated":{"line":1,"column":3741}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowEnabled","original":{"line":189,"column":7},"generated":{"line":1,"column":3745}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":189,"column":25},"generated":{"line":1,"column":3749}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":189,"column":30},"generated":{"line":1,"column":3751}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":189,"column":49},"generated":{"line":1,"column":3768}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":189,"column":54},"generated":{"line":1,"column":3770}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":189,"column":69},"generated":{"line":1,"column":3785}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":190,"column":4},"generated":{"line":1,"column":3792}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":190,"column":11},"generated":{"line":1,"column":3798}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uDrawShadowMap","original":{"line":191,"column":6},"generated":{"line":1,"column":3799}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":191,"column":29},"generated":{"line":1,"column":3822}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uUseShadowMap","original":{"line":192,"column":6},"generated":{"line":1,"column":3824}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":192,"column":28},"generated":{"line":1,"column":3846}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":195,"column":2},"generated":{"line":1,"column":3849}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"uniforms","original":{"line":195,"column":8},"generated":{"line":1,"column":3855}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":195,"column":19},"generated":{"line":1,"column":3857}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uDrawShadowMap","original":{"line":196,"column":4},"generated":{"line":1,"column":3858}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Boolean","original":{"line":196,"column":27},"generated":{"line":1,"column":3880}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":196,"column":35},"generated":{"line":1,"column":3888}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"drawToShadowMap","original":{"line":196,"column":40},"generated":{"line":1,"column":3890}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uUseShadowMap","original":{"line":197,"column":4},"generated":{"line":1,"column":3907}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":197,"column":26},"generated":{"line":1,"column":3930}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":197,"column":31},"generated":{"line":1,"column":3932}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":197,"column":44},"generated":{"line":1,"column":3944}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":197,"column":49},"generated":{"line":1,"column":3946}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":197,"column":60},"generated":{"line":1,"column":3957}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":197,"column":69},"generated":{"line":1,"column":3964}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uColor","original":{"line":198,"column":4},"generated":{"line":1,"column":3966}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":198,"column":19},"generated":{"line":1,"column":3980}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowColor","original":{"line":198,"column":24},"generated":{"line":1,"column":3982}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"DEFAULT_SHADOW_COLOR","original":{"line":198,"column":39},"generated":{"line":1,"column":3995}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uLightId","original":{"line":199,"column":4},"generated":{"line":1,"column":3997}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":199,"column":21},"generated":{"line":1,"column":4013}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowLightId","original":{"line":199,"column":26},"generated":{"line":1,"column":4015}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":199,"column":43},"generated":{"line":1,"column":4030}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadow_uLightCount","original":{"line":200,"column":4},"generated":{"line":1,"column":4032}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":200,"column":24},"generated":{"line":1,"column":4051}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":200,"column":29},"generated":{"line":1,"column":4053}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":200,"column":44},"generated":{"line":1,"column":4068}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":203,"column":8},"generated":{"line":1,"column":4076}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getMemoizedViewportCenterPosition","original":{"line":203,"column":17},"generated":{"line":1,"column":4078}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":203,"column":51},"generated":{"line":1,"column":4080}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":204,"column":4},"generated":{"line":1,"column":4081}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":204,"column":14},"generated":{"line":1,"column":4090}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":204,"column":19},"generated":{"line":1,"column":4092}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":205,"column":4},"generated":{"line":1,"column":4101}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"context","original":{"line":205,"column":12},"generated":{"line":1,"column":4108}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"project_uCenter","original":{"line":205,"column":20},"generated":{"line":1,"column":4110}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectCenters","original":{"line":208,"column":8},"generated":{"line":1,"column":4128}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":208,"column":41},"generated":{"line":1,"column":4130}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrices","original":{"line":209,"column":8},"generated":{"line":1,"column":4133}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getMemoizedViewProjectionMatrices","original":{"line":209,"column":33},"generated":{"line":1,"column":4135}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":209,"column":67},"generated":{"line":1,"column":4137}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":210,"column":4},"generated":{"line":1,"column":4138}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":210,"column":20},"generated":{"line":1,"column":4153}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":210,"column":25},"generated":{"line":1,"column":4155}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":211,"column":4},"generated":{"line":1,"column":4170}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":211,"column":14},"generated":{"line":1,"column":4179}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":211,"column":19},"generated":{"line":1,"column":4181}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"slice","original":{"line":212,"column":5},"generated":{"line":1,"column":4192}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":214,"column":2},"generated":{"line":1,"column":4200}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":214,"column":7},"generated":{"line":1,"column":4204}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":214,"column":11},"generated":{"line":1,"column":4208}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":214,"column":15},"generated":{"line":1,"column":4210}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":214,"column":18},"generated":{"line":1,"column":4212}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":214,"column":22},"generated":{"line":1,"column":4214}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMatrices","original":{"line":214,"column":27},"generated":{"line":1,"column":4216}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":214,"column":42},"generated":{"line":1,"column":4231}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":214,"column":50},"generated":{"line":1,"column":4238}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":214,"column":55},"generated":{"line":1,"column":4242}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":215,"column":4},"generated":{"line":1,"column":4243}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrix","original":{"line":215,"column":10},"generated":{"line":1,"column":4249}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrices","original":{"line":215,"column":33},"generated":{"line":1,"column":4251}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":215,"column":56},"generated":{"line":1,"column":4253}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrixCentered","original":{"line":216,"column":10},"generated":{"line":1,"column":4256}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrix","original":{"line":216,"column":41},"generated":{"line":1,"column":4258}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"clone","original":{"line":217,"column":7},"generated":{"line":1,"column":4260}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"translate","original":{"line":218,"column":7},"generated":{"line":1,"column":4268}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":218,"column":17},"generated":{"line":1,"column":4278}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"Vector3","original":{"line":218,"column":21},"generated":{"line":1,"column":4282}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":218,"column":17},"generated":{"line":1,"column":4284}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":218,"column":29},"generated":{"line":1,"column":4292}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewport","original":{"line":218,"column":34},"generated":{"line":1,"column":4294}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":218,"column":43},"generated":{"line":1,"column":4303}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"negate","original":{"line":218,"column":51},"generated":{"line":1,"column":4311}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"context","original":{"line":221,"column":6},"generated":{"line":1,"column":4321}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"project_uCoordinateSystem","original":{"line":221,"column":14},"generated":{"line":1,"column":4323}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"COORDINATE_SYSTEM","original":{"line":221,"column":44},"generated":{"line":1,"column":4351}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":221,"column":61},"generated":{"line":1,"column":4353}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"LNGLAT","original":{"line":221,"column":62},"generated":{"line":1,"column":4371}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"context","original":{"line":222,"column":6},"generated":{"line":1,"column":4379}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"project_uProjectionMode","original":{"line":222,"column":14},"generated":{"line":1,"column":4381}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"PROJECTION_MODE","original":{"line":222,"column":42},"generated":{"line":1,"column":4407}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":222,"column":57},"generated":{"line":1,"column":4409}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"WEB_MERCATOR","original":{"line":222,"column":58},"generated":{"line":1,"column":4425}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrices","original":{"line":224,"column":6},"generated":{"line":1,"column":4439}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":224,"column":29},"generated":{"line":1,"column":4441}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrixCentered","original":{"line":224,"column":34},"generated":{"line":1,"column":4444}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectCenters","original":{"line":225,"column":6},"generated":{"line":1,"column":4446}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":225,"column":21},"generated":{"line":1,"column":4448}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":225,"column":26},"generated":{"line":1,"column":4451}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrices","original":{"line":227,"column":6},"generated":{"line":1,"column":4455}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":227,"column":29},"generated":{"line":1,"column":4457}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrix","original":{"line":227,"column":34},"generated":{"line":1,"column":4460}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"clone","original":{"line":228,"column":9},"generated":{"line":1,"column":4462}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"multiplyRight","original":{"line":229,"column":9},"generated":{"line":1,"column":4470}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"VECTOR_TO_POINT_MATRIX","original":{"line":229,"column":23},"generated":{"line":1,"column":4484}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectCenters","original":{"line":230,"column":6},"generated":{"line":1,"column":4487}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":230,"column":21},"generated":{"line":1,"column":4489}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrixCentered","original":{"line":230,"column":26},"generated":{"line":1,"column":4492}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"transform","original":{"line":230,"column":55},"generated":{"line":1,"column":4494}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"center","original":{"line":230,"column":65},"generated":{"line":1,"column":4504}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":234,"column":2},"generated":{"line":1,"column":4508}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":234,"column":7},"generated":{"line":1,"column":4512}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":234,"column":11},"generated":{"line":1,"column":4516}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":234,"column":15},"generated":{"line":1,"column":4518}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":234,"column":18},"generated":{"line":1,"column":4520}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrices","original":{"line":234,"column":22},"generated":{"line":1,"column":4522}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":234,"column":45},"generated":{"line":1,"column":4524}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":234,"column":53},"generated":{"line":1,"column":4531}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"uniforms","original":{"line":235,"column":4},"generated":{"line":1,"column":4535}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":235,"column":12},"generated":{"line":1,"column":4537}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":235,"column":12},"generated":{"line":1,"column":4571}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":235,"column":47},"generated":{"line":1,"column":4578}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":235,"column":12},"generated":{"line":1,"column":4580}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"viewProjectionMatrices","original":{"line":235,"column":55},"generated":{"line":1,"column":4586}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":235,"column":78},"generated":{"line":1,"column":4588}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"uniforms","original":{"line":236,"column":4},"generated":{"line":1,"column":4591}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":236,"column":12},"generated":{"line":1,"column":4593}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":236,"column":12},"generated":{"line":1,"column":4619}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":236,"column":39},"generated":{"line":1,"column":4626}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":236,"column":12},"generated":{"line":1,"column":4628}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"projectCenters","original":{"line":236,"column":47},"generated":{"line":1,"column":4634}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":236,"column":62},"generated":{"line":1,"column":4636}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":238,"column":8},"generated":{"line":1,"column":4639}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":238,"column":13},"generated":{"line":1,"column":4641}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":238,"column":27},"generated":{"line":1,"column":4653}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":238,"column":32},"generated":{"line":1,"column":4655}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":238,"column":43},"generated":{"line":1,"column":4666}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":238,"column":52},"generated":{"line":1,"column":4673}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"uniforms","original":{"line":239,"column":6},"generated":{"line":1,"column":4675}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":239,"column":14},"generated":{"line":1,"column":4677}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":239,"column":14},"generated":{"line":1,"column":4697}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":239,"column":35},"generated":{"line":1,"column":4704}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":239,"column":42},"generated":{"line":1,"column":4708}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":239,"column":47},"generated":{"line":1,"column":4710}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":239,"column":58},"generated":{"line":1,"column":4721}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"uniforms","original":{"line":241,"column":6},"generated":{"line":1,"column":4724}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":241,"column":14},"generated":{"line":1,"column":4726}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":241,"column":14},"generated":{"line":1,"column":4746}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"i","original":{"line":241,"column":35},"generated":{"line":1,"column":4753}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":241,"column":42},"generated":{"line":1,"column":4757}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"dummyShadowMap","original":{"line":241,"column":47},"generated":{"line":1,"column":4759}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":244,"column":2},"generated":{"line":1,"column":4774}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"uniforms","original":{"line":244,"column":9},"generated":{"line":1,"column":4781}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":245,"column":1},"generated":{"line":1,"column":4783}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":245,"column":1},"generated":{"line":1,"column":4787}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":15},"generated":{"line":1,"column":4789}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"name","original":{"line":248,"column":2},"generated":{"line":1,"column":4790}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":248,"column":8},"generated":{"line":1,"column":4795}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"dependencies","original":{"line":249,"column":2},"generated":{"line":1,"column":4804}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":249,"column":16},"generated":{"line":1,"column":4817}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"project","original":{"line":249,"column":17},"generated":{"line":1,"column":4818}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":249,"column":16},"generated":{"line":1,"column":4820}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"vs","original":{"line":250,"column":2},"generated":{"line":1,"column":4829}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"vs","original":{"line":250,"column":2},"generated":{"line":1,"column":4832}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"fs","original":{"line":251,"column":2},"generated":{"line":1,"column":4834}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"fs","original":{"line":251,"column":2},"generated":{"line":1,"column":4837}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"inject","original":{"line":252,"column":2},"generated":{"line":1,"column":4839}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":252,"column":10},"generated":{"line":1,"column":4846}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":253,"column":4},"generated":{"line":1,"column":4847}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":253,"column":4},"generated":{"line":1,"column":4878}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":256,"column":4},"generated":{"line":1,"column":4948}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":256,"column":4},"generated":{"line":1,"column":4973}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"getUniforms","original":{"line":260,"column":2},"generated":{"line":1,"column":5029}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":260,"column":15},"generated":{"line":1,"column":5041}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":260,"column":16},"generated":{"line":1,"column":5042}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":260,"column":23},"generated":{"line":1,"column":5044}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"context","original":{"line":260,"column":27},"generated":{"line":1,"column":5047}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":260,"column":37},"generated":{"line":1,"column":5049}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":262,"column":6},"generated":{"line":1,"column":5054}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":262,"column":20},"generated":{"line":1,"column":5067}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":263,"column":7},"generated":{"line":1,"column":5071}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"drawToShadowMap","original":{"line":263,"column":12},"generated":{"line":1,"column":5073}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":263,"column":32},"generated":{"line":1,"column":5090}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":263,"column":37},"generated":{"line":1,"column":5092}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":263,"column":51},"generated":{"line":1,"column":5104}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"shadowMaps","original":{"line":263,"column":56},"generated":{"line":1,"column":5106}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"length","original":{"line":263,"column":67},"generated":{"line":1,"column":5117}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":263,"column":76},"generated":{"line":1,"column":5124}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"createShadowUniforms","original":{"line":266,"column":13},"generated":{"line":1,"column":5127}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"opts","original":{"line":266,"column":34},"generated":{"line":1,"column":5129}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":"context","original":{"line":266,"column":40},"generated":{"line":1,"column":5131}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":268,"column":11},"generated":{"line":1,"column":5134}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":5138}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":5146}},{"source":"../../../../src/shaderlib/shadow/shadow.ts","name":null,"original":{"line":247,"column":0},"generated":{"line":1,"column":5154}}],"sources":{"../../../../src/shaderlib/shadow/shadow.ts":"// Copyright (c) 2015-2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport {COORDINATE_SYSTEM, PROJECTION_MODE} from '../../lib/constants';\nimport project from '../project/project';\nimport {Vector3, Matrix4} from '@math.gl/core';\nimport memoize from '../../utils/memoize';\nimport {pixelsToWorld} from '@math.gl/web-mercator';\n\nimport type {Texture2D} from '@luma.gl/webgl';\nimport type {ShaderModule, NumericArray} from '../../types/types';\nimport type Viewport from '../../viewports/viewport';\nimport type {ProjectUniforms} from '../project/viewport-uniforms';\n\nconst vs = `\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n`;\n\nconst fs = `\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n`;\n\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\n\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\ntype ShadowModuleSettings = {\n  viewport: Viewport;\n  shadowEnabled?: boolean;\n  drawToShadowMap?: boolean;\n  shadowMaps?: Texture2D[];\n  dummyShadowMap?: Texture2D;\n  shadowColor?: number[];\n  shadowMatrices?: Matrix4[];\n  shadowLightId?: number;\n};\n\nfunction screenToCommonSpace(xyz: number[], pixelUnprojectionMatrix: number[]): number[] {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}: {\n  viewport: Viewport;\n  center: NumericArray;\n}): NumericArray {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}: {\n  viewport: Viewport;\n  shadowMatrices: Matrix4[];\n}): Matrix4[] {\n  const projectionMatrices: Matrix4[] = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [\n    [0, 0, farZ], // top left ground\n    [viewport.width, 0, farZ], // top right ground\n    [0, viewport.height, farZ], // bottom left ground\n    [viewport.width, viewport.height, farZ], // bottom right ground\n    [0, 0, -1], // top left near\n    [viewport.width, 0, -1], // top right near\n    [0, viewport.height, -1], // bottom left near\n    [viewport.width, viewport.height, -1] // bottom right near\n  ].map(pixel =>\n    // @ts-expect-error z may be undefined\n    screenToCommonSpace(pixel, pixelUnprojectionMatrix)\n  );\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n  return projectionMatrices;\n}\n\n/* eslint-disable camelcase */\n\n// eslint-disable-next-line complexity\nfunction createShadowUniforms(\n  opts: ShadowModuleSettings,\n  context: ProjectUniforms\n): Record<string, any> {\n  const {shadowEnabled = true} = opts;\n  if (!shadowEnabled || !opts.shadowMatrices || !opts.shadowMatrices.length) {\n    return {\n      shadow_uDrawShadowMap: false,\n      shadow_uUseShadowMap: false\n    };\n  }\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n\n  const projectCenters: NumericArray[] = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix\n      .clone()\n      .translate(new Vector3(opts.viewport.center).negate());\n\n    if (\n      context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT &&\n      context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR\n    ) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix\n        .clone()\n        .multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[`shadow_uViewProjectionMatrices[${i}]`] = viewProjectionMatrices[i];\n    uniforms[`shadow_uProjectCenters[${i}]`] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[`shadow_uShadowMap${i}`] = opts.shadowMaps[i];\n    } else {\n      uniforms[`shadow_uShadowMap${i}`] = opts.dummyShadowMap;\n    }\n  }\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': `\n    position = shadow_setVertexPosition(geometry.position);\n    `,\n    'fs:DECKGL_FILTER_COLOR': `\n    color = shadow_filterShadowColor(color);\n    `\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if (\n      'viewport' in opts &&\n      (opts.drawToShadowMap || (opts.shadowMaps && opts.shadowMaps.length > 0))\n    ) {\n      // @ts-expect-error if opts.viewport is defined, context should contain the project module's uniforms\n      return createShadowUniforms(opts, context);\n    }\n    return {};\n  }\n} as ShaderModule<ShadowModuleSettings>;\n"},"lineCount":null}},"error":null,"hash":"41f979084feb0a2710d54f1704d9551c","cacheData":{"env":{}}}