{"id":"CVBQ","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/dist/esm/modules/image-fun-filters/colorhalftone.js.map","includedInParent":true,"mtime":1688284132458},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/package.json","includedInParent":true,"mtime":1688284132458}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.colorHalftone=void 0;const e=\"uniform vec2 center;\\nuniform float angle;\\nuniform float size;\\n\\nfloat scale = 3.1514 / size;\\n\\nfloat pattern(float angle, vec2 texSize, vec2 texCoord) {\\n  float s = sin(angle), c = cos(angle);\\n  vec2 tex = texCoord * texSize - center * texSize;\\n  vec2 point = vec2(\\n\\tc * tex.x - s * tex.y,\\n\\ts * tex.x + c * tex.y\\n  ) * scale;\\n  return (sin(point.x) * sin(point.y)) * 4.0;\\n}\\n\\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\\n  vec3 cmy = 1.0 - color.rgb;\\n  float k = min(cmy.x, min(cmy.y, cmy.z));\\n  cmy = (cmy - k) / (1.0 - k);\\n  cmy = clamp(\\n\\tcmy * 10.0 - 3.0 + vec3(\\n    pattern(angle + 0.26179, texSize, texCoord),\\n\\t  pattern(angle + 1.30899, texSize, texCoord),\\n    pattern(angle, texSize, texCoord)\\n  ),\\n\\t0.0,\\n\\t1.0\\n  );\\n  k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539, texSize, texCoord), 0.0, 1.0);\\n  return vec4(1.0 - cmy - k, color.a);\\n}\\n\",n={center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:4,min:1,softMin:3,softMax:20}},t={name:\"colorHalftone\",uniforms:n,fs:e,passes:[{filter:!0}]};exports.colorHalftone=t;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":0}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":13}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":20}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":35}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":43}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":56}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":57}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":64}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":68}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":76}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":95}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":97}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"fs","original":{"line":4,"column":6},"generated":{"line":1,"column":103}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":4,"column":8},"generated":{"line":1,"column":105}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"uniforms","original":{"line":39,"column":6},"generated":{"line":1,"column":1020}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":39,"column":17},"generated":{"line":1,"column":1022}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"center","original":{"line":40,"column":2},"generated":{"line":1,"column":1023}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":1030}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":40,"column":11},"generated":{"line":1,"column":1031}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":1034}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"angle","original":{"line":41,"column":2},"generated":{"line":1,"column":1038}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":41,"column":9},"generated":{"line":1,"column":1044}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"value","original":{"line":41,"column":10},"generated":{"line":1,"column":1045}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":41,"column":17},"generated":{"line":1,"column":1051}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"softMin","original":{"line":41,"column":22},"generated":{"line":1,"column":1055}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":41,"column":31},"generated":{"line":1,"column":1063}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"softMax","original":{"line":41,"column":34},"generated":{"line":1,"column":1065}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"Math","original":{"line":41,"column":43},"generated":{"line":1,"column":1073}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"PI","original":{"line":41,"column":48},"generated":{"line":1,"column":1078}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":41,"column":53},"generated":{"line":1,"column":1081}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"size","original":{"line":42,"column":2},"generated":{"line":1,"column":1084}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":1089}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"value","original":{"line":42,"column":9},"generated":{"line":1,"column":1090}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":42,"column":16},"generated":{"line":1,"column":1096}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"min","original":{"line":42,"column":19},"generated":{"line":1,"column":1098}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":42,"column":24},"generated":{"line":1,"column":1102}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"softMin","original":{"line":42,"column":27},"generated":{"line":1,"column":1104}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":42,"column":36},"generated":{"line":1,"column":1112}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"softMax","original":{"line":42,"column":39},"generated":{"line":1,"column":1114}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":42,"column":48},"generated":{"line":1,"column":1122}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"colorHalftone","original":{"line":46,"column":13},"generated":{"line":1,"column":1127}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":29},"generated":{"line":1,"column":1129}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"name","original":{"line":47,"column":2},"generated":{"line":1,"column":1130}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":1135}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"uniforms","original":{"line":48,"column":2},"generated":{"line":1,"column":1151}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"uniforms","original":{"line":48,"column":2},"generated":{"line":1,"column":1160}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"fs","original":{"line":49,"column":2},"generated":{"line":1,"column":1162}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"fs","original":{"line":49,"column":2},"generated":{"line":1,"column":1165}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"passes","original":{"line":50,"column":2},"generated":{"line":1,"column":1167}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":1174}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":1175}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":"filter","original":{"line":50,"column":12},"generated":{"line":1,"column":1176}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":50,"column":20},"generated":{"line":1,"column":1184}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":1189}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":1197}},{"source":"../../../../src/modules/image-fun-filters/colorhalftone.js","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":1211}}],"sources":{"../../../../src/modules/image-fun-filters/colorhalftone.js":"/** @typedef {import('../../types').ShaderPass} ShaderPass */\n\n// TODO pass texCoord to angle\nconst fs = `\\\nuniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat scale = 3.1514 / size;\n\nfloat pattern(float angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n\tc * tex.x - s * tex.y,\n\ts * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n\tcmy * 10.0 - 3.0 + vec3(\n    pattern(angle + 0.26179, texSize, texCoord),\n\t  pattern(angle + 1.30899, texSize, texCoord),\n    pattern(angle, texSize, texCoord)\n  ),\n\t0.0,\n\t1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n`;\n\nconst uniforms = {\n  center: [0.5, 0.5],\n  angle: {value: 1.1, softMin: 0, softMax: Math.PI / 2},\n  size: {value: 4, min: 1, softMin: 3, softMax: 20}\n};\n\n/** @type {ShaderPass} */\nexport const colorHalftone = {\n  name: 'colorHalftone',\n  uniforms,\n  fs,\n  passes: [{filter: true}]\n};\n"},"lineCount":null}},"error":null,"hash":"a8bd60ff8fc70bc894ba4fc395216384","cacheData":{"env":{}}}