{"id":"zjhX","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/dist/esm/modules/project/project.js.map","includedInParent":true,"mtime":1688284132458},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/package.json","includedInParent":true,"mtime":1688284132458},{"name":"@math.gl/core","loc":{"line":1,"column":24,"index":24},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/dist/esm/modules/project/project.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/core/dist/esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.project=void 0;var o=require(\"@math.gl/core\");const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]};function r(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={};return void 0!==i.modelMatrix&&(r.modelMatrix=i.modelMatrix),void 0!==i.viewMatrix&&(r.viewMatrix=i.viewMatrix),void 0!==i.projectionMatrix&&(r.projectionMatrix=i.projectionMatrix),void 0!==i.cameraPositionWorld&&(r.cameraPositionWorld=i.cameraPositionWorld),void 0===i.projectionMatrix&&void 0===i.viewMatrix||(r.viewProjectionMatrix=new o.Matrix4(i.projectionMatrix).multiplyRight(i.viewMatrix)),r}const t=\"varying vec4 project_vPositionWorld;\\nvarying vec3 project_vNormalWorld;\\n\\nvec4 project_getPosition_World() {\\n  return project_vPositionWorld;\\n}\\n\\nvec3 project_getNormal_World() {\\n  return project_vNormalWorld;\\n}\\n\",e=\"\".concat(t,\"\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewProjectionMatrix;\\nuniform vec3 cameraPositionWorld;\\n\\nstruct World {\\n  vec3 position;\\n  vec3 normal;\\n};\\n\\nWorld world;\\n\\nvoid project_setPosition(vec4 position) {\\n  project_vPositionWorld = position;\\n}\\n\\nvoid project_setNormal(vec3 normal) {\\n  project_vNormalWorld = normal;\\n}\\n\\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\\n  world.position = position;\\n  world.normal = normal;\\n}\\n\\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\\n  world.normal = mat3(modelMatrix) * normal;\\n}\\n\\nvec4 project_model_to_clipspace(vec4 position) {\\n  return viewProjectionMatrix * modelMatrix * position;\\n}\\n\\nvec4 project_model_to_clipspace(vec3 position) {\\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\\n}\\n\\nvec4 project_world_to_clipspace(vec3 position) {\\n  return viewProjectionMatrix * vec4(position, 1.);\\n}\\n\\nvec4 project_view_to_clipspace(vec3 position) {\\n  return projectionMatrix * vec4(position, 1.);\\n}\\n\\nvec4 project_to_clipspace(vec3 position) {\\n  return viewProjectionMatrix * vec4(position, 1.);\\n}\\n\"),c=\"\\n\".concat(t),a={name:\"project\",getUniforms:r,vs:e,fs:c};exports.project=a;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":0}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":13}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":20}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":35}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":43}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":56}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":57}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":64}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":68}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":76}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":89}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":91}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":97}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":105}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":122}},{"source":"../../../../src/modules/project/project.js","name":"IDENTITY_MATRIX","original":{"line":5,"column":6},"generated":{"line":1,"column":128}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":24},"generated":{"line":1,"column":130}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":25},"generated":{"line":1,"column":131}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":28},"generated":{"line":1,"column":133}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":31},"generated":{"line":1,"column":135}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":34},"generated":{"line":1,"column":137}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":37},"generated":{"line":1,"column":139}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":40},"generated":{"line":1,"column":141}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":43},"generated":{"line":1,"column":143}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":46},"generated":{"line":1,"column":145}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":49},"generated":{"line":1,"column":147}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":52},"generated":{"line":1,"column":149}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":55},"generated":{"line":1,"column":151}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":58},"generated":{"line":1,"column":153}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":61},"generated":{"line":1,"column":155}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":64},"generated":{"line":1,"column":157}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":67},"generated":{"line":1,"column":159}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":5,"column":70},"generated":{"line":1,"column":161}},{"source":"../../../../src/modules/project/project.js","name":"DEFAULT_MODULE_OPTIONS","original":{"line":7,"column":6},"generated":{"line":1,"column":164}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":7,"column":31},"generated":{"line":1,"column":166}},{"source":"../../../../src/modules/project/project.js","name":"modelMatrix","original":{"line":8,"column":2},"generated":{"line":1,"column":167}},{"source":"../../../../src/modules/project/project.js","name":"IDENTITY_MATRIX","original":{"line":8,"column":15},"generated":{"line":1,"column":179}},{"source":"../../../../src/modules/project/project.js","name":"viewMatrix","original":{"line":9,"column":2},"generated":{"line":1,"column":181}},{"source":"../../../../src/modules/project/project.js","name":"IDENTITY_MATRIX","original":{"line":9,"column":14},"generated":{"line":1,"column":192}},{"source":"../../../../src/modules/project/project.js","name":"projectionMatrix","original":{"line":10,"column":2},"generated":{"line":1,"column":194}},{"source":"../../../../src/modules/project/project.js","name":"IDENTITY_MATRIX","original":{"line":10,"column":20},"generated":{"line":1,"column":211}},{"source":"../../../../src/modules/project/project.js","name":"cameraPositionWorld","original":{"line":11,"column":2},"generated":{"line":1,"column":213}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":11,"column":23},"generated":{"line":1,"column":233}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":11,"column":24},"generated":{"line":1,"column":234}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":11,"column":27},"generated":{"line":1,"column":236}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":11,"column":30},"generated":{"line":1,"column":238}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":242}},{"source":"../../../../src/modules/project/project.js","name":"getUniforms","original":{"line":14,"column":9},"generated":{"line":1,"column":251}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":255}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":14,"column":21},"generated":{"line":1,"column":259}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":261}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":271}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":278}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":286}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":290}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":300}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":303}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":313}},{"source":"../../../../src/modules/project/project.js","name":"DEFAULT_MODULE_OPTIONS","original":{"line":14,"column":28},"generated":{"line":1,"column":316}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":318}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":328}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":335}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":343}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":347}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":357}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":361}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":14,"column":71},"generated":{"line":1,"column":371}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":19,"column":2},"generated":{"line":1,"column":374}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":19,"column":8},"generated":{"line":1,"column":380}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":19,"column":19},"generated":{"line":1,"column":382}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":40,"column":2},"generated":{"line":1,"column":385}},{"source":"../../../../src/modules/project/project.js","name":"undefined","original":{"line":20,"column":27},"generated":{"line":1,"column":397}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":20,"column":6},"generated":{"line":1,"column":401}},{"source":"../../../../src/modules/project/project.js","name":"modelMatrix","original":{"line":20,"column":11},"generated":{"line":1,"column":403}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":21,"column":4},"generated":{"line":1,"column":417}},{"source":"../../../../src/modules/project/project.js","name":"modelMatrix","original":{"line":21,"column":13},"generated":{"line":1,"column":419}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":21,"column":27},"generated":{"line":1,"column":431}},{"source":"../../../../src/modules/project/project.js","name":"modelMatrix","original":{"line":21,"column":32},"generated":{"line":1,"column":433}},{"source":"../../../../src/modules/project/project.js","name":"undefined","original":{"line":23,"column":26},"generated":{"line":1,"column":451}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":23,"column":6},"generated":{"line":1,"column":455}},{"source":"../../../../src/modules/project/project.js","name":"viewMatrix","original":{"line":23,"column":11},"generated":{"line":1,"column":457}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":24,"column":4},"generated":{"line":1,"column":470}},{"source":"../../../../src/modules/project/project.js","name":"viewMatrix","original":{"line":24,"column":13},"generated":{"line":1,"column":472}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":24,"column":26},"generated":{"line":1,"column":483}},{"source":"../../../../src/modules/project/project.js","name":"viewMatrix","original":{"line":24,"column":31},"generated":{"line":1,"column":485}},{"source":"../../../../src/modules/project/project.js","name":"undefined","original":{"line":26,"column":32},"generated":{"line":1,"column":502}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":26,"column":6},"generated":{"line":1,"column":506}},{"source":"../../../../src/modules/project/project.js","name":"projectionMatrix","original":{"line":26,"column":11},"generated":{"line":1,"column":508}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":27,"column":4},"generated":{"line":1,"column":527}},{"source":"../../../../src/modules/project/project.js","name":"projectionMatrix","original":{"line":27,"column":13},"generated":{"line":1,"column":529}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":27,"column":32},"generated":{"line":1,"column":546}},{"source":"../../../../src/modules/project/project.js","name":"projectionMatrix","original":{"line":27,"column":37},"generated":{"line":1,"column":548}},{"source":"../../../../src/modules/project/project.js","name":"undefined","original":{"line":29,"column":35},"generated":{"line":1,"column":571}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":29,"column":6},"generated":{"line":1,"column":575}},{"source":"../../../../src/modules/project/project.js","name":"cameraPositionWorld","original":{"line":29,"column":11},"generated":{"line":1,"column":577}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":30,"column":4},"generated":{"line":1,"column":599}},{"source":"../../../../src/modules/project/project.js","name":"cameraPositionWorld","original":{"line":30,"column":13},"generated":{"line":1,"column":601}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":30,"column":35},"generated":{"line":1,"column":621}},{"source":"../../../../src/modules/project/project.js","name":"cameraPositionWorld","original":{"line":30,"column":40},"generated":{"line":1,"column":623}},{"source":"../../../../src/modules/project/project.js","name":"undefined","original":{"line":34,"column":32},"generated":{"line":1,"column":649}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":34,"column":6},"generated":{"line":1,"column":653}},{"source":"../../../../src/modules/project/project.js","name":"projectionMatrix","original":{"line":34,"column":11},"generated":{"line":1,"column":655}},{"source":"../../../../src/modules/project/project.js","name":"undefined","original":{"line":34,"column":65},"generated":{"line":1,"column":678}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":34,"column":45},"generated":{"line":1,"column":682}},{"source":"../../../../src/modules/project/project.js","name":"viewMatrix","original":{"line":34,"column":50},"generated":{"line":1,"column":684}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":35,"column":4},"generated":{"line":1,"column":697}},{"source":"../../../../src/modules/project/project.js","name":"viewProjectionMatrix","original":{"line":35,"column":13},"generated":{"line":1,"column":699}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":35,"column":36},"generated":{"line":1,"column":720}},{"source":"../../../../src/modules/project/project.js","name":"Matrix4","original":{"line":35,"column":40},"generated":{"line":1,"column":724}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":35,"column":36},"generated":{"line":1,"column":726}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":35,"column":48},"generated":{"line":1,"column":734}},{"source":"../../../../src/modules/project/project.js","name":"projectionMatrix","original":{"line":35,"column":53},"generated":{"line":1,"column":736}},{"source":"../../../../src/modules/project/project.js","name":"multiplyRight","original":{"line":35,"column":71},"generated":{"line":1,"column":754}},{"source":"../../../../src/modules/project/project.js","name":"opts","original":{"line":36,"column":6},"generated":{"line":1,"column":768}},{"source":"../../../../src/modules/project/project.js","name":"viewMatrix","original":{"line":36,"column":11},"generated":{"line":1,"column":770}},{"source":"../../../../src/modules/project/project.js","name":"uniforms","original":{"line":40,"column":9},"generated":{"line":1,"column":783}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":785}},{"source":"../../../../src/modules/project/project.js","name":"common","original":{"line":43,"column":6},"generated":{"line":1,"column":791}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":43,"column":12},"generated":{"line":1,"column":793}},{"source":"../../../../src/modules/project/project.js","name":"vs","original":{"line":56,"column":6},"generated":{"line":1,"column":1016}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":1018}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":1021}},{"source":"../../../../src/modules/project/project.js","name":"common","original":{"line":57,"column":2},"generated":{"line":1,"column":1028}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":1030}},{"source":"../../../../src/modules/project/project.js","name":"fs","original":{"line":112,"column":6},"generated":{"line":1,"column":2289}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":112,"column":8},"generated":{"line":1,"column":2291}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":112,"column":8},"generated":{"line":1,"column":2296}},{"source":"../../../../src/modules/project/project.js","name":"common","original":{"line":113,"column":2},"generated":{"line":1,"column":2303}},{"source":"../../../../src/modules/project/project.js","name":"project","original":{"line":117,"column":13},"generated":{"line":1,"column":2306}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":23},"generated":{"line":1,"column":2308}},{"source":"../../../../src/modules/project/project.js","name":"name","original":{"line":118,"column":2},"generated":{"line":1,"column":2309}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":118,"column":8},"generated":{"line":1,"column":2314}},{"source":"../../../../src/modules/project/project.js","name":"getUniforms","original":{"line":119,"column":2},"generated":{"line":1,"column":2324}},{"source":"../../../../src/modules/project/project.js","name":"getUniforms","original":{"line":119,"column":2},"generated":{"line":1,"column":2336}},{"source":"../../../../src/modules/project/project.js","name":"vs","original":{"line":120,"column":2},"generated":{"line":1,"column":2338}},{"source":"../../../../src/modules/project/project.js","name":"vs","original":{"line":120,"column":2},"generated":{"line":1,"column":2341}},{"source":"../../../../src/modules/project/project.js","name":"fs","original":{"line":121,"column":2},"generated":{"line":1,"column":2343}},{"source":"../../../../src/modules/project/project.js","name":"fs","original":{"line":121,"column":2},"generated":{"line":1,"column":2346}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":2349}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":2357}},{"source":"../../../../src/modules/project/project.js","name":null,"original":{"line":117,"column":7},"generated":{"line":1,"column":2365}}],"sources":{"../../../../src/modules/project/project.js":"/** @typedef {import('../../types').ShaderModule} ShaderModule */\n\nimport {Matrix4} from '@math.gl/core';\n\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\nconst DEFAULT_MODULE_OPTIONS = {\n  modelMatrix: IDENTITY_MATRIX,\n  viewMatrix: IDENTITY_MATRIX,\n  projectionMatrix: IDENTITY_MATRIX,\n  cameraPositionWorld: [0, 0, 0]\n};\n\nfunction getUniforms(opts = DEFAULT_MODULE_OPTIONS, prevUniforms = {}) {\n  // const viewProjectionInverse = viewProjection.invert();\n  // viewInverseMatrix: view.invert(),\n  // viewProjectionInverseMatrix: viewProjectionInverse\n\n  const uniforms = {};\n  if (opts.modelMatrix !== undefined) {\n    uniforms.modelMatrix = opts.modelMatrix;\n  }\n  if (opts.viewMatrix !== undefined) {\n    uniforms.viewMatrix = opts.viewMatrix;\n  }\n  if (opts.projectionMatrix !== undefined) {\n    uniforms.projectionMatrix = opts.projectionMatrix;\n  }\n  if (opts.cameraPositionWorld !== undefined) {\n    uniforms.cameraPositionWorld = opts.cameraPositionWorld;\n  }\n\n  // COMPOSITE UNIFORMS\n  if (opts.projectionMatrix !== undefined || opts.viewMatrix !== undefined) {\n    uniforms.viewProjectionMatrix = new Matrix4(opts.projectionMatrix).multiplyRight(\n      opts.viewMatrix\n    );\n  }\n\n  return uniforms;\n}\n\nconst common = `\\\nvarying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n`;\n\nconst vs = `\\\n${common}\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n`;\n\nconst fs = `\n${common}\\\n`;\n\n/** @type {ShaderModule} */\nexport const project = {\n  name: 'project',\n  getUniforms,\n  vs,\n  fs\n};\n"},"lineCount":null}},"error":null,"hash":"832dc1deab8a4b911972793350c50e6b","cacheData":{"env":{}}}