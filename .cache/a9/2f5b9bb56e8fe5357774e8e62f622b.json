{"id":"twQX","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/orbit-viewport.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"@babel/runtime/helpers/esm/defineProperty","loc":{"line":1,"column":28,"index":28},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/orbit-viewport.js","resolved":"/project/deck-gl-examples-01/node_modules/@babel/runtime/helpers/esm/defineProperty.js"},{"name":"../viewports/viewport","loc":{"line":2,"column":21,"index":94},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/orbit-viewport.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/viewport.js"},{"name":"@math.gl/core","loc":{"line":3,"column":24,"index":143},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/orbit-viewport.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/core/dist/esm/index.js"},{"name":"@math.gl/web-mercator","loc":{"line":4,"column":46,"index":206},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/orbit-viewport.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=i(require(\"@babel/runtime/helpers/esm/defineProperty\")),e=i(require(\"../viewports/viewport\")),o=require(\"@math.gl/core\"),r=require(\"@math.gl/web-mercator\");function i(t){return t&&t.__esModule?t:{default:t}}const n=Math.PI/180;function s({height:t,focalDistance:e,orbitAxis:r,rotationX:i,rotationOrbit:s,zoom:a}){const c=\"Z\"===r?[0,0,1]:[0,1,0],h=\"Z\"===r?[0,-e,0]:[0,0,e],u=(new o.Matrix4).lookAt({eye:h,up:c});u.rotateX(i*n),\"Z\"===r?u.rotateZ(s*n):u.rotateY(s*n);const p=Math.pow(2,a)/t;return u.scale(p),u}class a extends e.default{constructor(e){const{height:o,projectionMatrix:i,fovy:n=50,orbitAxis:a=\"Z\",target:c=[0,0,0],rotationX:h=0,rotationOrbit:u=0,zoom:p=0}=e,l=i?i[5]/2:(0,r.fovyToAltitude)(n);super({...e,longitude:void 0,viewMatrix:s({height:o||1,focalDistance:l,orbitAxis:a,rotationX:h,rotationOrbit:u,zoom:p}),fovy:n,focalDistance:l,position:c,zoom:p}),(0,t.default)(this,\"projectedCenter\",void 0),this.projectedCenter=this.project(this.center)}unproject(t,{topLeft:e=!0}={}){const[o,i,n=this.projectedCenter[2]]=t,s=e?i:this.height-i,[a,c,h]=(0,r.pixelsToWorld)([o,s,n],this.pixelUnprojectionMatrix);return[a,c,h]}panByPosition(t,e){const o=this.project(t),r=[this.width/2+o[0]-e[0],this.height/2+o[1]-e[1],this.projectedCenter[2]];return{target:this.unproject(r)}}}exports.default=a;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":0}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":13}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":20}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":35}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":43}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":56}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":57}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":64}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":68}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":76}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":89}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":91}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":95}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":97}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":99}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":107}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":153}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":155}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":157}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":165}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":191}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":193}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":201}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":218}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":220}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":228}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":253}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":262}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":264}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":267}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":274}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":277}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":279}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":290}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":292}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":293}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":301}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":304}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"DEGREES_TO_RADIANS","original":{"line":6,"column":6},"generated":{"line":1,"column":310}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Math","original":{"line":6,"column":27},"generated":{"line":1,"column":312}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"PI","original":{"line":6,"column":32},"generated":{"line":1,"column":317}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":6,"column":37},"generated":{"line":1,"column":320}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":324}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"getViewMatrix","original":{"line":8,"column":9},"generated":{"line":1,"column":333}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":23},"generated":{"line":1,"column":336}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":9,"column":2},"generated":{"line":1,"column":343}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":23},"generated":{"line":1,"column":345}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":10,"column":2},"generated":{"line":1,"column":359}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":23},"generated":{"line":1,"column":361}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":11,"column":2},"generated":{"line":1,"column":371}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":23},"generated":{"line":1,"column":373}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationX","original":{"line":12,"column":2},"generated":{"line":1,"column":383}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":23},"generated":{"line":1,"column":385}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationOrbit","original":{"line":13,"column":2},"generated":{"line":1,"column":399}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":8,"column":23},"generated":{"line":1,"column":401}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":14,"column":2},"generated":{"line":1,"column":406}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":410}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"up","original":{"line":28,"column":8},"generated":{"line":1,"column":416}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":27},"generated":{"line":1,"column":418}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":28,"column":13},"generated":{"line":1,"column":424}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":33},"generated":{"line":1,"column":426}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":34},"generated":{"line":1,"column":427}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":37},"generated":{"line":1,"column":429}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":40},"generated":{"line":1,"column":431}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":45},"generated":{"line":1,"column":434}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":46},"generated":{"line":1,"column":435}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":49},"generated":{"line":1,"column":437}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":28,"column":52},"generated":{"line":1,"column":439}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"eye","original":{"line":29,"column":8},"generated":{"line":1,"column":442}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":28},"generated":{"line":1,"column":444}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":29,"column":14},"generated":{"line":1,"column":450}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":34},"generated":{"line":1,"column":452}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":35},"generated":{"line":1,"column":453}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":29,"column":39},"generated":{"line":1,"column":456}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":54},"generated":{"line":1,"column":458}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":59},"generated":{"line":1,"column":461}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":60},"generated":{"line":1,"column":462}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":29,"column":63},"generated":{"line":1,"column":464}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":29,"column":66},"generated":{"line":1,"column":466}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":31,"column":8},"generated":{"line":1,"column":469}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":31,"column":21},"generated":{"line":1,"column":472}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Matrix4","original":{"line":31,"column":25},"generated":{"line":1,"column":476}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":31,"column":21},"generated":{"line":1,"column":478}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"lookAt","original":{"line":31,"column":35},"generated":{"line":1,"column":487}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":31,"column":42},"generated":{"line":1,"column":494}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"eye","original":{"line":31,"column":43},"generated":{"line":1,"column":495}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"eye","original":{"line":31,"column":43},"generated":{"line":1,"column":499}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"up","original":{"line":31,"column":48},"generated":{"line":1,"column":501}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"up","original":{"line":31,"column":48},"generated":{"line":1,"column":504}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":33,"column":2},"generated":{"line":1,"column":508}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotateX","original":{"line":33,"column":13},"generated":{"line":1,"column":510}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationX","original":{"line":33,"column":21},"generated":{"line":1,"column":518}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"DEGREES_TO_RADIANS","original":{"line":33,"column":33},"generated":{"line":1,"column":520}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":34,"column":20},"generated":{"line":1,"column":523}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":34,"column":6},"generated":{"line":1,"column":529}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":35,"column":4},"generated":{"line":1,"column":531}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotateZ","original":{"line":35,"column":15},"generated":{"line":1,"column":533}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationOrbit","original":{"line":35,"column":23},"generated":{"line":1,"column":541}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"DEGREES_TO_RADIANS","original":{"line":35,"column":39},"generated":{"line":1,"column":543}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":37,"column":4},"generated":{"line":1,"column":546}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotateY","original":{"line":37,"column":15},"generated":{"line":1,"column":548}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationOrbit","original":{"line":37,"column":23},"generated":{"line":1,"column":556}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"DEGREES_TO_RADIANS","original":{"line":37,"column":39},"generated":{"line":1,"column":558}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":561}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectionScale","original":{"line":45,"column":8},"generated":{"line":1,"column":567}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Math","original":{"line":45,"column":26},"generated":{"line":1,"column":569}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pow","original":{"line":45,"column":31},"generated":{"line":1,"column":574}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":45,"column":35},"generated":{"line":1,"column":578}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":45,"column":38},"generated":{"line":1,"column":580}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":45,"column":46},"generated":{"line":1,"column":583}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":48,"column":2},"generated":{"line":1,"column":585}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":46,"column":2},"generated":{"line":1,"column":592}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"scale","original":{"line":46,"column":13},"generated":{"line":1,"column":594}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectionScale","original":{"line":46,"column":19},"generated":{"line":1,"column":600}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":48,"column":9},"generated":{"line":1,"column":603}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":605}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"OrbitViewport","original":{"line":84,"column":21},"generated":{"line":1,"column":611}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Viewport","original":{"line":84,"column":43},"generated":{"line":1,"column":621}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":623}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"constructor","original":{"line":87,"column":2},"generated":{"line":1,"column":631}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"props","original":{"line":87,"column":14},"generated":{"line":1,"column":643}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":4},"generated":{"line":1,"column":646}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":652}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":89,"column":6},"generated":{"line":1,"column":659}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":661}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectionMatrix","original":{"line":91,"column":6},"generated":{"line":1,"column":678}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":680}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"fovy","original":{"line":93,"column":6},"generated":{"line":1,"column":685}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":93,"column":13},"generated":{"line":1,"column":687}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":690}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":94,"column":6},"generated":{"line":1,"column":700}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":94,"column":18},"generated":{"line":1,"column":702}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":706}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"target","original":{"line":95,"column":6},"generated":{"line":1,"column":713}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":95,"column":15},"generated":{"line":1,"column":715}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":95,"column":16},"generated":{"line":1,"column":716}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":95,"column":19},"generated":{"line":1,"column":718}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":95,"column":22},"generated":{"line":1,"column":720}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":723}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationX","original":{"line":97,"column":6},"generated":{"line":1,"column":733}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":97,"column":18},"generated":{"line":1,"column":735}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":737}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationOrbit","original":{"line":98,"column":6},"generated":{"line":1,"column":751}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":98,"column":22},"generated":{"line":1,"column":753}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":755}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":100,"column":6},"generated":{"line":1,"column":760}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":100,"column":13},"generated":{"line":1,"column":762}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"props","original":{"line":101,"column":8},"generated":{"line":1,"column":765}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":103,"column":10},"generated":{"line":1,"column":767}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectionMatrix","original":{"line":103,"column":26},"generated":{"line":1,"column":769}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectionMatrix","original":{"line":103,"column":45},"generated":{"line":1,"column":771}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":103,"column":62},"generated":{"line":1,"column":773}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":103,"column":67},"generated":{"line":1,"column":776}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"fovyToAltitude","original":{"line":103,"column":71},"generated":{"line":1,"column":779}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"fovyToAltitude","original":{"line":103,"column":71},"generated":{"line":1,"column":781}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":103,"column":85},"generated":{"line":1,"column":783}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"fovy","original":{"line":103,"column":86},"generated":{"line":1,"column":799}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":105,"column":4},"generated":{"line":1,"column":802}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":105,"column":10},"generated":{"line":1,"column":808}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"props","original":{"line":106,"column":9},"generated":{"line":1,"column":812}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"longitude","original":{"line":109,"column":6},"generated":{"line":1,"column":814}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"undefined","original":{"line":109,"column":17},"generated":{"line":1,"column":829}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"viewMatrix","original":{"line":110,"column":6},"generated":{"line":1,"column":831}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"getViewMatrix","original":{"line":110,"column":18},"generated":{"line":1,"column":842}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":110,"column":32},"generated":{"line":1,"column":844}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":111,"column":8},"generated":{"line":1,"column":845}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":111,"column":16},"generated":{"line":1,"column":852}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":111,"column":26},"generated":{"line":1,"column":855}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":112,"column":8},"generated":{"line":1,"column":857}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":112,"column":8},"generated":{"line":1,"column":871}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":113,"column":8},"generated":{"line":1,"column":873}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"orbitAxis","original":{"line":113,"column":8},"generated":{"line":1,"column":883}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationX","original":{"line":114,"column":8},"generated":{"line":1,"column":885}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationX","original":{"line":114,"column":8},"generated":{"line":1,"column":895}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationOrbit","original":{"line":115,"column":8},"generated":{"line":1,"column":897}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"rotationOrbit","original":{"line":115,"column":8},"generated":{"line":1,"column":911}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":116,"column":8},"generated":{"line":1,"column":913}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":116,"column":8},"generated":{"line":1,"column":918}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"fovy","original":{"line":118,"column":6},"generated":{"line":1,"column":922}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"fovy","original":{"line":118,"column":6},"generated":{"line":1,"column":927}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":119,"column":6},"generated":{"line":1,"column":929}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"focalDistance","original":{"line":119,"column":6},"generated":{"line":1,"column":943}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"position","original":{"line":120,"column":6},"generated":{"line":1,"column":945}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"target","original":{"line":120,"column":16},"generated":{"line":1,"column":954}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":121,"column":6},"generated":{"line":1,"column":956}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"zoom","original":{"line":121,"column":6},"generated":{"line":1,"column":961}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":87,"column":43},"generated":{"line":1,"column":966}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":87,"column":43},"generated":{"line":1,"column":968}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":87,"column":43},"generated":{"line":1,"column":970}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":87,"column":43},"generated":{"line":1,"column":979}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":87,"column":43},"generated":{"line":1,"column":984}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":87,"column":43},"generated":{"line":1,"column":1007}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":124,"column":4},"generated":{"line":1,"column":1010}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectedCenter","original":{"line":124,"column":9},"generated":{"line":1,"column":1015}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":124,"column":27},"generated":{"line":1,"column":1031}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"project","original":{"line":124,"column":32},"generated":{"line":1,"column":1036}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":124,"column":40},"generated":{"line":1,"column":1044}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"center","original":{"line":124,"column":45},"generated":{"line":1,"column":1049}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"unproject","original":{"line":127,"column":2},"generated":{"line":1,"column":1057}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"xyz","original":{"line":127,"column":12},"generated":{"line":1,"column":1067}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":127,"column":27},"generated":{"line":1,"column":1070}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"topLeft","original":{"line":127,"column":28},"generated":{"line":1,"column":1078}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":127,"column":38},"generated":{"line":1,"column":1081}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":127,"column":67},"generated":{"line":1,"column":1084}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":128,"column":4},"generated":{"line":1,"column":1088}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"x","original":{"line":128,"column":11},"generated":{"line":1,"column":1094}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"y","original":{"line":128,"column":14},"generated":{"line":1,"column":1096}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"z","original":{"line":128,"column":17},"generated":{"line":1,"column":1098}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":128,"column":21},"generated":{"line":1,"column":1100}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectedCenter","original":{"line":128,"column":26},"generated":{"line":1,"column":1105}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":128,"column":42},"generated":{"line":1,"column":1121}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"xyz","original":{"line":128,"column":48},"generated":{"line":1,"column":1125}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"y2","original":{"line":130,"column":10},"generated":{"line":1,"column":1127}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"topLeft","original":{"line":130,"column":15},"generated":{"line":1,"column":1129}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"y","original":{"line":130,"column":25},"generated":{"line":1,"column":1131}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":130,"column":29},"generated":{"line":1,"column":1133}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":130,"column":34},"generated":{"line":1,"column":1138}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"y","original":{"line":130,"column":43},"generated":{"line":1,"column":1145}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"X","original":{"line":131,"column":11},"generated":{"line":1,"column":1148}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Y","original":{"line":131,"column":14},"generated":{"line":1,"column":1150}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Z","original":{"line":131,"column":17},"generated":{"line":1,"column":1152}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pixelsToWorld","original":{"line":131,"column":22},"generated":{"line":1,"column":1156}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pixelsToWorld","original":{"line":131,"column":22},"generated":{"line":1,"column":1158}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":131,"column":35},"generated":{"line":1,"column":1160}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":131,"column":36},"generated":{"line":1,"column":1175}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"x","original":{"line":131,"column":37},"generated":{"line":1,"column":1176}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"y2","original":{"line":131,"column":40},"generated":{"line":1,"column":1178}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"z","original":{"line":131,"column":44},"generated":{"line":1,"column":1180}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":131,"column":48},"generated":{"line":1,"column":1183}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pixelUnprojectionMatrix","original":{"line":131,"column":53},"generated":{"line":1,"column":1188}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":132,"column":4},"generated":{"line":1,"column":1213}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":132,"column":11},"generated":{"line":1,"column":1219}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"X","original":{"line":132,"column":12},"generated":{"line":1,"column":1220}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Y","original":{"line":132,"column":15},"generated":{"line":1,"column":1222}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"Z","original":{"line":132,"column":18},"generated":{"line":1,"column":1224}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"panByPosition","original":{"line":135,"column":2},"generated":{"line":1,"column":1227}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"coords","original":{"line":135,"column":16},"generated":{"line":1,"column":1241}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pixel","original":{"line":135,"column":34},"generated":{"line":1,"column":1243}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":136,"column":4},"generated":{"line":1,"column":1246}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"p0","original":{"line":136,"column":10},"generated":{"line":1,"column":1252}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":136,"column":15},"generated":{"line":1,"column":1254}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"project","original":{"line":136,"column":20},"generated":{"line":1,"column":1259}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"coords","original":{"line":136,"column":28},"generated":{"line":1,"column":1267}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"nextCenter","original":{"line":137,"column":10},"generated":{"line":1,"column":1270}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":137,"column":23},"generated":{"line":1,"column":1272}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":138,"column":6},"generated":{"line":1,"column":1273}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"width","original":{"line":138,"column":11},"generated":{"line":1,"column":1278}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":138,"column":19},"generated":{"line":1,"column":1284}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"p0","original":{"line":138,"column":23},"generated":{"line":1,"column":1286}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":138,"column":26},"generated":{"line":1,"column":1288}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pixel","original":{"line":138,"column":31},"generated":{"line":1,"column":1291}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":138,"column":37},"generated":{"line":1,"column":1293}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":139,"column":6},"generated":{"line":1,"column":1296}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"height","original":{"line":139,"column":11},"generated":{"line":1,"column":1301}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":139,"column":20},"generated":{"line":1,"column":1308}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"p0","original":{"line":139,"column":24},"generated":{"line":1,"column":1310}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":139,"column":27},"generated":{"line":1,"column":1312}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"pixel","original":{"line":139,"column":32},"generated":{"line":1,"column":1315}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":139,"column":38},"generated":{"line":1,"column":1317}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":140,"column":6},"generated":{"line":1,"column":1320}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"projectedCenter","original":{"line":140,"column":11},"generated":{"line":1,"column":1325}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":140,"column":27},"generated":{"line":1,"column":1341}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":142,"column":4},"generated":{"line":1,"column":1345}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":142,"column":11},"generated":{"line":1,"column":1351}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"target","original":{"line":143,"column":6},"generated":{"line":1,"column":1352}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":143,"column":14},"generated":{"line":1,"column":1359}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"unproject","original":{"line":143,"column":19},"generated":{"line":1,"column":1364}},{"source":"../../../src/viewports/orbit-viewport.ts","name":"nextCenter","original":{"line":143,"column":29},"generated":{"line":1,"column":1374}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":1379}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":1387}},{"source":"../../../src/viewports/orbit-viewport.ts","name":null,"original":{"line":84,"column":52},"generated":{"line":1,"column":1395}}],"sources":{"../../../src/viewports/orbit-viewport.ts":"import Viewport from '../viewports/viewport';\n\nimport {Matrix4} from '@math.gl/core';\nimport {pixelsToWorld, fovyToAltitude} from '@math.gl/web-mercator';\n\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n\nfunction getViewMatrix({\n  height,\n  focalDistance,\n  orbitAxis,\n  rotationX,\n  rotationOrbit,\n  zoom\n}: {\n  height: number;\n  focalDistance: number;\n  orbitAxis: 'Y' | 'Z';\n  rotationX: number;\n  rotationOrbit: number;\n  zoom: number;\n}): Matrix4 {\n  // We position the camera so that one common space unit (world space unit scaled by zoom)\n  // at the target maps to one screen pixel.\n  // This is a similar technique to that used in web mercator projection\n  // By doing so we are able to convert between common space and screen space sizes efficiently\n  // in the vertex shader.\n  const up = orbitAxis === 'Z' ? [0, 0, 1] : [0, 1, 0];\n  const eye = orbitAxis === 'Z' ? [0, -focalDistance, 0] : [0, 0, focalDistance];\n\n  const viewMatrix = new Matrix4().lookAt({eye, up});\n\n  viewMatrix.rotateX(rotationX * DEGREES_TO_RADIANS);\n  if (orbitAxis === 'Z') {\n    viewMatrix.rotateZ(rotationOrbit * DEGREES_TO_RADIANS);\n  } else {\n    viewMatrix.rotateY(rotationOrbit * DEGREES_TO_RADIANS);\n  }\n\n  // When height increases, we need to increase the distance from the camera to the target to\n  // keep the 1:1 mapping. However, this also changes the projected depth of each position by\n  // moving them further away between the near/far plane.\n  // Without modifying the default near/far planes, we instead scale down the common space to\n  // remove the distortion to the depth field.\n  const projectionScale = Math.pow(2, zoom) / height;\n  viewMatrix.scale(projectionScale);\n\n  return viewMatrix;\n}\n\nexport type OrbitViewportOptions = {\n  /** Name of the viewport */\n  id?: string;\n  /** Left offset from the canvas edge, in pixels */\n  x?: number;\n  /** Top offset from the canvas edge, in pixels */\n  y?: number;\n  /** Viewport width in pixels */\n  width?: number;\n  /** Viewport height in pixels */\n  height?: number;\n  /** Axis with 360 degrees rotating freedom, either `'Y'` or `'Z'`, default to `'Z'`. */\n  orbitAxis?: 'Y' | 'Z';\n  /** The world position at the center of the viewport. Default `[0, 0, 0]`. */\n  target?: [number, number, number];\n  /** The zoom level of the viewport. `zoom: 0` maps one unit distance to one pixel on screen, and increasing `zoom` by `1` scales the same object to twice as large. Default `0`. */\n  zoom?: number;\n  /** Rotating angle around orbit axis. Default `0`. */\n  rotationOrbit?: number;\n  /** Rotating angle around orbit axis. Default `0`. */\n  rotationX?: number;\n  /** Custom projection matrix */\n  projectionMatrix?: number[];\n  /** Field of view covered by camera, in the perspective case. In degrees. Default `50`. */\n  fovy?: number;\n  /** Distance of near clipping plane. Default `0.1`. */\n  near?: number;\n  /** Distance of far clipping plane. Default `1000`. */\n  far?: number;\n  /** Whether to create an orthographic or perspective projection matrix. Default is `false` (perspective projection). */\n  orthographic?: boolean;\n};\n\nexport default class OrbitViewport extends Viewport {\n  projectedCenter: number[];\n\n  constructor(props: OrbitViewportOptions) {\n    const {\n      height,\n\n      projectionMatrix,\n\n      fovy = 50, // For setting camera position\n      orbitAxis = 'Z', // Orbit axis with 360 degrees rotating freedom, can only be 'Y' or 'Z'\n      target = [0, 0, 0], // Which point is camera looking at, default origin\n\n      rotationX = 0, // Rotating angle around X axis\n      rotationOrbit = 0, // Rotating angle around orbit axis\n\n      zoom = 0\n    } = props;\n\n    const focalDistance = projectionMatrix ? projectionMatrix[5] / 2 : fovyToAltitude(fovy);\n\n    super({\n      ...props,\n      // in case viewState contains longitude/latitude values,\n      // make sure that the base Viewport class does not treat this as a geospatial viewport\n      longitude: undefined,\n      viewMatrix: getViewMatrix({\n        height: height || 1,\n        focalDistance,\n        orbitAxis,\n        rotationX,\n        rotationOrbit,\n        zoom\n      }),\n      fovy,\n      focalDistance,\n      position: target,\n      zoom\n    });\n\n    this.projectedCenter = this.project(this.center);\n  }\n\n  unproject(xyz: number[], {topLeft = true}: {topLeft?: boolean} = {}): [number, number, number] {\n    const [x, y, z = this.projectedCenter[2]] = xyz;\n\n    const y2 = topLeft ? y : this.height - y;\n    const [X, Y, Z] = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix);\n    return [X, Y, Z];\n  }\n\n  panByPosition(coords: number[], pixel: number[]): OrbitViewportOptions {\n    const p0 = this.project(coords);\n    const nextCenter = [\n      this.width / 2 + p0[0] - pixel[0],\n      this.height / 2 + p0[1] - pixel[1],\n      this.projectedCenter[2]\n    ];\n    return {\n      target: this.unproject(nextCenter)\n    };\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"528639289e08406b240627c580ef8d68","cacheData":{"env":{}}}