{"id":"CnML","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"@babel/runtime/helpers/esm/defineProperty","loc":{"line":1,"column":28,"index":28},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@babel/runtime/helpers/esm/defineProperty.js"},{"name":"./resource","loc":{"line":2,"column":21,"index":94},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=t(require(\"@babel/runtime/helpers/esm/defineProperty\")),s=t(require(\"./resource\"));function t(e){return e&&e.__esModule?e:{default:e}}class r{constructor({gl:s,protocol:t}){(0,e.default)(this,\"protocol\",void 0),(0,e.default)(this,\"_context\",void 0),(0,e.default)(this,\"_resources\",void 0),(0,e.default)(this,\"_consumers\",void 0),(0,e.default)(this,\"_pruneRequest\",void 0),this.protocol=t||\"resource://\",this._context={gl:s,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:r=!1,persistent:o=!0}){let u=this._resources[e];u?u.setData(t,r):(u=new s.default(e,t,this._context),this._resources[e]=u),u.persistent=o}remove(e){const s=this._resources[e];s&&(s.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const s=this._consumers[e];if(s){for(const e in s){const t=s[e],r=this._resources[t.resourceId];r&&r.unsubscribe(t)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:s,consumerId:t,requestId:r=\"default\"}){const{_resources:o,protocol:u}=this;e.startsWith(u)&&(o[e=e.replace(u,\"\")]||this.add({resourceId:e,data:null,persistent:!1}));const i=o[e];if(this._track(t,r,i,s),i)return i.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,s,t,r){const o=this._consumers,u=o[e]=o[e]||{},i=u[s]||{},c=i.resourceId&&this._resources[i.resourceId];c&&(c.unsubscribe(i),this.prune()),t&&(u[s]=i,i.onChange=r,i.resourceId=t.id,t.subscribe(i))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const s=this._resources[e];s.persistent||s.inUse()||(s.delete(),delete this._resources[e])}}}exports.default=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":0}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":13}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":20}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":35}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":43}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":56}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":57}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":64}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":68}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":76}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":89}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":91}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":95}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":97}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":99}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":107}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":153}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":155}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":157}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":165}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":180}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":189}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":191}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":194}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":201}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":204}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":206}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":217}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":219}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":220}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":228}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":15},"generated":{"line":1,"column":231}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"ResourceManager","original":{"line":10,"column":21},"generated":{"line":1,"column":237}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"constructor","original":{"line":26,"column":2},"generated":{"line":1,"column":239}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":252}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"gl","original":{"line":26,"column":15},"generated":{"line":1,"column":255}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":257}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":26,"column":19},"generated":{"line":1,"column":266}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":271}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":273}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":275}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":284}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":289}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":305}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":309}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":311}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":313}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":322}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":327}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":343}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":347}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":349}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":351}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":360}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":365}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":383}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":387}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":389}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":391}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":400}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":405}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":423}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":427}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":429}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":431}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":440}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":445}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":466}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":27,"column":4},"generated":{"line":1,"column":469}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":27,"column":9},"generated":{"line":1,"column":474}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":27,"column":20},"generated":{"line":1,"column":483}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":486}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":500}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_context","original":{"line":29,"column":9},"generated":{"line":1,"column":505}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":29,"column":20},"generated":{"line":1,"column":514}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"gl","original":{"line":30,"column":6},"generated":{"line":1,"column":515}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"gl","original":{"line":30,"column":6},"generated":{"line":1,"column":518}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceManager","original":{"line":31,"column":6},"generated":{"line":1,"column":520}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":536}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":542}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":33,"column":9},"generated":{"line":1,"column":547}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":33,"column":22},"generated":{"line":1,"column":558}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":34,"column":4},"generated":{"line":1,"column":561}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_consumers","original":{"line":34,"column":9},"generated":{"line":1,"column":566}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":34,"column":22},"generated":{"line":1,"column":577}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":1,"column":580}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_pruneRequest","original":{"line":36,"column":9},"generated":{"line":1,"column":585}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":36,"column":25},"generated":{"line":1,"column":599}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"contains","original":{"line":39,"column":2},"generated":{"line":1,"column":604}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":39,"column":11},"generated":{"line":1,"column":613}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":616}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":40,"column":8},"generated":{"line":1,"column":624}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"startsWith","original":{"line":40,"column":19},"generated":{"line":1,"column":626}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":40,"column":30},"generated":{"line":1,"column":637}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":40,"column":35},"generated":{"line":1,"column":642}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":43,"column":11},"generated":{"line":1,"column":653}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":43,"column":25},"generated":{"line":1,"column":658}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":43,"column":30},"generated":{"line":1,"column":663}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"add","original":{"line":46,"column":2},"generated":{"line":1,"column":674}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":679}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":47,"column":4},"generated":{"line":1,"column":690}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":692}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"data","original":{"line":48,"column":4},"generated":{"line":1,"column":697}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":699}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"forceUpdate","original":{"line":49,"column":4},"generated":{"line":1,"column":711}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":49,"column":18},"generated":{"line":1,"column":714}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":716}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"persistent","original":{"line":50,"column":4},"generated":{"line":1,"column":727}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":50,"column":17},"generated":{"line":1,"column":730}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":1,"column":734}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":57,"column":8},"generated":{"line":1,"column":738}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":57,"column":14},"generated":{"line":1,"column":740}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":57,"column":19},"generated":{"line":1,"column":745}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":57,"column":30},"generated":{"line":1,"column":756}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":59,"column":8},"generated":{"line":1,"column":759}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":60,"column":6},"generated":{"line":1,"column":761}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"setData","original":{"line":60,"column":10},"generated":{"line":1,"column":763}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"data","original":{"line":60,"column":18},"generated":{"line":1,"column":771}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"forceUpdate","original":{"line":60,"column":24},"generated":{"line":1,"column":773}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":62,"column":6},"generated":{"line":1,"column":777}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":779}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"Resource","original":{"line":62,"column":16},"generated":{"line":1,"column":783}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":785}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":62,"column":25},"generated":{"line":1,"column":793}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"data","original":{"line":62,"column":37},"generated":{"line":1,"column":795}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":62,"column":43},"generated":{"line":1,"column":797}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_context","original":{"line":62,"column":48},"generated":{"line":1,"column":802}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":1,"column":812}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":63,"column":11},"generated":{"line":1,"column":817}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":63,"column":22},"generated":{"line":1,"column":828}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":63,"column":36},"generated":{"line":1,"column":831}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":67,"column":4},"generated":{"line":1,"column":834}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"persistent","original":{"line":67,"column":8},"generated":{"line":1,"column":836}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"persistent","original":{"line":67,"column":21},"generated":{"line":1,"column":847}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"remove","original":{"line":70,"column":2},"generated":{"line":1,"column":849}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":70,"column":9},"generated":{"line":1,"column":856}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":71,"column":4},"generated":{"line":1,"column":859}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":71,"column":10},"generated":{"line":1,"column":865}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":71,"column":16},"generated":{"line":1,"column":867}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":71,"column":21},"generated":{"line":1,"column":872}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":71,"column":32},"generated":{"line":1,"column":883}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":73,"column":8},"generated":{"line":1,"column":886}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":74,"column":6},"generated":{"line":1,"column":890}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"delete","original":{"line":74,"column":10},"generated":{"line":1,"column":892}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":75,"column":13},"generated":{"line":1,"column":908}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":75,"column":18},"generated":{"line":1,"column":913}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":75,"column":29},"generated":{"line":1,"column":924}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"unsubscribe","original":{"line":79,"column":2},"generated":{"line":1,"column":928}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":79,"column":14},"generated":{"line":1,"column":941}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":79,"column":15},"generated":{"line":1,"column":952}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":956}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":80,"column":10},"generated":{"line":1,"column":962}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":80,"column":21},"generated":{"line":1,"column":964}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_consumers","original":{"line":80,"column":26},"generated":{"line":1,"column":969}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":80,"column":37},"generated":{"line":1,"column":980}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":81,"column":4},"generated":{"line":1,"column":983}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":81,"column":8},"generated":{"line":1,"column":986}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":81,"column":18},"generated":{"line":1,"column":988}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":989}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":82,"column":11},"generated":{"line":1,"column":993}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":82,"column":17},"generated":{"line":1,"column":999}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":82,"column":30},"generated":{"line":1,"column":1004}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":82,"column":40},"generated":{"line":1,"column":1006}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":83,"column":8},"generated":{"line":1,"column":1007}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":83,"column":14},"generated":{"line":1,"column":1013}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":83,"column":24},"generated":{"line":1,"column":1015}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":83,"column":33},"generated":{"line":1,"column":1017}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":84,"column":14},"generated":{"line":1,"column":1020}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":84,"column":25},"generated":{"line":1,"column":1022}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":84,"column":30},"generated":{"line":1,"column":1027}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":84,"column":41},"generated":{"line":1,"column":1038}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":84,"column":49},"generated":{"line":1,"column":1040}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":85,"column":12},"generated":{"line":1,"column":1052}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":86,"column":10},"generated":{"line":1,"column":1055}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"unsubscribe","original":{"line":86,"column":19},"generated":{"line":1,"column":1057}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":86,"column":31},"generated":{"line":1,"column":1069}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":89,"column":13},"generated":{"line":1,"column":1079}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_consumers","original":{"line":89,"column":18},"generated":{"line":1,"column":1084}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":89,"column":29},"generated":{"line":1,"column":1095}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":90,"column":6},"generated":{"line":1,"column":1098}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"prune","original":{"line":90,"column":11},"generated":{"line":1,"column":1103}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"subscribe","original":{"line":94,"column":2},"generated":{"line":1,"column":1112}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":94,"column":15},"generated":{"line":1,"column":1123}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":95,"column":4},"generated":{"line":1,"column":1134}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":94,"column":15},"generated":{"line":1,"column":1136}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"onChange","original":{"line":96,"column":4},"generated":{"line":1,"column":1145}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":94,"column":15},"generated":{"line":1,"column":1147}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":97,"column":4},"generated":{"line":1,"column":1158}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":94,"column":15},"generated":{"line":1,"column":1160}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":98,"column":4},"generated":{"line":1,"column":1170}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":98,"column":16},"generated":{"line":1,"column":1172}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":105,"column":4},"generated":{"line":1,"column":1184}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":105,"column":11},"generated":{"line":1,"column":1190}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resources","original":{"line":105,"column":23},"generated":{"line":1,"column":1201}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":105,"column":10},"generated":{"line":1,"column":1203}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":105,"column":34},"generated":{"line":1,"column":1212}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":105,"column":46},"generated":{"line":1,"column":1215}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":106,"column":8},"generated":{"line":1,"column":1220}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"startsWith","original":{"line":106,"column":19},"generated":{"line":1,"column":1222}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":106,"column":30},"generated":{"line":1,"column":1233}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resources","original":{"line":108,"column":11},"generated":{"line":1,"column":1238}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":107,"column":6},"generated":{"line":1,"column":1240}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":107,"column":19},"generated":{"line":1,"column":1242}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"replace","original":{"line":107,"column":30},"generated":{"line":1,"column":1244}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"protocol","original":{"line":107,"column":38},"generated":{"line":1,"column":1252}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":107,"column":48},"generated":{"line":1,"column":1254}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":1,"column":1260}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"add","original":{"line":110,"column":13},"generated":{"line":1,"column":1265}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":110,"column":17},"generated":{"line":1,"column":1269}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":110,"column":18},"generated":{"line":1,"column":1270}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":110,"column":18},"generated":{"line":1,"column":1281}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"data","original":{"line":110,"column":30},"generated":{"line":1,"column":1283}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":110,"column":36},"generated":{"line":1,"column":1288}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"persistent","original":{"line":110,"column":42},"generated":{"line":1,"column":1293}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":110,"column":54},"generated":{"line":1,"column":1305}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":1,"column":1310}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":113,"column":10},"generated":{"line":1,"column":1316}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resources","original":{"line":113,"column":29},"generated":{"line":1,"column":1318}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":113,"column":39},"generated":{"line":1,"column":1320}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":1,"column":1323}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":114,"column":4},"generated":{"line":1,"column":1326}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_track","original":{"line":114,"column":9},"generated":{"line":1,"column":1331}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":114,"column":16},"generated":{"line":1,"column":1338}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":114,"column":28},"generated":{"line":1,"column":1340}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":114,"column":39},"generated":{"line":1,"column":1342}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"onChange","original":{"line":114,"column":44},"generated":{"line":1,"column":1344}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":115,"column":8},"generated":{"line":1,"column":1347}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":1,"column":1349}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":116,"column":13},"generated":{"line":1,"column":1356}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"getData","original":{"line":116,"column":17},"generated":{"line":1,"column":1358}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"prune","original":{"line":122,"column":2},"generated":{"line":1,"column":1368}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":123,"column":9},"generated":{"line":1,"column":1376}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_pruneRequest","original":{"line":123,"column":14},"generated":{"line":1,"column":1381}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":127,"column":6},"generated":{"line":1,"column":1397}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_pruneRequest","original":{"line":127,"column":11},"generated":{"line":1,"column":1402}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"setTimeout","original":{"line":127,"column":27},"generated":{"line":1,"column":1416}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":127,"column":38},"generated":{"line":1,"column":1427}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":127,"column":44},"generated":{"line":1,"column":1431}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_prune","original":{"line":127,"column":49},"generated":{"line":1,"column":1436}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":127,"column":59},"generated":{"line":1,"column":1445}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"finalize","original":{"line":131,"column":2},"generated":{"line":1,"column":1449}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":132,"column":4},"generated":{"line":1,"column":1460}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":132,"column":9},"generated":{"line":1,"column":1464}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"key","original":{"line":132,"column":15},"generated":{"line":1,"column":1470}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":132,"column":22},"generated":{"line":1,"column":1475}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":132,"column":27},"generated":{"line":1,"column":1480}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":133,"column":6},"generated":{"line":1,"column":1491}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":133,"column":11},"generated":{"line":1,"column":1496}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"key","original":{"line":133,"column":22},"generated":{"line":1,"column":1507}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"delete","original":{"line":133,"column":27},"generated":{"line":1,"column":1510}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_track","original":{"line":137,"column":10},"generated":{"line":1,"column":1519}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":138,"column":4},"generated":{"line":1,"column":1526}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":139,"column":4},"generated":{"line":1,"column":1528}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":140,"column":4},"generated":{"line":1,"column":1530}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"onChange","original":{"line":141,"column":4},"generated":{"line":1,"column":1532}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":143,"column":4},"generated":{"line":1,"column":1535}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumers","original":{"line":143,"column":10},"generated":{"line":1,"column":1541}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":143,"column":22},"generated":{"line":1,"column":1543}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_consumers","original":{"line":143,"column":27},"generated":{"line":1,"column":1548}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":144,"column":10},"generated":{"line":1,"column":1559}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumers","original":{"line":144,"column":22},"generated":{"line":1,"column":1561}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":144,"column":32},"generated":{"line":1,"column":1563}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumers","original":{"line":144,"column":46},"generated":{"line":1,"column":1566}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumerId","original":{"line":144,"column":56},"generated":{"line":1,"column":1568}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":144,"column":71},"generated":{"line":1,"column":1572}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":145,"column":10},"generated":{"line":1,"column":1575}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":145,"column":20},"generated":{"line":1,"column":1577}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":145,"column":29},"generated":{"line":1,"column":1579}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":145,"column":43},"generated":{"line":1,"column":1583}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"oldResource","original":{"line":147,"column":10},"generated":{"line":1,"column":1586}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":147,"column":24},"generated":{"line":1,"column":1588}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":147,"column":32},"generated":{"line":1,"column":1590}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":147,"column":46},"generated":{"line":1,"column":1602}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":147,"column":51},"generated":{"line":1,"column":1607}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":147,"column":62},"generated":{"line":1,"column":1618}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":147,"column":70},"generated":{"line":1,"column":1620}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"oldResource","original":{"line":148,"column":8},"generated":{"line":1,"column":1632}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"oldResource","original":{"line":149,"column":6},"generated":{"line":1,"column":1636}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"unsubscribe","original":{"line":149,"column":18},"generated":{"line":1,"column":1638}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":149,"column":30},"generated":{"line":1,"column":1650}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":150,"column":6},"generated":{"line":1,"column":1653}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"prune","original":{"line":150,"column":11},"generated":{"line":1,"column":1658}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":152,"column":8},"generated":{"line":1,"column":1667}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"consumer","original":{"line":153,"column":6},"generated":{"line":1,"column":1671}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"requestId","original":{"line":153,"column":15},"generated":{"line":1,"column":1673}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":153,"column":28},"generated":{"line":1,"column":1676}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":154,"column":6},"generated":{"line":1,"column":1678}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"onChange","original":{"line":154,"column":14},"generated":{"line":1,"column":1680}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"onChange","original":{"line":154,"column":25},"generated":{"line":1,"column":1689}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":155,"column":6},"generated":{"line":1,"column":1691}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resourceId","original":{"line":155,"column":14},"generated":{"line":1,"column":1693}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":155,"column":27},"generated":{"line":1,"column":1704}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"id","original":{"line":155,"column":36},"generated":{"line":1,"column":1706}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"resource","original":{"line":156,"column":6},"generated":{"line":1,"column":1709}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"subscribe","original":{"line":156,"column":15},"generated":{"line":1,"column":1711}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"request","original":{"line":156,"column":25},"generated":{"line":1,"column":1721}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_prune","original":{"line":160,"column":10},"generated":{"line":1,"column":1725}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":161,"column":4},"generated":{"line":1,"column":1734}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_pruneRequest","original":{"line":161,"column":9},"generated":{"line":1,"column":1739}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":161,"column":25},"generated":{"line":1,"column":1753}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":163,"column":4},"generated":{"line":1,"column":1758}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":163,"column":9},"generated":{"line":1,"column":1762}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"key","original":{"line":163,"column":15},"generated":{"line":1,"column":1768}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"Object","original":{"line":163,"column":22},"generated":{"line":1,"column":1773}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"keys","original":{"line":163,"column":29},"generated":{"line":1,"column":1780}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":163,"column":34},"generated":{"line":1,"column":1785}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":163,"column":39},"generated":{"line":1,"column":1790}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":163,"column":52},"generated":{"line":1,"column":1802}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":164,"column":6},"generated":{"line":1,"column":1803}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":164,"column":12},"generated":{"line":1,"column":1809}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":164,"column":18},"generated":{"line":1,"column":1811}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":164,"column":23},"generated":{"line":1,"column":1816}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"key","original":{"line":164,"column":34},"generated":{"line":1,"column":1827}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":165,"column":11},"generated":{"line":1,"column":1830}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"persistent","original":{"line":165,"column":15},"generated":{"line":1,"column":1832}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":165,"column":30},"generated":{"line":1,"column":1844}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"inUse","original":{"line":165,"column":34},"generated":{"line":1,"column":1846}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"res","original":{"line":166,"column":8},"generated":{"line":1,"column":1856}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"delete","original":{"line":166,"column":12},"generated":{"line":1,"column":1858}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":167,"column":15},"generated":{"line":1,"column":1874}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"_resources","original":{"line":167,"column":20},"generated":{"line":1,"column":1879}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":"key","original":{"line":167,"column":31},"generated":{"line":1,"column":1890}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":1896}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":1904}},{"source":"../../../../src/lib/resource/resource-manager.ts","name":null,"original":{"line":10,"column":37},"generated":{"line":1,"column":1912}}],"sources":{"../../../../src/lib/resource/resource-manager.ts":"/* global setTimeout */\nimport Resource from './resource';\nimport type {ResourceSubscriber} from './resource';\n\nexport type ResourceManagerContext = {\n  gl: WebGLRenderingContext;\n  resourceManager: ResourceManager;\n};\n\nexport default class ResourceManager {\n  protocol: string;\n\n  private _context: ResourceManagerContext;\n  private _resources: Record<string, Resource>;\n  private _consumers: Record<\n    string,\n    Record<\n      string,\n      ResourceSubscriber & {\n        resourceId: string;\n      }\n    >\n  >;\n  private _pruneRequest: number | null;\n\n  constructor({gl, protocol}) {\n    this.protocol = protocol || 'resource://';\n\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId: string): boolean {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }: {\n    resourceId: string;\n    data: any;\n    forceUpdate?: boolean;\n    persistent?: boolean;\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n    // persistent resources can only be removed by calling `remove`\n    // non-persistent resources may be released when there are no more consumers\n    res.persistent = persistent;\n  }\n\n  remove(resourceId: string): void {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({consumerId}: {consumerId: string}): void {\n    const consumer = this._consumers[consumerId];\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n        const resource = this._resources[request.resourceId];\n        if (resource) {\n          resource.unsubscribe(request);\n        }\n      }\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe<T>({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }: {\n    resourceId: string;\n    onChange: (data: T | Promise<T>) => void;\n    consumerId: string;\n    requestId: string;\n  }): T | Promise<T> | undefined {\n    const {_resources: resources, protocol} = this;\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n      if (!resources[resourceId]) {\n        // Add placeholder. When this resource becomes available, the consumer will be notified.\n        this.add({resourceId, data: null, persistent: false});\n      }\n    }\n    const res: Resource<T> = resources[resourceId];\n    this._track(consumerId, requestId, res, onChange);\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune(): void {\n    if (!this._pruneRequest) {\n      // prune() may be called multiple times in the same animation frame.\n      // Batch multiple requests together\n      // @ts-ignore setTimeout returns NodeJS.Timeout in node\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize(): void {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  private _track(\n    consumerId: string,\n    requestId: string,\n    resource: Resource,\n    onChange: (data: any) => void\n  ) {\n    const consumers = this._consumers;\n    const consumer = (consumers[consumerId] = consumers[consumerId] || {});\n    const request = consumer[requestId] || {};\n\n    const oldResource = request.resourceId && this._resources[request.resourceId];\n    if (oldResource) {\n      oldResource.unsubscribe(request);\n      this.prune();\n    }\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resourceId = resource.id;\n      resource.subscribe(request);\n    }\n  }\n\n  private _prune(): void {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"4464f4a49487a1ec67f1b4ef6821ba2b","cacheData":{"env":{}}}