{"id":"jOTJ","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/create-loader-worker.js.map","includedInParent":true,"mtime":1688284132110},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@loaders.gl/loader-utils/package.json","includedInParent":true,"mtime":1688284132110},{"name":"@loaders.gl/worker-utils","loc":{"line":1,"column":27,"index":27},"parent":"/project/deck-gl-examples-01/node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/create-loader-worker.js","resolved":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/dist/esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.createLoaderWorker=o;var e=require(\"@loaders.gl/worker-utils\");let r=0;function o(r){e.WorkerBody.inWorkerThread()&&(e.WorkerBody.onmessage=(async(o,n)=>{switch(o){case\"process\":try{const{input:o,options:c={},context:i={}}=n,d=await s({loader:r,arrayBuffer:o,options:c,context:{...i,parse:t}});e.WorkerBody.postMessage(\"done\",{result:d})}catch(a){const r=a instanceof Error?a.message:\"\";e.WorkerBody.postMessage(\"error\",{error:r})}}}))}function t(o,t){return new Promise((s,n)=>{const a=r++,c=(r,o)=>{if(o.id===a)switch(r){case\"done\":e.WorkerBody.removeEventListener(c),s(o.result);break;case\"error\":e.WorkerBody.removeEventListener(c),n(o.error)}};e.WorkerBody.addEventListener(c);const i={id:a,input:o,options:t};e.WorkerBody.postMessage(\"process\",i)})}async function s(e){let r,o,{loader:t,arrayBuffer:s,options:n,context:a}=e;if(t.parseSync||t.parse)r=s,o=t.parseSync||t.parse;else{if(!t.parseTextSync)throw new Error(\"Could not load data with \".concat(t.name,\" loader\"));r=(new TextDecoder).decode(s),o=t.parseTextSync}return n={...n,modules:t&&t.options&&t.options.modules||{},worker:!1},await o(r,{...n},a,t)}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":108,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":97}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":101}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":103}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":111}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":139}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"requestId","original":{"line":6,"column":4},"generated":{"line":1,"column":143}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":6,"column":16},"generated":{"line":1,"column":145}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":147}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"createLoaderWorker","original":{"line":12,"column":16},"generated":{"line":1,"column":156}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":12,"column":35},"generated":{"line":1,"column":158}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":14,"column":7},"generated":{"line":1,"column":161}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":14,"column":17},"generated":{"line":1,"column":163}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"inWorkerThread","original":{"line":14,"column":18},"generated":{"line":1,"column":174}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":18,"column":2},"generated":{"line":1,"column":193}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":1,"column":195}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"onmessage","original":{"line":18,"column":13},"generated":{"line":1,"column":206}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":18,"column":25},"generated":{"line":1,"column":216}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"type","original":{"line":18,"column":32},"generated":{"line":1,"column":223}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":18,"column":38},"generated":{"line":1,"column":225}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":230}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"type","original":{"line":19,"column":12},"generated":{"line":1,"column":237}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":240}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":20,"column":11},"generated":{"line":1,"column":244}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":254}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":258}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":24,"column":16},"generated":{"line":1,"column":264}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"input","original":{"line":24,"column":17},"generated":{"line":1,"column":270}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":24,"column":22},"generated":{"line":1,"column":272}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":24,"column":24},"generated":{"line":1,"column":280}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":24,"column":34},"generated":{"line":1,"column":282}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":285}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"context","original":{"line":24,"column":38},"generated":{"line":1,"column":293}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":24,"column":48},"generated":{"line":1,"column":295}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":24,"column":54},"generated":{"line":1,"column":299}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"result","original":{"line":26,"column":16},"generated":{"line":1,"column":301}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseData","original":{"line":26,"column":31},"generated":{"line":1,"column":309}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":26,"column":41},"generated":{"line":1,"column":311}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":27,"column":12},"generated":{"line":1,"column":312}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":27,"column":12},"generated":{"line":1,"column":319}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"arrayBuffer","original":{"line":28,"column":12},"generated":{"line":1,"column":321}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"input","original":{"line":28,"column":25},"generated":{"line":1,"column":333}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":29,"column":12},"generated":{"line":1,"column":335}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":29,"column":12},"generated":{"line":1,"column":343}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"context","original":{"line":30,"column":12},"generated":{"line":1,"column":345}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":30,"column":21},"generated":{"line":1,"column":353}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"context","original":{"line":31,"column":17},"generated":{"line":1,"column":357}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parse","original":{"line":32,"column":14},"generated":{"line":1,"column":359}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseOnMainThread","original":{"line":32,"column":21},"generated":{"line":1,"column":365}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":35,"column":10},"generated":{"line":1,"column":370}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":35,"column":20},"generated":{"line":1,"column":372}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"postMessage","original":{"line":35,"column":21},"generated":{"line":1,"column":383}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":35,"column":33},"generated":{"line":1,"column":395}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":35,"column":41},"generated":{"line":1,"column":402}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"result","original":{"line":35,"column":42},"generated":{"line":1,"column":403}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"result","original":{"line":35,"column":42},"generated":{"line":1,"column":410}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":414}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"error","original":{"line":36,"column":17},"generated":{"line":1,"column":420}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":423}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"message","original":{"line":37,"column":16},"generated":{"line":1,"column":429}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"error","original":{"line":37,"column":26},"generated":{"line":1,"column":431}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"Error","original":{"line":37,"column":43},"generated":{"line":1,"column":444}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"error","original":{"line":37,"column":51},"generated":{"line":1,"column":450}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"message","original":{"line":37,"column":57},"generated":{"line":1,"column":452}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":37,"column":67},"generated":{"line":1,"column":460}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":38,"column":10},"generated":{"line":1,"column":463}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":38,"column":20},"generated":{"line":1,"column":465}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"postMessage","original":{"line":38,"column":21},"generated":{"line":1,"column":476}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":38,"column":33},"generated":{"line":1,"column":488}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":38,"column":42},"generated":{"line":1,"column":496}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"error","original":{"line":38,"column":43},"generated":{"line":1,"column":497}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"message","original":{"line":38,"column":50},"generated":{"line":1,"column":503}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":46,"column":0},"generated":{"line":1,"column":512}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseOnMainThread","original":{"line":46,"column":9},"generated":{"line":1,"column":521}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"arrayBuffer","original":{"line":46,"column":27},"generated":{"line":1,"column":523}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":46,"column":53},"generated":{"line":1,"column":525}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":1,"column":528}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":535}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"Promise","original":{"line":47,"column":13},"generated":{"line":1,"column":539}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":47,"column":21},"generated":{"line":1,"column":547}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"resolve","original":{"line":47,"column":22},"generated":{"line":1,"column":548}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"reject","original":{"line":47,"column":31},"generated":{"line":1,"column":550}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":1,"column":555}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"id","original":{"line":48,"column":10},"generated":{"line":1,"column":561}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"requestId","original":{"line":48,"column":15},"generated":{"line":1,"column":563}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"onMessage","original":{"line":52,"column":10},"generated":{"line":1,"column":567}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"onMessage","original":{"line":52,"column":22},"generated":{"line":1,"column":569}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"type","original":{"line":52,"column":23},"generated":{"line":1,"column":570}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":52,"column":29},"generated":{"line":1,"column":572}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":1,"column":577}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":53,"column":10},"generated":{"line":1,"column":580}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"id","original":{"line":53,"column":18},"generated":{"line":1,"column":582}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"id","original":{"line":53,"column":25},"generated":{"line":1,"column":587}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":1,"column":589}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"type","original":{"line":58,"column":14},"generated":{"line":1,"column":596}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":599}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":59,"column":13},"generated":{"line":1,"column":603}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":60,"column":10},"generated":{"line":1,"column":610}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":60,"column":20},"generated":{"line":1,"column":612}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"removeEventListener","original":{"line":60,"column":21},"generated":{"line":1,"column":623}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"onMessage","original":{"line":60,"column":41},"generated":{"line":1,"column":643}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"resolve","original":{"line":61,"column":10},"generated":{"line":1,"column":646}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":61,"column":18},"generated":{"line":1,"column":648}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"result","original":{"line":61,"column":26},"generated":{"line":1,"column":650}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":658}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":664}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":64,"column":13},"generated":{"line":1,"column":668}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":65,"column":10},"generated":{"line":1,"column":676}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":1,"column":678}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"removeEventListener","original":{"line":65,"column":21},"generated":{"line":1,"column":689}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"onMessage","original":{"line":65,"column":41},"generated":{"line":1,"column":709}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"reject","original":{"line":66,"column":10},"generated":{"line":1,"column":712}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":66,"column":17},"generated":{"line":1,"column":714}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"error","original":{"line":66,"column":25},"generated":{"line":1,"column":716}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":74,"column":4},"generated":{"line":1,"column":725}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":74,"column":14},"generated":{"line":1,"column":727}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"addEventListener","original":{"line":74,"column":15},"generated":{"line":1,"column":738}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"onMessage","original":{"line":74,"column":32},"generated":{"line":1,"column":755}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":77,"column":4},"generated":{"line":1,"column":758}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":77,"column":10},"generated":{"line":1,"column":764}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":77,"column":20},"generated":{"line":1,"column":766}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"id","original":{"line":77,"column":21},"generated":{"line":1,"column":767}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"id","original":{"line":77,"column":21},"generated":{"line":1,"column":770}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"input","original":{"line":77,"column":25},"generated":{"line":1,"column":772}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"arrayBuffer","original":{"line":77,"column":32},"generated":{"line":1,"column":778}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":77,"column":45},"generated":{"line":1,"column":780}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":77,"column":45},"generated":{"line":1,"column":788}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"WorkerBody","original":{"line":78,"column":4},"generated":{"line":1,"column":791}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":78,"column":14},"generated":{"line":1,"column":793}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"postMessage","original":{"line":78,"column":15},"generated":{"line":1,"column":804}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":78,"column":27},"generated":{"line":1,"column":816}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"payload","original":{"line":78,"column":38},"generated":{"line":1,"column":826}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":86,"column":0},"generated":{"line":1,"column":831}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseData","original":{"line":86,"column":15},"generated":{"line":1,"column":846}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"_ref","original":{"line":86,"column":24},"generated":{"line":1,"column":848}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":86,"column":66},"generated":{"line":1,"column":851}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"data","original":{"line":87,"column":6},"generated":{"line":1,"column":855}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parser","original":{"line":88,"column":6},"generated":{"line":1,"column":857}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":86,"column":25},"generated":{"line":1,"column":860}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":86,"column":26},"generated":{"line":1,"column":867}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":86,"column":32},"generated":{"line":1,"column":869}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"arrayBuffer","original":{"line":86,"column":34},"generated":{"line":1,"column":881}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":86,"column":45},"generated":{"line":1,"column":883}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":86,"column":47},"generated":{"line":1,"column":891}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":86,"column":54},"generated":{"line":1,"column":893}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"context","original":{"line":86,"column":56},"generated":{"line":1,"column":901}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"_ref","original":{"line":86,"column":64},"generated":{"line":1,"column":904}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":89,"column":2},"generated":{"line":1,"column":906}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":89,"column":6},"generated":{"line":1,"column":909}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseSync","original":{"line":89,"column":13},"generated":{"line":1,"column":911}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":89,"column":26},"generated":{"line":1,"column":922}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parse","original":{"line":89,"column":33},"generated":{"line":1,"column":924}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"data","original":{"line":90,"column":4},"generated":{"line":1,"column":930}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"arrayBuffer","original":{"line":90,"column":11},"generated":{"line":1,"column":932}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parser","original":{"line":91,"column":4},"generated":{"line":1,"column":934}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":91,"column":13},"generated":{"line":1,"column":936}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseSync","original":{"line":91,"column":20},"generated":{"line":1,"column":938}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":91,"column":33},"generated":{"line":1,"column":949}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parse","original":{"line":91,"column":40},"generated":{"line":1,"column":951}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":92,"column":9},"generated":{"line":1,"column":961}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":92,"column":9},"generated":{"line":1,"column":962}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":92,"column":13},"generated":{"line":1,"column":966}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseTextSync","original":{"line":92,"column":20},"generated":{"line":1,"column":968}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":97,"column":4},"generated":{"line":1,"column":982}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":97,"column":10},"generated":{"line":1,"column":988}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"Error","original":{"line":97,"column":14},"generated":{"line":1,"column":992}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":97,"column":19},"generated":{"line":1,"column":998}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"concat","original":{"line":97,"column":19},"generated":{"line":1,"column":1026}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":97,"column":48},"generated":{"line":1,"column":1033}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"name","original":{"line":97,"column":55},"generated":{"line":1,"column":1035}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":97,"column":59},"generated":{"line":1,"column":1040}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"data","original":{"line":94,"column":4},"generated":{"line":1,"column":1052}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":93,"column":24},"generated":{"line":1,"column":1055}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"TextDecoder","original":{"line":93,"column":28},"generated":{"line":1,"column":1059}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"decode","original":{"line":94,"column":23},"generated":{"line":1,"column":1072}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"arrayBuffer","original":{"line":94,"column":30},"generated":{"line":1,"column":1079}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parser","original":{"line":95,"column":4},"generated":{"line":1,"column":1082}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":95,"column":13},"generated":{"line":1,"column":1084}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parseTextSync","original":{"line":95,"column":20},"generated":{"line":1,"column":1086}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":107,"column":2},"generated":{"line":1,"column":1100}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":101,"column":2},"generated":{"line":1,"column":1107}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":101,"column":12},"generated":{"line":1,"column":1109}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":102,"column":7},"generated":{"line":1,"column":1113}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"modules","original":{"line":103,"column":4},"generated":{"line":1,"column":1115}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":103,"column":14},"generated":{"line":1,"column":1123}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":103,"column":24},"generated":{"line":1,"column":1126}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":103,"column":31},"generated":{"line":1,"column":1128}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":103,"column":42},"generated":{"line":1,"column":1137}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":103,"column":49},"generated":{"line":1,"column":1139}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"modules","original":{"line":103,"column":57},"generated":{"line":1,"column":1147}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":103,"column":69},"generated":{"line":1,"column":1156}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"worker","original":{"line":104,"column":4},"generated":{"line":1,"column":1159}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":104,"column":12},"generated":{"line":1,"column":1167}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"parser","original":{"line":107,"column":15},"generated":{"line":1,"column":1176}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"data","original":{"line":107,"column":22},"generated":{"line":1,"column":1178}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":null,"original":{"line":107,"column":28},"generated":{"line":1,"column":1180}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"options","original":{"line":107,"column":32},"generated":{"line":1,"column":1184}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"context","original":{"line":107,"column":42},"generated":{"line":1,"column":1187}},{"source":"../../../../src/lib/worker-loader-utils/create-loader-worker.ts","name":"loader","original":{"line":107,"column":51},"generated":{"line":1,"column":1189}}],"sources":{"../../../../src/lib/worker-loader-utils/create-loader-worker.ts":"/* eslint-disable no-restricted-globals */\nimport type {LoaderWithParser} from '../../types';\nimport {WorkerBody} from '@loaders.gl/worker-utils';\n// import {validateLoaderVersion} from './validate-loader-version';\n\nlet requestId = 0;\n\n/**\n * Set up a WebWorkerGlobalScope to talk with the main thread\n * @param loader\n */\nexport function createLoaderWorker(loader: LoaderWithParser) {\n  // Check that we are actually in a worker thread\n  if (!WorkerBody.inWorkerThread()) {\n    return;\n  }\n\n  WorkerBody.onmessage = async (type, payload) => {\n    switch (type) {\n      case 'process':\n        try {\n          // validateLoaderVersion(loader, data.source.split('@')[1]);\n\n          const {input, options = {}, context = {}} = payload;\n\n          const result = await parseData({\n            loader,\n            arrayBuffer: input,\n            options,\n            context: {\n              ...context,\n              parse: parseOnMainThread\n            }\n          });\n          WorkerBody.postMessage('done', {result});\n        } catch (error) {\n          const message = error instanceof Error ? error.message : '';\n          WorkerBody.postMessage('error', {error: message});\n        }\n        break;\n      default:\n    }\n  };\n}\n\nfunction parseOnMainThread(arrayBuffer: ArrayBuffer, options: {[key: string]: any}): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const id = requestId++;\n\n    /**\n     */\n    const onMessage = (type, payload) => {\n      if (payload.id !== id) {\n        // not ours\n        return;\n      }\n\n      switch (type) {\n        case 'done':\n          WorkerBody.removeEventListener(onMessage);\n          resolve(payload.result);\n          break;\n\n        case 'error':\n          WorkerBody.removeEventListener(onMessage);\n          reject(payload.error);\n          break;\n\n        default:\n        // ignore\n      }\n    };\n\n    WorkerBody.addEventListener(onMessage);\n\n    // Ask the main thread to decode data\n    const payload = {id, input: arrayBuffer, options};\n    WorkerBody.postMessage('process', payload);\n  });\n}\n\n// TODO - Support byteOffset and byteLength (enabling parsing of embedded binaries without copies)\n// TODO - Why not support async loader.parse* funcs here?\n// TODO - Why not reuse a common function instead of reimplementing loader.parse* selection logic? Keeping loader small?\n// TODO - Lack of appropriate parser functions can be detected when we create worker, no need to wait until parse\nasync function parseData({loader, arrayBuffer, options, context}) {\n  let data;\n  let parser;\n  if (loader.parseSync || loader.parse) {\n    data = arrayBuffer;\n    parser = loader.parseSync || loader.parse;\n  } else if (loader.parseTextSync) {\n    const textDecoder = new TextDecoder();\n    data = textDecoder.decode(arrayBuffer);\n    parser = loader.parseTextSync;\n  } else {\n    throw new Error(`Could not load data with ${loader.name} loader`);\n  }\n\n  // TODO - proper merge in of loader options...\n  options = {\n    ...options,\n    modules: (loader && loader.options && loader.options.modules) || {},\n    worker: false\n  };\n\n  return await parser(data, {...options}, context, loader);\n}\n"},"lineCount":null}},"error":null,"hash":"83d8dc523a09349a6520264bbd357994","cacheData":{"env":{}}}