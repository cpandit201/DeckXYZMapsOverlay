{"id":"yeLJ","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"@babel/runtime/helpers/esm/defineProperty","loc":{"line":1,"column":28,"index":28},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@babel/runtime/helpers/esm/defineProperty.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=exports.TypedArrayManager=void 0;var e=t(require(\"@babel/runtime/helpers/esm/defineProperty\"));function t(e){return e&&e.__esModule?e:{default:e}}class r{constructor(t={}){(0,e.default)(this,\"_pool\",[]),(0,e.default)(this,\"opts\",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:r=1,type:s,padding:o=0,copy:i=!1,initialize:l=!1,maxCount:n}){const a=s||e&&e.constructor||Float32Array,p=t*r+o;if(ArrayBuffer.isView(e)){if(p<=e.length)return e;if(p*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new a(e.buffer,0,p)}let f=1/0;n&&(f=n*r+o);const u=this._allocate(a,p,l,f);return e&&i?u.set(e):l||u.fill(0,0,4),this._release(e),u}release(e){this._release(e)}_allocate(e,t,r,s){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>s&&(o=s);const i=this._pool,l=e.BYTES_PER_ELEMENT*o,n=i.findIndex(e=>e.byteLength>=l);if(n>=0){const t=new e(i.splice(n,1)[0],0,o);return r&&t.fill(0),t}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:r}=e,{byteLength:s}=r,o=t.findIndex(e=>e.byteLength>=s);o<0?t.push(r):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,r),t.length>this.opts.poolSize&&t.shift()}}exports.TypedArrayManager=r;var s=new r;exports.default=s;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":84}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":92}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":115}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":117}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":121}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":123}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":125}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":133}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":179}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":188}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":190}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":193}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":200}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":203}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":205}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":216}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":218}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":219}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":227}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":8,"column":7},"generated":{"line":1,"column":230}},{"source":"../../../src/utils/typed-array-manager.ts","name":"TypedArrayManager","original":{"line":8,"column":13},"generated":{"line":1,"column":236}},{"source":"../../../src/utils/typed-array-manager.ts","name":"constructor","original":{"line":15,"column":2},"generated":{"line":1,"column":238}},{"source":"../../../src/utils/typed-array-manager.ts","name":"options","original":{"line":15,"column":14},"generated":{"line":1,"column":250}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":50},"generated":{"line":1,"column":252}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":257}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":259}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":261}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":270}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":275}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":9,"column":33},"generated":{"line":1,"column":283}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":288}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":290}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":292}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":301}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":1,"column":306}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":13,"column":6},"generated":{"line":1,"column":313}},{"source":"../../../src/utils/typed-array-manager.ts","name":"overAlloc","original":{"line":13,"column":7},"generated":{"line":1,"column":314}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":13,"column":18},"generated":{"line":1,"column":324}},{"source":"../../../src/utils/typed-array-manager.ts","name":"poolSize","original":{"line":13,"column":21},"generated":{"line":1,"column":326}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":13,"column":31},"generated":{"line":1,"column":335}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":16,"column":4},"generated":{"line":1,"column":341}},{"source":"../../../src/utils/typed-array-manager.ts","name":"setOptions","original":{"line":16,"column":9},"generated":{"line":1,"column":346}},{"source":"../../../src/utils/typed-array-manager.ts","name":"options","original":{"line":16,"column":20},"generated":{"line":1,"column":357}},{"source":"../../../src/utils/typed-array-manager.ts","name":"setOptions","original":{"line":19,"column":2},"generated":{"line":1,"column":360}},{"source":"../../../src/utils/typed-array-manager.ts","name":"options","original":{"line":19,"column":13},"generated":{"line":1,"column":371}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Object","original":{"line":20,"column":4},"generated":{"line":1,"column":374}},{"source":"../../../src/utils/typed-array-manager.ts","name":"assign","original":{"line":20,"column":11},"generated":{"line":1,"column":381}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":1,"column":388}},{"source":"../../../src/utils/typed-array-manager.ts","name":"opts","original":{"line":20,"column":23},"generated":{"line":1,"column":393}},{"source":"../../../src/utils/typed-array-manager.ts","name":"options","original":{"line":20,"column":29},"generated":{"line":1,"column":398}},{"source":"../../../src/utils/typed-array-manager.ts","name":"allocate","original":{"line":23,"column":2},"generated":{"line":1,"column":401}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":24,"column":4},"generated":{"line":1,"column":410}},{"source":"../../../src/utils/typed-array-manager.ts","name":"count","original":{"line":25,"column":4},"generated":{"line":1,"column":412}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":415}},{"source":"../../../src/utils/typed-array-manager.ts","name":"size","original":{"line":27,"column":6},"generated":{"line":1,"column":420}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":422}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":424}},{"source":"../../../src/utils/typed-array-manager.ts","name":"type","original":{"line":28,"column":6},"generated":{"line":1,"column":429}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":431}},{"source":"../../../src/utils/typed-array-manager.ts","name":"padding","original":{"line":29,"column":6},"generated":{"line":1,"column":439}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":29,"column":16},"generated":{"line":1,"column":441}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":443}},{"source":"../../../src/utils/typed-array-manager.ts","name":"copy","original":{"line":30,"column":6},"generated":{"line":1,"column":448}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":451}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":453}},{"source":"../../../src/utils/typed-array-manager.ts","name":"initialize","original":{"line":31,"column":6},"generated":{"line":1,"column":464}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":31,"column":19},"generated":{"line":1,"column":467}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":469}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxCount","original":{"line":32,"column":6},"generated":{"line":1,"column":478}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":42,"column":4},"generated":{"line":1,"column":482}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":42,"column":10},"generated":{"line":1,"column":488}},{"source":"../../../src/utils/typed-array-manager.ts","name":"type","original":{"line":43,"column":6},"generated":{"line":1,"column":490}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":43,"column":15},"generated":{"line":1,"column":493}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":43,"column":30},"generated":{"line":1,"column":496}},{"source":"../../../src/utils/typed-array-manager.ts","name":"constructor","original":{"line":43,"column":41},"generated":{"line":1,"column":498}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Float32Array","original":{"line":43,"column":83},"generated":{"line":1,"column":511}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newSize","original":{"line":45,"column":10},"generated":{"line":1,"column":524}},{"source":"../../../src/utils/typed-array-manager.ts","name":"count","original":{"line":45,"column":20},"generated":{"line":1,"column":526}},{"source":"../../../src/utils/typed-array-manager.ts","name":"size","original":{"line":45,"column":28},"generated":{"line":1,"column":528}},{"source":"../../../src/utils/typed-array-manager.ts","name":"padding","original":{"line":45,"column":35},"generated":{"line":1,"column":530}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":1,"column":532}},{"source":"../../../src/utils/typed-array-manager.ts","name":"ArrayBuffer","original":{"line":46,"column":8},"generated":{"line":1,"column":535}},{"source":"../../../src/utils/typed-array-manager.ts","name":"isView","original":{"line":46,"column":20},"generated":{"line":1,"column":547}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":46,"column":27},"generated":{"line":1,"column":554}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":46,"column":40},"generated":{"line":1,"column":557}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":47,"column":6},"generated":{"line":1,"column":558}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newSize","original":{"line":47,"column":10},"generated":{"line":1,"column":561}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":47,"column":21},"generated":{"line":1,"column":564}},{"source":"../../../src/utils/typed-array-manager.ts","name":"length","original":{"line":47,"column":32},"generated":{"line":1,"column":566}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":573}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":48,"column":15},"generated":{"line":1,"column":580}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":1,"column":582}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newSize","original":{"line":50,"column":10},"generated":{"line":1,"column":585}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":50,"column":20},"generated":{"line":1,"column":587}},{"source":"../../../src/utils/typed-array-manager.ts","name":"BYTES_PER_ELEMENT","original":{"line":50,"column":31},"generated":{"line":1,"column":589}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":50,"column":52},"generated":{"line":1,"column":608}},{"source":"../../../src/utils/typed-array-manager.ts","name":"buffer","original":{"line":50,"column":63},"generated":{"line":1,"column":610}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":50,"column":70},"generated":{"line":1,"column":617}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":628}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":51,"column":15},"generated":{"line":1,"column":635}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":51,"column":19},"generated":{"line":1,"column":639}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":51,"column":24},"generated":{"line":1,"column":641}},{"source":"../../../src/utils/typed-array-manager.ts","name":"buffer","original":{"line":51,"column":35},"generated":{"line":1,"column":643}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":51,"column":43},"generated":{"line":1,"column":650}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newSize","original":{"line":51,"column":46},"generated":{"line":1,"column":652}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":655}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxSize","original":{"line":55,"column":8},"generated":{"line":1,"column":659}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Infinity","original":{"line":55,"column":26},"generated":{"line":1,"column":661}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Infinity","original":{"line":55,"column":26},"generated":{"line":1,"column":663}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxCount","original":{"line":56,"column":8},"generated":{"line":1,"column":665}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxSize","original":{"line":57,"column":6},"generated":{"line":1,"column":669}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxCount","original":{"line":57,"column":16},"generated":{"line":1,"column":671}},{"source":"../../../src/utils/typed-array-manager.ts","name":"size","original":{"line":57,"column":27},"generated":{"line":1,"column":673}},{"source":"../../../src/utils/typed-array-manager.ts","name":"padding","original":{"line":57,"column":34},"generated":{"line":1,"column":675}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":1,"column":678}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newArray","original":{"line":60,"column":10},"generated":{"line":1,"column":684}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":686}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_allocate","original":{"line":60,"column":26},"generated":{"line":1,"column":691}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":60,"column":36},"generated":{"line":1,"column":701}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newSize","original":{"line":60,"column":42},"generated":{"line":1,"column":703}},{"source":"../../../src/utils/typed-array-manager.ts","name":"initialize","original":{"line":60,"column":51},"generated":{"line":1,"column":705}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxSize","original":{"line":60,"column":63},"generated":{"line":1,"column":707}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":70,"column":4},"generated":{"line":1,"column":710}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":62,"column":8},"generated":{"line":1,"column":717}},{"source":"../../../src/utils/typed-array-manager.ts","name":"copy","original":{"line":62,"column":22},"generated":{"line":1,"column":720}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newArray","original":{"line":63,"column":6},"generated":{"line":1,"column":722}},{"source":"../../../src/utils/typed-array-manager.ts","name":"set","original":{"line":63,"column":15},"generated":{"line":1,"column":724}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":63,"column":19},"generated":{"line":1,"column":728}},{"source":"../../../src/utils/typed-array-manager.ts","name":"initialize","original":{"line":64,"column":16},"generated":{"line":1,"column":731}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newArray","original":{"line":66,"column":6},"generated":{"line":1,"column":734}},{"source":"../../../src/utils/typed-array-manager.ts","name":"fill","original":{"line":66,"column":15},"generated":{"line":1,"column":736}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":66,"column":20},"generated":{"line":1,"column":741}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":66,"column":23},"generated":{"line":1,"column":743}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":66,"column":26},"generated":{"line":1,"column":745}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":748}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_release","original":{"line":69,"column":9},"generated":{"line":1,"column":753}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":69,"column":18},"generated":{"line":1,"column":762}},{"source":"../../../src/utils/typed-array-manager.ts","name":"newArray","original":{"line":70,"column":11},"generated":{"line":1,"column":765}},{"source":"../../../src/utils/typed-array-manager.ts","name":"release","original":{"line":73,"column":2},"generated":{"line":1,"column":767}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":73,"column":10},"generated":{"line":1,"column":775}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":74,"column":4},"generated":{"line":1,"column":778}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_release","original":{"line":74,"column":9},"generated":{"line":1,"column":783}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":74,"column":18},"generated":{"line":1,"column":792}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_allocate","original":{"line":77,"column":10},"generated":{"line":1,"column":795}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":78,"column":4},"generated":{"line":1,"column":805}},{"source":"../../../src/utils/typed-array-manager.ts","name":"size","original":{"line":79,"column":4},"generated":{"line":1,"column":807}},{"source":"../../../src/utils/typed-array-manager.ts","name":"initialize","original":{"line":80,"column":4},"generated":{"line":1,"column":809}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxSize","original":{"line":81,"column":4},"generated":{"line":1,"column":811}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":84,"column":4},"generated":{"line":1,"column":814}},{"source":"../../../src/utils/typed-array-manager.ts","name":"sizeToAllocate","original":{"line":84,"column":8},"generated":{"line":1,"column":818}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Math","original":{"line":84,"column":25},"generated":{"line":1,"column":820}},{"source":"../../../src/utils/typed-array-manager.ts","name":"max","original":{"line":84,"column":30},"generated":{"line":1,"column":825}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Math","original":{"line":84,"column":34},"generated":{"line":1,"column":829}},{"source":"../../../src/utils/typed-array-manager.ts","name":"ceil","original":{"line":84,"column":39},"generated":{"line":1,"column":834}},{"source":"../../../src/utils/typed-array-manager.ts","name":"size","original":{"line":84,"column":44},"generated":{"line":1,"column":839}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":84,"column":51},"generated":{"line":1,"column":841}},{"source":"../../../src/utils/typed-array-manager.ts","name":"opts","original":{"line":84,"column":56},"generated":{"line":1,"column":846}},{"source":"../../../src/utils/typed-array-manager.ts","name":"overAlloc","original":{"line":84,"column":61},"generated":{"line":1,"column":851}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":84,"column":73},"generated":{"line":1,"column":862}},{"source":"../../../src/utils/typed-array-manager.ts","name":"sizeToAllocate","original":{"line":86,"column":8},"generated":{"line":1,"column":865}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxSize","original":{"line":86,"column":25},"generated":{"line":1,"column":867}},{"source":"../../../src/utils/typed-array-manager.ts","name":"sizeToAllocate","original":{"line":87,"column":6},"generated":{"line":1,"column":871}},{"source":"../../../src/utils/typed-array-manager.ts","name":"maxSize","original":{"line":87,"column":23},"generated":{"line":1,"column":873}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":91,"column":4},"generated":{"line":1,"column":876}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":91,"column":10},"generated":{"line":1,"column":882}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":91,"column":17},"generated":{"line":1,"column":884}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_pool","original":{"line":91,"column":22},"generated":{"line":1,"column":889}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":92,"column":10},"generated":{"line":1,"column":895}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":92,"column":23},"generated":{"line":1,"column":897}},{"source":"../../../src/utils/typed-array-manager.ts","name":"BYTES_PER_ELEMENT","original":{"line":92,"column":28},"generated":{"line":1,"column":899}},{"source":"../../../src/utils/typed-array-manager.ts","name":"sizeToAllocate","original":{"line":92,"column":48},"generated":{"line":1,"column":917}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":93,"column":10},"generated":{"line":1,"column":919}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":93,"column":14},"generated":{"line":1,"column":921}},{"source":"../../../src/utils/typed-array-manager.ts","name":"findIndex","original":{"line":93,"column":19},"generated":{"line":1,"column":923}},{"source":"../../../src/utils/typed-array-manager.ts","name":"b","original":{"line":93,"column":29},"generated":{"line":1,"column":933}},{"source":"../../../src/utils/typed-array-manager.ts","name":"b","original":{"line":93,"column":34},"generated":{"line":1,"column":936}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":93,"column":36},"generated":{"line":1,"column":938}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":93,"column":50},"generated":{"line":1,"column":950}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":94,"column":4},"generated":{"line":1,"column":953}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":94,"column":8},"generated":{"line":1,"column":956}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":94,"column":13},"generated":{"line":1,"column":959}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":94,"column":16},"generated":{"line":1,"column":961}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":1,"column":962}},{"source":"../../../src/utils/typed-array-manager.ts","name":"array","original":{"line":96,"column":12},"generated":{"line":1,"column":968}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":96,"column":20},"generated":{"line":1,"column":970}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":96,"column":24},"generated":{"line":1,"column":974}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":96,"column":29},"generated":{"line":1,"column":976}},{"source":"../../../src/utils/typed-array-manager.ts","name":"splice","original":{"line":96,"column":34},"generated":{"line":1,"column":978}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":96,"column":41},"generated":{"line":1,"column":985}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":96,"column":44},"generated":{"line":1,"column":987}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":96,"column":47},"generated":{"line":1,"column":990}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":96,"column":51},"generated":{"line":1,"column":993}},{"source":"../../../src/utils/typed-array-manager.ts","name":"sizeToAllocate","original":{"line":96,"column":54},"generated":{"line":1,"column":995}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":101,"column":6},"generated":{"line":1,"column":998}},{"source":"../../../src/utils/typed-array-manager.ts","name":"initialize","original":{"line":97,"column":10},"generated":{"line":1,"column":1005}},{"source":"../../../src/utils/typed-array-manager.ts","name":"array","original":{"line":99,"column":8},"generated":{"line":1,"column":1008}},{"source":"../../../src/utils/typed-array-manager.ts","name":"fill","original":{"line":99,"column":14},"generated":{"line":1,"column":1010}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":99,"column":19},"generated":{"line":1,"column":1015}},{"source":"../../../src/utils/typed-array-manager.ts","name":"array","original":{"line":101,"column":13},"generated":{"line":1,"column":1018}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":103,"column":4},"generated":{"line":1,"column":1020}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":103,"column":11},"generated":{"line":1,"column":1027}},{"source":"../../../src/utils/typed-array-manager.ts","name":"Type","original":{"line":103,"column":15},"generated":{"line":1,"column":1031}},{"source":"../../../src/utils/typed-array-manager.ts","name":"sizeToAllocate","original":{"line":103,"column":20},"generated":{"line":1,"column":1033}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_release","original":{"line":106,"column":10},"generated":{"line":1,"column":1036}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":106,"column":19},"generated":{"line":1,"column":1045}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":107,"column":4},"generated":{"line":1,"column":1048}},{"source":"../../../src/utils/typed-array-manager.ts","name":"ArrayBuffer","original":{"line":107,"column":9},"generated":{"line":1,"column":1052}},{"source":"../../../src/utils/typed-array-manager.ts","name":"isView","original":{"line":107,"column":21},"generated":{"line":1,"column":1064}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":107,"column":28},"generated":{"line":1,"column":1071}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":1,"column":1074}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":110,"column":4},"generated":{"line":1,"column":1081}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":110,"column":10},"generated":{"line":1,"column":1087}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":110,"column":17},"generated":{"line":1,"column":1089}},{"source":"../../../src/utils/typed-array-manager.ts","name":"_pool","original":{"line":110,"column":22},"generated":{"line":1,"column":1094}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":111,"column":10},"generated":{"line":1,"column":1101}},{"source":"../../../src/utils/typed-array-manager.ts","name":"buffer","original":{"line":111,"column":11},"generated":{"line":1,"column":1108}},{"source":"../../../src/utils/typed-array-manager.ts","name":"typedArray","original":{"line":111,"column":21},"generated":{"line":1,"column":1111}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":115,"column":10},"generated":{"line":1,"column":1114}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":115,"column":11},"generated":{"line":1,"column":1125}},{"source":"../../../src/utils/typed-array-manager.ts","name":"buffer","original":{"line":115,"column":25},"generated":{"line":1,"column":1128}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":116,"column":10},"generated":{"line":1,"column":1130}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":116,"column":14},"generated":{"line":1,"column":1132}},{"source":"../../../src/utils/typed-array-manager.ts","name":"findIndex","original":{"line":116,"column":19},"generated":{"line":1,"column":1134}},{"source":"../../../src/utils/typed-array-manager.ts","name":"b","original":{"line":116,"column":29},"generated":{"line":1,"column":1144}},{"source":"../../../src/utils/typed-array-manager.ts","name":"b","original":{"line":116,"column":34},"generated":{"line":1,"column":1147}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":116,"column":36},"generated":{"line":1,"column":1149}},{"source":"../../../src/utils/typed-array-manager.ts","name":"byteLength","original":{"line":116,"column":50},"generated":{"line":1,"column":1161}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":117,"column":8},"generated":{"line":1,"column":1164}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":117,"column":12},"generated":{"line":1,"column":1166}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":118,"column":6},"generated":{"line":1,"column":1168}},{"source":"../../../src/utils/typed-array-manager.ts","name":"push","original":{"line":118,"column":11},"generated":{"line":1,"column":1170}},{"source":"../../../src/utils/typed-array-manager.ts","name":"buffer","original":{"line":118,"column":16},"generated":{"line":1,"column":1175}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":119,"column":15},"generated":{"line":1,"column":1179}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":119,"column":19},"generated":{"line":1,"column":1181}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":119,"column":24},"generated":{"line":1,"column":1184}},{"source":"../../../src/utils/typed-array-manager.ts","name":"length","original":{"line":119,"column":29},"generated":{"line":1,"column":1186}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":119,"column":38},"generated":{"line":1,"column":1193}},{"source":"../../../src/utils/typed-array-manager.ts","name":"opts","original":{"line":119,"column":43},"generated":{"line":1,"column":1198}},{"source":"../../../src/utils/typed-array-manager.ts","name":"poolSize","original":{"line":119,"column":48},"generated":{"line":1,"column":1203}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":120,"column":6},"generated":{"line":1,"column":1214}},{"source":"../../../src/utils/typed-array-manager.ts","name":"splice","original":{"line":120,"column":11},"generated":{"line":1,"column":1216}},{"source":"../../../src/utils/typed-array-manager.ts","name":"i","original":{"line":120,"column":18},"generated":{"line":1,"column":1223}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":120,"column":21},"generated":{"line":1,"column":1225}},{"source":"../../../src/utils/typed-array-manager.ts","name":"buffer","original":{"line":120,"column":24},"generated":{"line":1,"column":1227}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":122,"column":8},"generated":{"line":1,"column":1230}},{"source":"../../../src/utils/typed-array-manager.ts","name":"length","original":{"line":122,"column":13},"generated":{"line":1,"column":1232}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":122,"column":22},"generated":{"line":1,"column":1239}},{"source":"../../../src/utils/typed-array-manager.ts","name":"opts","original":{"line":122,"column":27},"generated":{"line":1,"column":1244}},{"source":"../../../src/utils/typed-array-manager.ts","name":"poolSize","original":{"line":122,"column":32},"generated":{"line":1,"column":1249}},{"source":"../../../src/utils/typed-array-manager.ts","name":"pool","original":{"line":124,"column":6},"generated":{"line":1,"column":1259}},{"source":"../../../src/utils/typed-array-manager.ts","name":"shift","original":{"line":124,"column":11},"generated":{"line":1,"column":1261}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":1270}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":1278}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":1296}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":1298}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":1302}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":15},"generated":{"line":1,"column":1304}},{"source":"../../../src/utils/typed-array-manager.ts","name":"TypedArrayManager","original":{"line":129,"column":19},"generated":{"line":1,"column":1308}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":1310}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":1318}},{"source":"../../../src/utils/typed-array-manager.ts","name":null,"original":{"line":129,"column":0},"generated":{"line":1,"column":1326}}],"sources":{"../../../src/utils/typed-array-manager.ts":"import {TypedArray, TypedArrayConstructor} from '../types/types';\n\nexport type TypedArrayManagerOptions = {\n  overAlloc?: number;\n  poolSize?: number;\n};\n\nexport class TypedArrayManager {\n  private _pool: ArrayBuffer[] = [];\n  opts: {\n    overAlloc: number;\n    poolSize: number;\n  } = {overAlloc: 2, poolSize: 100};\n\n  constructor(options: TypedArrayManagerOptions = {}) {\n    this.setOptions(options);\n  }\n\n  setOptions(options: TypedArrayManagerOptions) {\n    Object.assign(this.opts, options);\n  }\n\n  allocate<T extends TypedArray>(\n    typedArray: T | null | undefined,\n    count: number,\n    {\n      size = 1,\n      type,\n      padding = 0,\n      copy = false,\n      initialize = false,\n      maxCount\n    }: {\n      size?: number;\n      type?: TypedArrayConstructor;\n      padding?: number;\n      copy?: boolean;\n      initialize?: boolean;\n      maxCount?: number;\n    }\n  ): T {\n    const Type =\n      type || (typedArray && (typedArray.constructor as TypedArrayConstructor)) || Float32Array;\n\n    const newSize = count * size + padding;\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize) as T;\n      }\n    }\n\n    let maxSize: number = Infinity;\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      // Hack - always initialize the first 4 elements. NaNs crash the Attribute validation\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n    return newArray as T;\n  }\n\n  release(typedArray: TypedArray | null | undefined) {\n    this._release(typedArray);\n  }\n\n  private _allocate(\n    Type: TypedArrayConstructor,\n    size: number,\n    initialize: boolean,\n    maxSize: number\n  ): TypedArray {\n    // Allocate at least one element to ensure a valid buffer\n    let sizeToAllocate = Math.max(Math.ceil(size * this.opts.overAlloc), 1);\n    // Don't over allocate after certain specified number of elements\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    // Check if available in pool\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n    if (i >= 0) {\n      // Create a new array using an existing buffer\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n      if (initialize) {\n        // Viewing a buffer with a different type may create NaNs\n        array.fill(0);\n      }\n      return array;\n    }\n    return new Type(sizeToAllocate);\n  }\n\n  private _release(typedArray: TypedArray | null | undefined): void {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n    const pool = this._pool;\n    const {buffer} = typedArray;\n    // Save the buffer of the released array into the pool\n    // Sort buffers by size\n    // TODO - implement binary search?\n    const {byteLength} = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.opts.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n    if (pool.length > this.opts.poolSize) {\n      // Drop the smallest one\n      pool.shift();\n    }\n  }\n}\n\nexport default new TypedArrayManager();\n"},"lineCount":null}},"error":null,"hash":"fe4d3d01bbfc00b3911130bbb02d9682","cacheData":{"env":{}}}