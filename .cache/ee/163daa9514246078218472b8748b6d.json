{"id":"ZKrJ","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/uniform-buffer-layout.js.map","includedInParent":true,"mtime":1688284130571},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/package.json","includedInParent":true,"mtime":1688284130571},{"name":"../webgl-utils/attribute-utils","loc":{"line":1,"column":41,"index":41},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/uniform-buffer-layout.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js"},{"name":"../utils/assert","loc":{"line":2,"column":23,"index":98},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/uniform-buffer-layout.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=require(\"../webgl-utils/attribute-utils\"),s=require(\"../utils/assert\");const e=\"UniformBufferLayout illegal argument\",i=5126,r=5124,a=5125;class o{constructor(t){this.layout={},this.size=0;for(const e in t)this._addUniform(e,t[e]);this.size+=(4-this.size%4)%4;const s=new Float32Array(this.size);this.typedArray={[i]:s,[r]:new Int32Array(s.buffer),[a]:new Uint32Array(s.buffer)}}getBytes(){return 4*this.size}getData(){return this.typedArray[i]}getSubData(t){let s,e;if(void 0===t)s=this.data,e=0;else{const i=this.offsets[t],r=i+this.sizes[t];s=this.data.subarray(i,r),e=4*i}return{data:s,offset:e}}setUniforms(t){for(const s in t)this._setValue(s,t[s]);return this}_setValue(t,e){const i=this.layout[t];(0,s.assert)(i,\"UniformLayoutStd140 illegal argument\");const r=this.typedArray[i.type];1===i.size?r[i.offset]=e:r.set(e,i.offset)}_addUniform(i,r){const a=(0,t.decomposeCompositeGLType)(r);(0,s.assert)(a,e);const{type:o,components:n}=a;this.size=this._alignTo(this.size,n);const u=this.size;this.size+=n,this.layout[i]={type:o,size:n,offset:u}}_alignTo(t,s){switch(s){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}}exports.default=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":0}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":13}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":20}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":35}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":43}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":56}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":57}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":64}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":68}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":76}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":89}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":91}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":97}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":105}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":139}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":141}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":149}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":168}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"ERR_ARGUMENT","original":{"line":7,"column":6},"generated":{"line":1,"column":174}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":7,"column":21},"generated":{"line":1,"column":176}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_FLOAT","original":{"line":10,"column":6},"generated":{"line":1,"column":215}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":10,"column":17},"generated":{"line":1,"column":217}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_INT","original":{"line":11,"column":6},"generated":{"line":1,"column":222}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":11,"column":15},"generated":{"line":1,"column":224}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_UNSIGNED_INT","original":{"line":12,"column":6},"generated":{"line":1,"column":229}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":12,"column":24},"generated":{"line":1,"column":231}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":15},"generated":{"line":1,"column":236}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"UniformBufferLayout","original":{"line":15,"column":21},"generated":{"line":1,"column":242}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"constructor","original":{"line":16,"column":2},"generated":{"line":1,"column":244}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":16,"column":14},"generated":{"line":1,"column":256}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":259}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":17,"column":9},"generated":{"line":1,"column":264}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":17,"column":18},"generated":{"line":1,"column":271}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":18,"column":4},"generated":{"line":1,"column":274}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":18,"column":9},"generated":{"line":1,"column":279}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":18,"column":16},"generated":{"line":1,"column":284}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":286}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":21,"column":9},"generated":{"line":1,"column":290}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":21,"column":15},"generated":{"line":1,"column":296}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":21,"column":22},"generated":{"line":1,"column":301}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":22,"column":6},"generated":{"line":1,"column":303}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"_addUniform","original":{"line":22,"column":11},"generated":{"line":1,"column":308}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":22,"column":23},"generated":{"line":1,"column":320}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":22,"column":28},"generated":{"line":1,"column":322}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":22,"column":35},"generated":{"line":1,"column":324}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":328}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":25,"column":9},"generated":{"line":1,"column":333}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":25,"column":18},"generated":{"line":1,"column":340}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":25,"column":23},"generated":{"line":1,"column":342}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":25,"column":28},"generated":{"line":1,"column":347}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":25,"column":35},"generated":{"line":1,"column":352}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":355}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":28,"column":4},"generated":{"line":1,"column":357}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":28,"column":10},"generated":{"line":1,"column":363}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":28,"column":17},"generated":{"line":1,"column":365}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"Float32Array","original":{"line":28,"column":21},"generated":{"line":1,"column":369}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":28,"column":34},"generated":{"line":1,"column":382}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":28,"column":39},"generated":{"line":1,"column":387}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":393}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typedArray","original":{"line":29,"column":9},"generated":{"line":1,"column":398}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":29,"column":22},"generated":{"line":1,"column":409}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":30,"column":6},"generated":{"line":1,"column":410}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_FLOAT","original":{"line":30,"column":7},"generated":{"line":1,"column":411}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":30,"column":18},"generated":{"line":1,"column":414}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":31,"column":6},"generated":{"line":1,"column":416}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_INT","original":{"line":31,"column":7},"generated":{"line":1,"column":417}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":420}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"Int32Array","original":{"line":31,"column":20},"generated":{"line":1,"column":424}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":31,"column":31},"generated":{"line":1,"column":435}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"buffer","original":{"line":31,"column":36},"generated":{"line":1,"column":437}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":445}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_UNSIGNED_INT","original":{"line":32,"column":7},"generated":{"line":1,"column":446}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":32,"column":25},"generated":{"line":1,"column":449}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"Uint32Array","original":{"line":32,"column":29},"generated":{"line":1,"column":453}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":32,"column":41},"generated":{"line":1,"column":465}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"buffer","original":{"line":32,"column":46},"generated":{"line":1,"column":467}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"getBytes","original":{"line":37,"column":2},"generated":{"line":1,"column":476}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":487}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":38,"column":23},"generated":{"line":1,"column":494}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":38,"column":11},"generated":{"line":1,"column":496}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":38,"column":16},"generated":{"line":1,"column":501}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"getData","original":{"line":42,"column":2},"generated":{"line":1,"column":506}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":516}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":523}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typedArray","original":{"line":43,"column":16},"generated":{"line":1,"column":528}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"GL_FLOAT","original":{"line":43,"column":27},"generated":{"line":1,"column":539}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"getSubData","original":{"line":47,"column":2},"generated":{"line":1,"column":542}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"index","original":{"line":47,"column":13},"generated":{"line":1,"column":553}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":48,"column":4},"generated":{"line":1,"column":556}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":48,"column":8},"generated":{"line":1,"column":560}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":49,"column":8},"generated":{"line":1,"column":562}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":50,"column":4},"generated":{"line":1,"column":564}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"undefined","original":{"line":50,"column":18},"generated":{"line":1,"column":572}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"index","original":{"line":50,"column":8},"generated":{"line":1,"column":576}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":51,"column":6},"generated":{"line":1,"column":578}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":580}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":51,"column":18},"generated":{"line":1,"column":585}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":52,"column":6},"generated":{"line":1,"column":590}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":52,"column":15},"generated":{"line":1,"column":592}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":598}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":599}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"begin","original":{"line":54,"column":12},"generated":{"line":1,"column":605}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":54,"column":20},"generated":{"line":1,"column":607}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offsets","original":{"line":54,"column":25},"generated":{"line":1,"column":612}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"index","original":{"line":54,"column":33},"generated":{"line":1,"column":620}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"end","original":{"line":55,"column":12},"generated":{"line":1,"column":623}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"begin","original":{"line":55,"column":18},"generated":{"line":1,"column":625}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":55,"column":26},"generated":{"line":1,"column":627}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"sizes","original":{"line":55,"column":31},"generated":{"line":1,"column":632}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"index","original":{"line":55,"column":37},"generated":{"line":1,"column":638}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":56,"column":6},"generated":{"line":1,"column":641}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":56,"column":13},"generated":{"line":1,"column":643}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":56,"column":18},"generated":{"line":1,"column":648}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"subarray","original":{"line":56,"column":23},"generated":{"line":1,"column":653}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"begin","original":{"line":56,"column":32},"generated":{"line":1,"column":662}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"end","original":{"line":56,"column":39},"generated":{"line":1,"column":664}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":57,"column":6},"generated":{"line":1,"column":667}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":57,"column":23},"generated":{"line":1,"column":669}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"begin","original":{"line":57,"column":15},"generated":{"line":1,"column":671}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":673}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":679}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":59,"column":12},"generated":{"line":1,"column":680}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"data","original":{"line":59,"column":12},"generated":{"line":1,"column":685}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":59,"column":18},"generated":{"line":1,"column":687}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":59,"column":18},"generated":{"line":1,"column":694}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"setUniforms","original":{"line":63,"column":2},"generated":{"line":1,"column":697}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"values","original":{"line":63,"column":14},"generated":{"line":1,"column":709}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":64,"column":4},"generated":{"line":1,"column":712}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":64,"column":9},"generated":{"line":1,"column":716}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":64,"column":15},"generated":{"line":1,"column":722}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"values","original":{"line":64,"column":22},"generated":{"line":1,"column":727}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":65,"column":6},"generated":{"line":1,"column":729}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"_setValue","original":{"line":65,"column":11},"generated":{"line":1,"column":734}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":65,"column":21},"generated":{"line":1,"column":744}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"values","original":{"line":65,"column":26},"generated":{"line":1,"column":746}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":65,"column":33},"generated":{"line":1,"column":748}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":67,"column":4},"generated":{"line":1,"column":752}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":67,"column":11},"generated":{"line":1,"column":759}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"_setValue","original":{"line":70,"column":2},"generated":{"line":1,"column":764}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":70,"column":12},"generated":{"line":1,"column":774}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"value","original":{"line":70,"column":17},"generated":{"line":1,"column":776}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":71,"column":4},"generated":{"line":1,"column":779}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":71,"column":10},"generated":{"line":1,"column":785}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":71,"column":19},"generated":{"line":1,"column":787}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":71,"column":24},"generated":{"line":1,"column":792}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":71,"column":31},"generated":{"line":1,"column":799}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"assert","original":{"line":72,"column":4},"generated":{"line":1,"column":803}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"assert","original":{"line":72,"column":4},"generated":{"line":1,"column":805}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":72,"column":10},"generated":{"line":1,"column":807}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":72,"column":11},"generated":{"line":1,"column":815}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":72,"column":19},"generated":{"line":1,"column":817}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":73,"column":4},"generated":{"line":1,"column":857}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typedArray","original":{"line":73,"column":10},"generated":{"line":1,"column":863}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":73,"column":23},"generated":{"line":1,"column":865}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typedArray","original":{"line":73,"column":28},"generated":{"line":1,"column":870}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":73,"column":39},"generated":{"line":1,"column":881}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"type","original":{"line":73,"column":46},"generated":{"line":1,"column":883}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":74,"column":24},"generated":{"line":1,"column":889}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":74,"column":8},"generated":{"line":1,"column":893}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":74,"column":15},"generated":{"line":1,"column":895}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typedArray","original":{"line":76,"column":6},"generated":{"line":1,"column":900}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":76,"column":17},"generated":{"line":1,"column":902}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":76,"column":24},"generated":{"line":1,"column":904}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"value","original":{"line":76,"column":34},"generated":{"line":1,"column":912}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typedArray","original":{"line":79,"column":6},"generated":{"line":1,"column":914}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"set","original":{"line":79,"column":17},"generated":{"line":1,"column":916}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"value","original":{"line":79,"column":21},"generated":{"line":1,"column":920}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":79,"column":28},"generated":{"line":1,"column":922}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":79,"column":35},"generated":{"line":1,"column":924}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"_addUniform","original":{"line":83,"column":2},"generated":{"line":1,"column":932}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":83,"column":14},"generated":{"line":1,"column":944}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"uniformType","original":{"line":83,"column":19},"generated":{"line":1,"column":946}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":84,"column":4},"generated":{"line":1,"column":949}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typeAndComponents","original":{"line":84,"column":10},"generated":{"line":1,"column":955}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"decomposeCompositeGLType","original":{"line":84,"column":30},"generated":{"line":1,"column":958}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"decomposeCompositeGLType","original":{"line":84,"column":30},"generated":{"line":1,"column":960}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":84,"column":54},"generated":{"line":1,"column":962}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"uniformType","original":{"line":84,"column":55},"generated":{"line":1,"column":988}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"assert","original":{"line":85,"column":4},"generated":{"line":1,"column":992}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"assert","original":{"line":85,"column":4},"generated":{"line":1,"column":994}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":85,"column":10},"generated":{"line":1,"column":996}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typeAndComponents","original":{"line":85,"column":11},"generated":{"line":1,"column":1004}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"ERR_ARGUMENT","original":{"line":85,"column":30},"generated":{"line":1,"column":1006}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":1009}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":86,"column":10},"generated":{"line":1,"column":1015}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"type","original":{"line":86,"column":11},"generated":{"line":1,"column":1020}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"components","original":{"line":86,"column":17},"generated":{"line":1,"column":1022}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"count","original":{"line":86,"column":29},"generated":{"line":1,"column":1033}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"typeAndComponents","original":{"line":86,"column":38},"generated":{"line":1,"column":1036}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":89,"column":4},"generated":{"line":1,"column":1038}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":89,"column":9},"generated":{"line":1,"column":1043}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":89,"column":16},"generated":{"line":1,"column":1048}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"_alignTo","original":{"line":89,"column":21},"generated":{"line":1,"column":1053}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":89,"column":30},"generated":{"line":1,"column":1062}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":89,"column":35},"generated":{"line":1,"column":1067}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"count","original":{"line":89,"column":41},"generated":{"line":1,"column":1072}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":91,"column":4},"generated":{"line":1,"column":1075}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":91,"column":10},"generated":{"line":1,"column":1081}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":91,"column":19},"generated":{"line":1,"column":1083}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":91,"column":24},"generated":{"line":1,"column":1088}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":93,"column":4},"generated":{"line":1,"column":1093}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":93,"column":9},"generated":{"line":1,"column":1098}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"count","original":{"line":93,"column":17},"generated":{"line":1,"column":1104}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":95,"column":4},"generated":{"line":1,"column":1106}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"layout","original":{"line":95,"column":9},"generated":{"line":1,"column":1111}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"key","original":{"line":95,"column":16},"generated":{"line":1,"column":1118}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":95,"column":23},"generated":{"line":1,"column":1121}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"type","original":{"line":95,"column":24},"generated":{"line":1,"column":1122}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"type","original":{"line":95,"column":24},"generated":{"line":1,"column":1127}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":95,"column":30},"generated":{"line":1,"column":1129}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"count","original":{"line":95,"column":36},"generated":{"line":1,"column":1134}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":95,"column":43},"generated":{"line":1,"column":1136}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"offset","original":{"line":95,"column":43},"generated":{"line":1,"column":1143}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"_alignTo","original":{"line":99,"column":2},"generated":{"line":1,"column":1146}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":99,"column":11},"generated":{"line":1,"column":1155}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"count","original":{"line":99,"column":17},"generated":{"line":1,"column":1157}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":100,"column":4},"generated":{"line":1,"column":1160}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"count","original":{"line":100,"column":12},"generated":{"line":1,"column":1167}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":101,"column":6},"generated":{"line":1,"column":1170}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":101,"column":11},"generated":{"line":1,"column":1175}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":102,"column":8},"generated":{"line":1,"column":1177}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":102,"column":15},"generated":{"line":1,"column":1184}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":103,"column":6},"generated":{"line":1,"column":1186}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":103,"column":11},"generated":{"line":1,"column":1191}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":104,"column":8},"generated":{"line":1,"column":1193}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":104,"column":15},"generated":{"line":1,"column":1200}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":104,"column":23},"generated":{"line":1,"column":1202}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":104,"column":30},"generated":{"line":1,"column":1204}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":105,"column":6},"generated":{"line":1,"column":1206}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":106,"column":8},"generated":{"line":1,"column":1214}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":106,"column":15},"generated":{"line":1,"column":1221}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":106,"column":24},"generated":{"line":1,"column":1224}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":"size","original":{"line":106,"column":29},"generated":{"line":1,"column":1226}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":106,"column":36},"generated":{"line":1,"column":1228}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":106,"column":42},"generated":{"line":1,"column":1231}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":1235}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":1243}},{"source":"../../../src/classes/uniform-buffer-layout.js","name":null,"original":{"line":15,"column":41},"generated":{"line":1,"column":1251}}],"sources":{"../../../src/classes/uniform-buffer-layout.js":"// @ts-nocheck\n\n/* eslint-disable camelcase */\nimport {decomposeCompositeGLType} from '../webgl-utils/attribute-utils';\nimport {assert} from '../utils/assert';\n\nconst ERR_ARGUMENT = 'UniformBufferLayout illegal argument';\n\n// Local constants - these will \"collapse\" during minification\nconst GL_FLOAT = 0x1406;\nconst GL_INT = 0x1404;\nconst GL_UNSIGNED_INT = 0x1405;\n\n// Std140 layout for uniforms\nexport default class UniformBufferLayout {\n  constructor(layout) {\n    this.layout = {};\n    this.size = 0;\n\n    // Add layout (type, size and offset) definitions for each uniform in the layout\n    for (const key in layout) {\n      this._addUniform(key, layout[key]);\n    }\n\n    this.size += (4 - (this.size % 4)) % 4;\n\n    // Allocate three typed arrays pointing at same memory\n    const data = new Float32Array(this.size);\n    this.typedArray = {\n      [GL_FLOAT]: data,\n      [GL_INT]: new Int32Array(data.buffer),\n      [GL_UNSIGNED_INT]: new Uint32Array(data.buffer)\n    };\n  }\n\n  // Get number of bytes needed for buffer allocation\n  getBytes() {\n    return this.size * 4;\n  }\n\n  // Get the current data as Float32Array, for bufferSubData\n  getData() {\n    return this.typedArray[GL_FLOAT];\n  }\n\n  // Get offset and data for one object (for bufferSubData)\n  getSubData(index) {\n    let data;\n    let offset;\n    if (index === undefined) {\n      data = this.data;\n      offset = 0;\n    } else {\n      const begin = this.offsets[index];\n      const end = begin + this.sizes[index];\n      data = this.data.subarray(begin, end);\n      offset = begin * 4;\n    }\n    return {data, offset};\n  }\n\n  // Set a map of values\n  setUniforms(values) {\n    for (const key in values) {\n      this._setValue(key, values[key]);\n    }\n    return this;\n  }\n\n  _setValue(key, value) {\n    const layout = this.layout[key];\n    assert(layout, 'UniformLayoutStd140 illegal argument');\n    const typedArray = this.typedArray[layout.type];\n    if (layout.size === 1) {\n      // single value -> just set it\n      typedArray[layout.offset] = value;\n    } else {\n      // vector/matrix -> copy the supplied (typed) array, starting from offset\n      typedArray.set(value, layout.offset);\n    }\n  }\n\n  _addUniform(key, uniformType) {\n    const typeAndComponents = decomposeCompositeGLType(uniformType);\n    assert(typeAndComponents, ERR_ARGUMENT);\n    const {type, components: count} = typeAndComponents;\n\n    // First, align (bump) current offset to an even multiple of current object (1, 2, 4)\n    this.size = this._alignTo(this.size, count);\n    // Use the aligned size as the offset of the current uniform.\n    const offset = this.size;\n    // Then, add our object's padded size ((1, 2, multiple of 4) to the current offset\n    this.size += count;\n\n    this.layout[key] = {type, size: count, offset};\n  }\n\n  // Align offset to 1, 2 or 4 elements (4, 8 or 16 bytes)\n  _alignTo(size, count) {\n    switch (count) {\n      case 1:\n        return size; // Pad upwards to even multiple of 2\n      case 2:\n        return size + (size % 2); // Pad upwards to even multiple of 2\n      default:\n        return size + ((4 - (size % 4)) % 4); // Pad upwards to even multiple of 4\n    }\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"e274f7ceaaeb79bde9a22d9115703770","cacheData":{"env":{}}}