{"id":"utYa","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/query.js.map","includedInParent":true,"mtime":1688284130571},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/package.json","includedInParent":true,"mtime":1688284130571},{"name":"./resource","loc":{"line":1,"column":21,"index":21},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/query.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"},{"name":"../features","loc":{"line":2,"column":38,"index":73},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/query.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/features/index.js"},{"name":"@luma.gl/gltools","loc":{"line":3,"column":25,"index":113},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/query.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/gltools/dist/esm/index.js"},{"name":"../utils/assert","loc":{"line":4,"column":23,"index":156},"parent":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/classes/query.js","resolved":"/project/deck-gl-examples-01/node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=s(require(\"./resource\")),t=require(\"../features\"),i=require(\"@luma.gl/gltools\"),r=require(\"../utils/assert\");function s(e){return e&&e.__esModule?e:{default:e}}const l=34918,n=34919,u=35007,a=36795,h=35976,o=35887,g=36202;class d extends e.default{get[Symbol.toStringTag](){return\"Query\"}static isSupported(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const l=(0,i.isWebGL2)(e),n=(0,t.hasFeatures)(e,t.FEATURES.TIMER_QUERY);let u=l||n;for(const t of s)switch(t){case\"queries\":u=u&&l;break;case\"timers\":u=u&&n;break;default:(0,r.assert)(!1)}return u}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(u)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?g:o)}beginTransformFeedbackQuery(){return this.begin(h)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,n);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(a)}getResult(){return this.gl2.getQueryParameter(this.handle,l)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r(\"Timed out\"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return d.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}exports.default=d;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":0}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":13}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":20}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":35}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":43}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":56}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":57}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":64}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":68}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":76}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":89}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":91}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":97}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":99}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":107}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":122}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":124}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":132}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":147}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":149}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":157}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":177}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":179}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":187}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":206}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":215}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":217}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":220}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":227}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":230}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":232}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":243}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":245}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":246}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":254}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":257}},{"source":"../../../src/classes/query.js","name":"GL_QUERY_RESULT","original":{"line":7,"column":6},"generated":{"line":1,"column":263}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":7,"column":24},"generated":{"line":1,"column":265}},{"source":"../../../src/classes/query.js","name":"GL_QUERY_RESULT_AVAILABLE","original":{"line":8,"column":6},"generated":{"line":1,"column":271}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":8,"column":34},"generated":{"line":1,"column":273}},{"source":"../../../src/classes/query.js","name":"GL_TIME_ELAPSED_EXT","original":{"line":10,"column":6},"generated":{"line":1,"column":279}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":10,"column":28},"generated":{"line":1,"column":281}},{"source":"../../../src/classes/query.js","name":"GL_GPU_DISJOINT_EXT","original":{"line":11,"column":6},"generated":{"line":1,"column":287}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":11,"column":28},"generated":{"line":1,"column":289}},{"source":"../../../src/classes/query.js","name":"GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","original":{"line":13,"column":6},"generated":{"line":1,"column":295}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":13,"column":49},"generated":{"line":1,"column":297}},{"source":"../../../src/classes/query.js","name":"GL_ANY_SAMPLES_PASSED","original":{"line":14,"column":6},"generated":{"line":1,"column":303}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":14,"column":30},"generated":{"line":1,"column":305}},{"source":"../../../src/classes/query.js","name":"GL_ANY_SAMPLES_PASSED_CONSERVATIVE","original":{"line":15,"column":6},"generated":{"line":1,"column":311}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":15,"column":43},"generated":{"line":1,"column":313}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":15},"generated":{"line":1,"column":319}},{"source":"../../../src/classes/query.js","name":"Query","original":{"line":17,"column":21},"generated":{"line":1,"column":325}},{"source":"../../../src/classes/query.js","name":"Resource","original":{"line":17,"column":35},"generated":{"line":1,"column":335}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":15},"generated":{"line":1,"column":337}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":19,"column":25},"generated":{"line":1,"column":345}},{"source":"../../../src/classes/query.js","name":"Symbol","original":{"line":19,"column":7},"generated":{"line":1,"column":349}},{"source":"../../../src/classes/query.js","name":"toStringTag","original":{"line":19,"column":14},"generated":{"line":1,"column":356}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":20,"column":4},"generated":{"line":1,"column":371}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":20,"column":11},"generated":{"line":1,"column":377}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":385}},{"source":"../../../src/classes/query.js","name":"gl","original":{"line":24,"column":21},"generated":{"line":1,"column":404}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":407}},{"source":"../../../src/classes/query.js","name":"opts","original":{"line":24,"column":25},"generated":{"line":1,"column":411}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":413}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":423}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":430}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":438}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":442}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":452}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":455}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":36},"generated":{"line":1,"column":465}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":24,"column":32},"generated":{"line":1,"column":468}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":471}},{"source":"../../../src/classes/query.js","name":"webgl2","original":{"line":25,"column":10},"generated":{"line":1,"column":477}},{"source":"../../../src/classes/query.js","name":"isWebGL2","original":{"line":25,"column":19},"generated":{"line":1,"column":480}},{"source":"../../../src/classes/query.js","name":"isWebGL2","original":{"line":25,"column":19},"generated":{"line":1,"column":482}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":25,"column":27},"generated":{"line":1,"column":484}},{"source":"../../../src/classes/query.js","name":"gl","original":{"line":25,"column":28},"generated":{"line":1,"column":494}},{"source":"../../../src/classes/query.js","name":"hasTimerQuery","original":{"line":28,"column":10},"generated":{"line":1,"column":497}},{"source":"../../../src/classes/query.js","name":"hasFeatures","original":{"line":28,"column":26},"generated":{"line":1,"column":500}},{"source":"../../../src/classes/query.js","name":"hasFeatures","original":{"line":28,"column":26},"generated":{"line":1,"column":502}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":28,"column":37},"generated":{"line":1,"column":504}},{"source":"../../../src/classes/query.js","name":"gl","original":{"line":28,"column":38},"generated":{"line":1,"column":517}},{"source":"../../../src/classes/query.js","name":"FEATURES","original":{"line":28,"column":42},"generated":{"line":1,"column":519}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":28,"column":50},"generated":{"line":1,"column":521}},{"source":"../../../src/classes/query.js","name":"TIMER_QUERY","original":{"line":28,"column":51},"generated":{"line":1,"column":530}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":29,"column":4},"generated":{"line":1,"column":543}},{"source":"../../../src/classes/query.js","name":"supported","original":{"line":29,"column":8},"generated":{"line":1,"column":547}},{"source":"../../../src/classes/query.js","name":"webgl2","original":{"line":29,"column":20},"generated":{"line":1,"column":549}},{"source":"../../../src/classes/query.js","name":"hasTimerQuery","original":{"line":29,"column":30},"generated":{"line":1,"column":552}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":554}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":31,"column":9},"generated":{"line":1,"column":558}},{"source":"../../../src/classes/query.js","name":"key","original":{"line":31,"column":15},"generated":{"line":1,"column":564}},{"source":"../../../src/classes/query.js","name":"opts","original":{"line":31,"column":22},"generated":{"line":1,"column":569}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":571}},{"source":"../../../src/classes/query.js","name":"key","original":{"line":32,"column":14},"generated":{"line":1,"column":578}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":581}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":585}},{"source":"../../../src/classes/query.js","name":"supported","original":{"line":34,"column":10},"generated":{"line":1,"column":595}},{"source":"../../../src/classes/query.js","name":"supported","original":{"line":34,"column":22},"generated":{"line":1,"column":597}},{"source":"../../../src/classes/query.js","name":"webgl2","original":{"line":34,"column":35},"generated":{"line":1,"column":600}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":35,"column":10},"generated":{"line":1,"column":602}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":608}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":36,"column":13},"generated":{"line":1,"column":612}},{"source":"../../../src/classes/query.js","name":"supported","original":{"line":37,"column":10},"generated":{"line":1,"column":621}},{"source":"../../../src/classes/query.js","name":"supported","original":{"line":37,"column":22},"generated":{"line":1,"column":623}},{"source":"../../../src/classes/query.js","name":"hasTimerQuery","original":{"line":37,"column":35},"generated":{"line":1,"column":626}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":628}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":634}},{"source":"../../../src/classes/query.js","name":"assert","original":{"line":40,"column":10},"generated":{"line":1,"column":643}},{"source":"../../../src/classes/query.js","name":"assert","original":{"line":40,"column":10},"generated":{"line":1,"column":645}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":647}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":40,"column":17},"generated":{"line":1,"column":656}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":659}},{"source":"../../../src/classes/query.js","name":"supported","original":{"line":44,"column":11},"generated":{"line":1,"column":666}},{"source":"../../../src/classes/query.js","name":"constructor","original":{"line":48,"column":2},"generated":{"line":1,"column":668}},{"source":"../../../src/classes/query.js","name":"gl","original":{"line":48,"column":14},"generated":{"line":1,"column":680}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":49,"column":4},"generated":{"line":1,"column":683}},{"source":"../../../src/classes/query.js","name":"gl","original":{"line":49,"column":10},"generated":{"line":1,"column":689}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":691}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":701}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":708}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":716}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":720}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":730}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":733}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":743}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":48,"column":25},"generated":{"line":1,"column":746}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":51,"column":4},"generated":{"line":1,"column":750}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":51,"column":9},"generated":{"line":1,"column":755}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":51,"column":18},"generated":{"line":1,"column":762}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":767}},{"source":"../../../src/classes/query.js","name":"_queryPending","original":{"line":52,"column":9},"generated":{"line":1,"column":772}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":52,"column":25},"generated":{"line":1,"column":787}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":53,"column":4},"generated":{"line":1,"column":789}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":53,"column":9},"generated":{"line":1,"column":794}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":53,"column":27},"generated":{"line":1,"column":810}},{"source":"../../../src/classes/query.js","name":"Object","original":{"line":55,"column":4},"generated":{"line":1,"column":815}},{"source":"../../../src/classes/query.js","name":"seal","original":{"line":55,"column":11},"generated":{"line":1,"column":822}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":55,"column":16},"generated":{"line":1,"column":827}},{"source":"../../../src/classes/query.js","name":"beginTimeElapsedQuery","original":{"line":61,"column":2},"generated":{"line":1,"column":833}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":857}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":62,"column":11},"generated":{"line":1,"column":864}},{"source":"../../../src/classes/query.js","name":"begin","original":{"line":62,"column":16},"generated":{"line":1,"column":869}},{"source":"../../../src/classes/query.js","name":"GL_TIME_ELAPSED_EXT","original":{"line":62,"column":22},"generated":{"line":1,"column":875}},{"source":"../../../src/classes/query.js","name":"beginOcclusionQuery","original":{"line":66,"column":2},"generated":{"line":1,"column":878}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":900}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":22},"generated":{"line":1,"column":904}},{"source":"../../../src/classes/query.js","name":"conservative","original":{"line":66,"column":23},"generated":{"line":1,"column":917}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":38},"generated":{"line":1,"column":920}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":923}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":933}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":940}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":948}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":952}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":962}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":965}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":51},"generated":{"line":1,"column":975}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":66,"column":47},"generated":{"line":1,"column":978}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":67,"column":4},"generated":{"line":1,"column":981}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":67,"column":11},"generated":{"line":1,"column":988}},{"source":"../../../src/classes/query.js","name":"begin","original":{"line":67,"column":16},"generated":{"line":1,"column":993}},{"source":"../../../src/classes/query.js","name":"conservative","original":{"line":67,"column":22},"generated":{"line":1,"column":999}},{"source":"../../../src/classes/query.js","name":"GL_ANY_SAMPLES_PASSED_CONSERVATIVE","original":{"line":67,"column":37},"generated":{"line":1,"column":1001}},{"source":"../../../src/classes/query.js","name":"GL_ANY_SAMPLES_PASSED","original":{"line":67,"column":74},"generated":{"line":1,"column":1003}},{"source":"../../../src/classes/query.js","name":"beginTransformFeedbackQuery","original":{"line":71,"column":2},"generated":{"line":1,"column":1006}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":72,"column":4},"generated":{"line":1,"column":1036}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":1043}},{"source":"../../../src/classes/query.js","name":"begin","original":{"line":72,"column":16},"generated":{"line":1,"column":1048}},{"source":"../../../src/classes/query.js","name":"GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","original":{"line":72,"column":22},"generated":{"line":1,"column":1054}},{"source":"../../../src/classes/query.js","name":"begin","original":{"line":80,"column":2},"generated":{"line":1,"column":1057}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":80,"column":8},"generated":{"line":1,"column":1063}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":1066}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":82,"column":8},"generated":{"line":1,"column":1073}},{"source":"../../../src/classes/query.js","name":"_queryPending","original":{"line":82,"column":13},"generated":{"line":1,"column":1078}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":83,"column":13},"generated":{"line":1,"column":1092}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":1098}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":86,"column":9},"generated":{"line":1,"column":1103}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":86,"column":18},"generated":{"line":1,"column":1110}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":87,"column":4},"generated":{"line":1,"column":1112}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":87,"column":9},"generated":{"line":1,"column":1117}},{"source":"../../../src/classes/query.js","name":"beginQuery","original":{"line":87,"column":13},"generated":{"line":1,"column":1121}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":87,"column":24},"generated":{"line":1,"column":1132}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":87,"column":29},"generated":{"line":1,"column":1137}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":87,"column":37},"generated":{"line":1,"column":1144}},{"source":"../../../src/classes/query.js","name":"handle","original":{"line":87,"column":42},"generated":{"line":1,"column":1149}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":89,"column":11},"generated":{"line":1,"column":1157}},{"source":"../../../src/classes/query.js","name":"end","original":{"line":93,"column":2},"generated":{"line":1,"column":1163}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":95,"column":4},"generated":{"line":1,"column":1169}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":1176}},{"source":"../../../src/classes/query.js","name":"_queryPending","original":{"line":95,"column":13},"generated":{"line":1,"column":1181}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":96,"column":13},"generated":{"line":1,"column":1195}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":99,"column":8},"generated":{"line":1,"column":1201}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":99,"column":13},"generated":{"line":1,"column":1206}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":100,"column":6},"generated":{"line":1,"column":1215}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":100,"column":11},"generated":{"line":1,"column":1220}},{"source":"../../../src/classes/query.js","name":"endQuery","original":{"line":100,"column":15},"generated":{"line":1,"column":1224}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":100,"column":24},"generated":{"line":1,"column":1233}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":100,"column":29},"generated":{"line":1,"column":1238}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":101,"column":6},"generated":{"line":1,"column":1246}},{"source":"../../../src/classes/query.js","name":"target","original":{"line":101,"column":11},"generated":{"line":1,"column":1251}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":101,"column":20},"generated":{"line":1,"column":1258}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":102,"column":6},"generated":{"line":1,"column":1263}},{"source":"../../../src/classes/query.js","name":"_queryPending","original":{"line":102,"column":11},"generated":{"line":1,"column":1268}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":102,"column":27},"generated":{"line":1,"column":1283}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":104,"column":11},"generated":{"line":1,"column":1286}},{"source":"../../../src/classes/query.js","name":"isResultAvailable","original":{"line":108,"column":2},"generated":{"line":1,"column":1292}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":109,"column":4},"generated":{"line":1,"column":1312}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":109,"column":9},"generated":{"line":1,"column":1316}},{"source":"../../../src/classes/query.js","name":"_queryPending","original":{"line":109,"column":14},"generated":{"line":1,"column":1321}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":110,"column":6},"generated":{"line":1,"column":1335}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":110,"column":13},"generated":{"line":1,"column":1342}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":113,"column":4},"generated":{"line":1,"column":1344}},{"source":"../../../src/classes/query.js","name":"resultAvailable","original":{"line":113,"column":10},"generated":{"line":1,"column":1350}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":113,"column":28},"generated":{"line":1,"column":1352}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":113,"column":33},"generated":{"line":1,"column":1357}},{"source":"../../../src/classes/query.js","name":"getQueryParameter","original":{"line":113,"column":37},"generated":{"line":1,"column":1361}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":113,"column":55},"generated":{"line":1,"column":1379}},{"source":"../../../src/classes/query.js","name":"handle","original":{"line":113,"column":60},"generated":{"line":1,"column":1384}},{"source":"../../../src/classes/query.js","name":"GL_QUERY_RESULT_AVAILABLE","original":{"line":113,"column":68},"generated":{"line":1,"column":1391}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":117,"column":4},"generated":{"line":1,"column":1394}},{"source":"../../../src/classes/query.js","name":"resultAvailable","original":{"line":114,"column":8},"generated":{"line":1,"column":1401}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":115,"column":6},"generated":{"line":1,"column":1405}},{"source":"../../../src/classes/query.js","name":"_queryPending","original":{"line":115,"column":11},"generated":{"line":1,"column":1410}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":115,"column":27},"generated":{"line":1,"column":1425}},{"source":"../../../src/classes/query.js","name":"resultAvailable","original":{"line":117,"column":11},"generated":{"line":1,"column":1428}},{"source":"../../../src/classes/query.js","name":"isTimerDisjoint","original":{"line":121,"column":2},"generated":{"line":1,"column":1430}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":122,"column":4},"generated":{"line":1,"column":1448}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":122,"column":11},"generated":{"line":1,"column":1455}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":122,"column":16},"generated":{"line":1,"column":1460}},{"source":"../../../src/classes/query.js","name":"getParameter","original":{"line":122,"column":20},"generated":{"line":1,"column":1464}},{"source":"../../../src/classes/query.js","name":"GL_GPU_DISJOINT_EXT","original":{"line":122,"column":33},"generated":{"line":1,"column":1477}},{"source":"../../../src/classes/query.js","name":"getResult","original":{"line":126,"column":2},"generated":{"line":1,"column":1480}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":127,"column":4},"generated":{"line":1,"column":1492}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":127,"column":11},"generated":{"line":1,"column":1499}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":127,"column":16},"generated":{"line":1,"column":1504}},{"source":"../../../src/classes/query.js","name":"getQueryParameter","original":{"line":127,"column":20},"generated":{"line":1,"column":1508}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":127,"column":38},"generated":{"line":1,"column":1526}},{"source":"../../../src/classes/query.js","name":"handle","original":{"line":127,"column":43},"generated":{"line":1,"column":1531}},{"source":"../../../src/classes/query.js","name":"GL_QUERY_RESULT","original":{"line":127,"column":51},"generated":{"line":1,"column":1538}},{"source":"../../../src/classes/query.js","name":"getTimerMilliseconds","original":{"line":131,"column":2},"generated":{"line":1,"column":1541}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":132,"column":4},"generated":{"line":1,"column":1564}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":132,"column":11},"generated":{"line":1,"column":1571}},{"source":"../../../src/classes/query.js","name":"getResult","original":{"line":132,"column":16},"generated":{"line":1,"column":1576}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":132,"column":30},"generated":{"line":1,"column":1588}},{"source":"../../../src/classes/query.js","name":"createPoll","original":{"line":136,"column":2},"generated":{"line":1,"column":1592}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1605}},{"source":"../../../src/classes/query.js","name":"limit","original":{"line":136,"column":13},"generated":{"line":1,"column":1609}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1611}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1621}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1628}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1636}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1640}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1650}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1653}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":136,"column":47},"generated":{"line":1,"column":1663}},{"source":"../../../src/classes/query.js","name":"Number","original":{"line":136,"column":21},"generated":{"line":1,"column":1666}},{"source":"../../../src/classes/query.js","name":"POSITIVE_INFINITY","original":{"line":136,"column":28},"generated":{"line":1,"column":1673}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":137,"column":4},"generated":{"line":1,"column":1691}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":137,"column":8},"generated":{"line":1,"column":1694}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":137,"column":13},"generated":{"line":1,"column":1699}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":138,"column":6},"generated":{"line":1,"column":1715}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":138,"column":13},"generated":{"line":1,"column":1722}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":138,"column":18},"generated":{"line":1,"column":1727}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":141,"column":4},"generated":{"line":1,"column":1743}},{"source":"../../../src/classes/query.js","name":"counter","original":{"line":141,"column":8},"generated":{"line":1,"column":1747}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":141,"column":18},"generated":{"line":1,"column":1749}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":159,"column":4},"generated":{"line":1,"column":1751}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":143,"column":4},"generated":{"line":1,"column":1758}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":143,"column":9},"generated":{"line":1,"column":1763}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":143,"column":27},"generated":{"line":1,"column":1779}},{"source":"../../../src/classes/query.js","name":"Promise","original":{"line":143,"column":31},"generated":{"line":1,"column":1783}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":143,"column":39},"generated":{"line":1,"column":1791}},{"source":"../../../src/classes/query.js","name":"resolve","original":{"line":143,"column":40},"generated":{"line":1,"column":1792}},{"source":"../../../src/classes/query.js","name":"reject","original":{"line":143,"column":49},"generated":{"line":1,"column":1794}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":144,"column":6},"generated":{"line":1,"column":1799}},{"source":"../../../src/classes/query.js","name":"poll","original":{"line":144,"column":12},"generated":{"line":1,"column":1805}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":144,"column":19},"generated":{"line":1,"column":1807}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":145,"column":12},"generated":{"line":1,"column":1812}},{"source":"../../../src/classes/query.js","name":"isResultAvailable","original":{"line":145,"column":17},"generated":{"line":1,"column":1817}},{"source":"../../../src/classes/query.js","name":"resolve","original":{"line":146,"column":10},"generated":{"line":1,"column":1838}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":146,"column":18},"generated":{"line":1,"column":1840}},{"source":"../../../src/classes/query.js","name":"getResult","original":{"line":146,"column":23},"generated":{"line":1,"column":1845}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":147,"column":10},"generated":{"line":1,"column":1858}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":147,"column":15},"generated":{"line":1,"column":1863}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":147,"column":33},"generated":{"line":1,"column":1879}},{"source":"../../../src/classes/query.js","name":"counter","original":{"line":148,"column":19},"generated":{"line":1,"column":1885}},{"source":"../../../src/classes/query.js","name":"limit","original":{"line":148,"column":31},"generated":{"line":1,"column":1889}},{"source":"../../../src/classes/query.js","name":"reject","original":{"line":149,"column":10},"generated":{"line":1,"column":1892}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":149,"column":17},"generated":{"line":1,"column":1894}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":150,"column":10},"generated":{"line":1,"column":1907}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":150,"column":15},"generated":{"line":1,"column":1912}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":150,"column":33},"generated":{"line":1,"column":1928}},{"source":"../../../src/classes/query.js","name":"requestAnimationFrame","original":{"line":152,"column":10},"generated":{"line":1,"column":1934}},{"source":"../../../src/classes/query.js","name":"poll","original":{"line":152,"column":32},"generated":{"line":1,"column":1956}},{"source":"../../../src/classes/query.js","name":"requestAnimationFrame","original":{"line":156,"column":6},"generated":{"line":1,"column":1960}},{"source":"../../../src/classes/query.js","name":"poll","original":{"line":156,"column":28},"generated":{"line":1,"column":1982}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":159,"column":11},"generated":{"line":1,"column":1987}},{"source":"../../../src/classes/query.js","name":"_pollingPromise","original":{"line":159,"column":16},"generated":{"line":1,"column":1992}},{"source":"../../../src/classes/query.js","name":"_createHandle","original":{"line":162,"column":2},"generated":{"line":1,"column":2008}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":163,"column":4},"generated":{"line":1,"column":2024}},{"source":"../../../src/classes/query.js","name":"Query","original":{"line":163,"column":11},"generated":{"line":1,"column":2031}},{"source":"../../../src/classes/query.js","name":"isSupported","original":{"line":163,"column":17},"generated":{"line":1,"column":2033}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":163,"column":29},"generated":{"line":1,"column":2045}},{"source":"../../../src/classes/query.js","name":"gl","original":{"line":163,"column":34},"generated":{"line":1,"column":2050}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":163,"column":40},"generated":{"line":1,"column":2054}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":163,"column":45},"generated":{"line":1,"column":2059}},{"source":"../../../src/classes/query.js","name":"createQuery","original":{"line":163,"column":49},"generated":{"line":1,"column":2063}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":163,"column":65},"generated":{"line":1,"column":2077}},{"source":"../../../src/classes/query.js","name":"_deleteHandle","original":{"line":166,"column":2},"generated":{"line":1,"column":2082}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":167,"column":4},"generated":{"line":1,"column":2098}},{"source":"../../../src/classes/query.js","name":"gl2","original":{"line":167,"column":9},"generated":{"line":1,"column":2103}},{"source":"../../../src/classes/query.js","name":"deleteQuery","original":{"line":167,"column":13},"generated":{"line":1,"column":2107}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":167,"column":25},"generated":{"line":1,"column":2119}},{"source":"../../../src/classes/query.js","name":"handle","original":{"line":167,"column":30},"generated":{"line":1,"column":2124}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":2133}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":2141}},{"source":"../../../src/classes/query.js","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":2149}}],"sources":{"../../../src/classes/query.js":"// WebGL2 Query (also handles disjoint timer extensions)\nimport Resource from './resource';\nimport {FEATURES, hasFeatures} from '../features';\nimport {isWebGL2} from '@luma.gl/gltools';\nimport {assert} from '../utils/assert';\n\nconst GL_QUERY_RESULT = 0x8866; // Returns a GLuint containing the query result.\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867; // whether query result is available.\n\nconst GL_TIME_ELAPSED_EXT = 0x88bf; // Elapsed time (in nanoseconds).\nconst GL_GPU_DISJOINT_EXT = 0x8fbb; // Whether GPU performed any disjoint operation.\n\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88; // #primitives written to feedback buffers\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f; // Occlusion query (if drawing passed depth test)\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a; // Occlusion query less accurate/faster version\n\nexport default class Query extends Resource {\n  // eslint-disable-next-line accessor-pairs\n  get [Symbol.toStringTag]() {\n    return 'Query';\n  }\n  // Returns true if Query is supported by the WebGL implementation\n  // Can also check whether timestamp queries are available.\n  static isSupported(gl, opts = []) {\n    const webgl2 = isWebGL2(gl);\n\n    // Initial value\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  // Create a query class\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n\n    Object.seal(this);\n  }\n\n  // Shortcut for timer query (dependent on extension in both WebGL1 and 2)\n  // Measures GPU time delta between this call and a matching `end` call in the\n  // GPU instruction stream.\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  // Shortcut for occlusion queries\n  beginOcclusionQuery({conservative = false} = {}) {\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  // Shortcut for transformFeedbackQuery\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  // Due to OpenGL API limitations, after calling `begin()` on one Query\n  // instance, `end()` must be called on that same instance before\n  // calling `begin()` on another query. While there can be multiple\n  // outstanding queries representing disjoint `begin()`/`end()` intervals.\n  // It is not possible to interleave or overlap `begin` and `end` calls.\n  begin(target) {\n    // Don't start a new query if one is already active.\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n\n    return this;\n  }\n\n  // ends the current query\n  end() {\n    // Can't end a new query if the last one hasn't been resolved.\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n    return this;\n  }\n\n  // Returns true if the query result is available\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n    return resultAvailable;\n  }\n\n  // Timing query is disjoint, i.e. results are invalid\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  // Returns query result.\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  // Returns the query result, converted to milliseconds to match JavaScript conventions.\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  // Polls the query\n  createPoll(limit = Number.POSITIVE_INFINITY) {\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"9a971fab4f82ed37ccfde4d3d932b46b","cacheData":{"env":{}}}