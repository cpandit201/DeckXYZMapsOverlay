{"id":"Vopd","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js.map","includedInParent":true,"mtime":1688284132508},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/package.json","includedInParent":true,"mtime":1688284132508},{"name":"../env-utils/assert","loc":{"line":1,"column":23,"index":23},"parent":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","resolved":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js"},{"name":"../env-utils/version","loc":{"line":2,"column":24,"index":70},"parent":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","resolved":"/project/deck-gl-examples-01/node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.validateWorkerVersion=t;var e=require(\"../env-utils/assert\"),r=require(\"../env-utils/version\");function t(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.VERSION;(0,e.assert)(t,\"no worker provided\");const n=t.version;return!(!o||!n)}function o(e){const r=e.split(\".\").map(Number);return{major:r[0],minor:r[1]}}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":20}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":43}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":56}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":64}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":40,"column":0},"generated":{"line":1,"column":98}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":100}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":104}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":106}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":114}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":137}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":139}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":147}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":11,"column":7},"generated":{"line":1,"column":171}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"validateWorkerVersion","original":{"line":11,"column":16},"generated":{"line":1,"column":180}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"worker","original":{"line":12,"column":2},"generated":{"line":1,"column":182}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":14,"column":11},"generated":{"line":1,"column":185}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"coreVersion","original":{"line":13,"column":2},"generated":{"line":1,"column":189}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"arguments","original":{"line":13,"column":21},"generated":{"line":1,"column":191}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"length","original":{"line":13,"column":21},"generated":{"line":1,"column":201}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":1,"column":208}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"undefined","original":{"line":13,"column":21},"generated":{"line":1,"column":216}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"arguments","original":{"line":13,"column":21},"generated":{"line":1,"column":220}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":1,"column":230}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"arguments","original":{"line":13,"column":21},"generated":{"line":1,"column":233}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":1,"column":243}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"VERSION","original":{"line":13,"column":24},"generated":{"line":1,"column":246}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":13,"column":31},"generated":{"line":1,"column":248}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"assert","original":{"line":15,"column":2},"generated":{"line":1,"column":257}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"assert","original":{"line":15,"column":2},"generated":{"line":1,"column":259}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":261}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"worker","original":{"line":15,"column":9},"generated":{"line":1,"column":269}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":15,"column":17},"generated":{"line":1,"column":271}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":293}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"workerVersion","original":{"line":17,"column":8},"generated":{"line":1,"column":299}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"worker","original":{"line":17,"column":24},"generated":{"line":1,"column":301}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"version","original":{"line":17,"column":31},"generated":{"line":1,"column":303}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":1,"column":311}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"coreVersion","original":{"line":18,"column":7},"generated":{"line":1,"column":320}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"workerVersion","original":{"line":18,"column":23},"generated":{"line":1,"column":324}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":37,"column":0},"generated":{"line":1,"column":327}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"parseVersion","original":{"line":37,"column":9},"generated":{"line":1,"column":336}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"version","original":{"line":37,"column":22},"generated":{"line":1,"column":338}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":38,"column":2},"generated":{"line":1,"column":341}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"parts","original":{"line":38,"column":8},"generated":{"line":1,"column":347}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"version","original":{"line":38,"column":16},"generated":{"line":1,"column":349}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"split","original":{"line":38,"column":24},"generated":{"line":1,"column":351}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":38,"column":30},"generated":{"line":1,"column":357}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"map","original":{"line":38,"column":35},"generated":{"line":1,"column":362}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"Number","original":{"line":38,"column":39},"generated":{"line":1,"column":366}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":374}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":380}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"major","original":{"line":39,"column":10},"generated":{"line":1,"column":381}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"parts","original":{"line":39,"column":17},"generated":{"line":1,"column":387}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":39,"column":23},"generated":{"line":1,"column":389}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"minor","original":{"line":39,"column":27},"generated":{"line":1,"column":392}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":"parts","original":{"line":39,"column":34},"generated":{"line":1,"column":398}},{"source":"../../../../src/lib/worker-api/validate-worker-version.ts","name":null,"original":{"line":39,"column":40},"generated":{"line":1,"column":400}}],"sources":{"../../../../src/lib/worker-api/validate-worker-version.ts":"import type {WorkerObject} from '../../types';\nimport {assert} from '../env-utils/assert';\nimport {VERSION} from '../env-utils/version';\n\n/**\n * Check if worker is compatible with this library version\n * @param worker\n * @param libVersion\n * @returns `true` if the two versions are compatible\n */\nexport function validateWorkerVersion(\n  worker: WorkerObject,\n  coreVersion: string = VERSION\n): boolean {\n  assert(worker, 'no worker provided');\n\n  const workerVersion = worker.version;\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  // TODO enable when fix the __version__ injection\n  // const coreVersions = parseVersion(coreVersion);\n  // const workerVersions = parseVersion(workerVersion);\n  // assert(\n  //   coreVersion.major === workerVersion.major && coreVersion.minor <= workerVersion.minor,\n  //   `worker: ${worker.name} is not compatible. ${coreVersion.major}.${\n  //     coreVersion.minor\n  //   }+ is required.`\n  // );\n\n  return true;\n}\n\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {major: parts[0], minor: parts[1]};\n}\n"},"lineCount":null}},"error":null,"hash":"3e5f79a2a4f0aa36556d263c2c35310d","cacheData":{"env":{}}}