{"id":"dOP1","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js.map","includedInParent":true,"mtime":1688284132821},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/package.json","includedInParent":true,"mtime":1688284132821},{"name":"@babel/runtime/helpers/esm/defineProperty","loc":{"line":1,"column":28,"index":28},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@babel/runtime/helpers/esm/defineProperty.js"},{"name":"@mapbox/tiny-sdf","loc":{"line":2,"column":20,"index":93},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@mapbox/tiny-sdf/index.js"},{"name":"@deck.gl/core","loc":{"line":3,"column":20,"index":133},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/index.js"},{"name":"./utils","loc":{"line":4,"column":29,"index":179},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/utils.js"},{"name":"./lru-cache","loc":{"line":5,"column":21,"index":211},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/font-atlas-manager.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/layers/dist/esm/text-layer/lru-cache.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=exports.DEFAULT_FONT_SETTINGS=void 0,exports.setFontAtlasCacheLimit=m;var t=s(require(\"@babel/runtime/helpers/esm/defineProperty\")),e=s(require(\"@mapbox/tiny-sdf\")),a=require(\"@deck.gl/core\"),n=require(\"./utils\"),o=s(require(\"./lru-cache\"));function s(t){return t&&t.__esModule?t:{default:t}}function i(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const r={fontFamily:\"Monaco, monospace\",fontWeight:\"normal\",characterSet:i(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};exports.DEFAULT_FONT_SETTINGS=r;const f=1024,c=.9,u=1.2,h=3;let l=new o.default(h);function p(t,e){let a;a=\"string\"==typeof e?new Set(Array.from(e)):new Set(e);const n=l.get(t);if(!n)return a;for(const o in n.mapping)a.has(o)&&a.delete(o);return a}function d(t,e){for(let a=0;a<t.length;a++)e.data[4*a+3]=t[a]}function g(t,e,a,n){t.font=\"\".concat(n,\" \").concat(a,\"px \").concat(e),t.fillStyle=\"#000\",t.textBaseline=\"alphabetic\",t.textAlign=\"left\"}function m(t){a.log.assert(Number.isFinite(t)&&t>=h,\"Invalid cache limit\"),l=new o.default(t)}class y{constructor(){(0,t.default)(this,\"props\",{...r}),(0,t.default)(this,\"_key\",void 0),(0,t.default)(this,\"_atlas\",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(t*u+2*e)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();const e=p(this._key,this.props.characterSet),a=l.get(this._key);if(a&&0===e.size)return void(this._atlas!==a&&(this._atlas=a));const n=this._generateFontAtlas(e,a);this._atlas=n,l.set(this._key,n)}_generateFontAtlas(t,a){const{fontFamily:o,fontWeight:s,fontSize:i,buffer:r,sdf:h,radius:l,cutoff:p}=this.props;let m=a&&a.data;m||((m=document.createElement(\"canvas\")).width=f);const y=m.getContext(\"2d\",{willReadFrequently:!0});g(y,o,i,s);const{mapping:_,canvasHeight:x,xOffset:S,yOffset:b}=(0,n.buildMapping)({getFontWidth:t=>y.measureText(t).width,fontHeight:i*u,buffer:r,characterSet:t,maxCanvasWidth:f,...a&&{mapping:a.mapping,xOffset:a.xOffset,yOffset:a.yOffset}});if(m.height!==x){const t=y.getImageData(0,0,m.width,m.height);m.height=x,y.putImageData(t,0,0)}if(g(y,o,i,s),h){const a=new e.default({fontSize:i,buffer:r,radius:l,cutoff:p,fontFamily:o,fontWeight:\"\".concat(s)});for(const e of t){const{data:t,width:n,height:o,glyphTop:s}=a.draw(e);_[e].width=n,_[e].layoutOffsetY=i*c-s;const r=y.createImageData(n,o);d(t,r),y.putImageData(r,_[e].x,_[e].y)}}else for(const e of t)y.fillText(e,_[e].x,_[e].y+r+i*c);return{xOffset:S,yOffset:b,mapping:_,data:m,width:m.width,height:m.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:a,buffer:n,sdf:o,radius:s,cutoff:i}=this.props;return o?\"\".concat(t,\" \").concat(e,\" \").concat(a,\" \").concat(n,\" \").concat(s,\" \").concat(i):\"\".concat(t,\" \").concat(e,\" \").concat(a,\" \").concat(n)}}exports.default=y;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":0}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":13}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":20}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":35}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":43}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":56}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":57}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":64}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":68}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":76}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":84}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":92}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":119}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":121}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":129}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":152}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":154}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":158}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":160}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":162}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":170}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":216}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":218}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":220}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":228}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":249}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":251}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":259}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":276}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":278}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":286}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":297}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":299}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":301}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":309}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":325}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":334}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":336}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":339}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":346}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":349}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":351}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":362}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":364}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":365}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":373}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":376}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getDefaultCharacterSet","original":{"line":11,"column":9},"generated":{"line":1,"column":385}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":389}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"charSet","original":{"line":12,"column":8},"generated":{"line":1,"column":395}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":12,"column":28},"generated":{"line":1,"column":397}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":13,"column":2},"generated":{"line":1,"column":400}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":13,"column":7},"generated":{"line":1,"column":404}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":13,"column":11},"generated":{"line":1,"column":408}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":410}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":13,"column":19},"generated":{"line":1,"column":413}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":13,"column":23},"generated":{"line":1,"column":415}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":13,"column":28},"generated":{"line":1,"column":419}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"charSet","original":{"line":14,"column":4},"generated":{"line":1,"column":423}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"push","original":{"line":14,"column":12},"generated":{"line":1,"column":425}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"String","original":{"line":14,"column":17},"generated":{"line":1,"column":430}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fromCharCode","original":{"line":14,"column":24},"generated":{"line":1,"column":437}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":14,"column":37},"generated":{"line":1,"column":450}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":454}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"charSet","original":{"line":16,"column":9},"generated":{"line":1,"column":461}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":58,"column":7},"generated":{"line":1,"column":463}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"DEFAULT_FONT_SETTINGS","original":{"line":58,"column":13},"generated":{"line":1,"column":469}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":58,"column":61},"generated":{"line":1,"column":471}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":59,"column":2},"generated":{"line":1,"column":472}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":59,"column":14},"generated":{"line":1,"column":483}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":60,"column":2},"generated":{"line":1,"column":503}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":1,"column":514}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":61,"column":2},"generated":{"line":1,"column":523}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getDefaultCharacterSet","original":{"line":61,"column":16},"generated":{"line":1,"column":536}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":62,"column":2},"generated":{"line":1,"column":540}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":549}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":63,"column":2},"generated":{"line":1,"column":552}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":559}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"sdf","original":{"line":64,"column":2},"generated":{"line":1,"column":561}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":64,"column":7},"generated":{"line":1,"column":566}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cutoff","original":{"line":65,"column":2},"generated":{"line":1,"column":568}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":1,"column":575}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"radius","original":{"line":66,"column":2},"generated":{"line":1,"column":579}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":66,"column":10},"generated":{"line":1,"column":586}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"smoothing","original":{"line":67,"column":2},"generated":{"line":1,"column":589}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":67,"column":13},"generated":{"line":1,"column":599}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":58,"column":7},"generated":{"line":1,"column":603}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":58,"column":7},"generated":{"line":1,"column":611}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":58,"column":7},"generated":{"line":1,"column":633}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":70,"column":0},"generated":{"line":1,"column":635}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"MAX_CANVAS_WIDTH","original":{"line":70,"column":6},"generated":{"line":1,"column":641}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":70,"column":25},"generated":{"line":1,"column":643}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"BASELINE_SCALE","original":{"line":72,"column":6},"generated":{"line":1,"column":648}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":72,"column":23},"generated":{"line":1,"column":650}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"HEIGHT_SCALE","original":{"line":73,"column":6},"generated":{"line":1,"column":653}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":655}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"CACHE_LIMIT","original":{"line":76,"column":6},"generated":{"line":1,"column":659}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":76,"column":20},"generated":{"line":1,"column":661}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":93,"column":0},"generated":{"line":1,"column":663}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cache","original":{"line":93,"column":4},"generated":{"line":1,"column":667}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":93,"column":12},"generated":{"line":1,"column":669}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"LRUCache","original":{"line":93,"column":16},"generated":{"line":1,"column":673}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":93,"column":12},"generated":{"line":1,"column":675}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"CACHE_LIMIT","original":{"line":93,"column":36},"generated":{"line":1,"column":683}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":99,"column":0},"generated":{"line":1,"column":686}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getNewChars","original":{"line":99,"column":9},"generated":{"line":1,"column":695}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cacheKey","original":{"line":99,"column":21},"generated":{"line":1,"column":697}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":99,"column":39},"generated":{"line":1,"column":699}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":100,"column":2},"generated":{"line":1,"column":702}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"newCharSet","original":{"line":100,"column":6},"generated":{"line":1,"column":706}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"newCharSet","original":{"line":102,"column":4},"generated":{"line":1,"column":708}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":101,"column":30},"generated":{"line":1,"column":710}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":101,"column":13},"generated":{"line":1,"column":727}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":102,"column":17},"generated":{"line":1,"column":729}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"Set","original":{"line":102,"column":21},"generated":{"line":1,"column":733}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"Array","original":{"line":102,"column":25},"generated":{"line":1,"column":737}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"from","original":{"line":102,"column":31},"generated":{"line":1,"column":743}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":102,"column":36},"generated":{"line":1,"column":748}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":104,"column":17},"generated":{"line":1,"column":752}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"Set","original":{"line":104,"column":21},"generated":{"line":1,"column":756}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":104,"column":25},"generated":{"line":1,"column":760}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":107,"column":2},"generated":{"line":1,"column":763}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":107,"column":8},"generated":{"line":1,"column":769}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cache","original":{"line":107,"column":26},"generated":{"line":1,"column":771}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"get","original":{"line":107,"column":32},"generated":{"line":1,"column":773}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cacheKey","original":{"line":107,"column":36},"generated":{"line":1,"column":777}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":108,"column":2},"generated":{"line":1,"column":780}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":108,"column":7},"generated":{"line":1,"column":784}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":109,"column":4},"generated":{"line":1,"column":786}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"newCharSet","original":{"line":109,"column":11},"generated":{"line":1,"column":793}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":112,"column":2},"generated":{"line":1,"column":795}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":112,"column":7},"generated":{"line":1,"column":799}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":112,"column":13},"generated":{"line":1,"column":805}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":112,"column":21},"generated":{"line":1,"column":810}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":112,"column":37},"generated":{"line":1,"column":812}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"newCharSet","original":{"line":113,"column":8},"generated":{"line":1,"column":820}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"has","original":{"line":113,"column":19},"generated":{"line":1,"column":822}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":113,"column":23},"generated":{"line":1,"column":826}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"newCharSet","original":{"line":114,"column":6},"generated":{"line":1,"column":830}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"delete","original":{"line":114,"column":17},"generated":{"line":1,"column":832}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":114,"column":24},"generated":{"line":1,"column":839}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":117,"column":2},"generated":{"line":1,"column":842}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"newCharSet","original":{"line":117,"column":9},"generated":{"line":1,"column":849}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":120,"column":0},"generated":{"line":1,"column":851}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"populateAlphaChannel","original":{"line":120,"column":9},"generated":{"line":1,"column":860}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"alphaChannel","original":{"line":120,"column":30},"generated":{"line":1,"column":862}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":120,"column":63},"generated":{"line":1,"column":864}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":122,"column":2},"generated":{"line":1,"column":867}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":122,"column":7},"generated":{"line":1,"column":871}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":122,"column":11},"generated":{"line":1,"column":875}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":122,"column":15},"generated":{"line":1,"column":877}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":122,"column":18},"generated":{"line":1,"column":879}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"alphaChannel","original":{"line":122,"column":22},"generated":{"line":1,"column":881}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"length","original":{"line":122,"column":35},"generated":{"line":1,"column":883}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":122,"column":43},"generated":{"line":1,"column":890}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":123,"column":4},"generated":{"line":1,"column":894}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"data","original":{"line":123,"column":14},"generated":{"line":1,"column":896}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":123,"column":19},"generated":{"line":1,"column":901}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":123,"column":23},"generated":{"line":1,"column":903}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":123,"column":27},"generated":{"line":1,"column":905}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"alphaChannel","original":{"line":123,"column":32},"generated":{"line":1,"column":908}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"i","original":{"line":123,"column":45},"generated":{"line":1,"column":910}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":127,"column":0},"generated":{"line":1,"column":913}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"setTextStyle","original":{"line":127,"column":9},"generated":{"line":1,"column":922}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":128,"column":2},"generated":{"line":1,"column":924}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":129,"column":2},"generated":{"line":1,"column":926}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":130,"column":2},"generated":{"line":1,"column":928}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":131,"column":2},"generated":{"line":1,"column":930}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":133,"column":2},"generated":{"line":1,"column":933}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"font","original":{"line":133,"column":6},"generated":{"line":1,"column":935}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":133,"column":2},"generated":{"line":1,"column":940}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":133,"column":2},"generated":{"line":1,"column":943}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":133,"column":16},"generated":{"line":1,"column":950}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":133,"column":2},"generated":{"line":1,"column":952}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":133,"column":2},"generated":{"line":1,"column":957}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":133,"column":30},"generated":{"line":1,"column":964}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":133,"column":2},"generated":{"line":1,"column":966}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":133,"column":2},"generated":{"line":1,"column":973}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":133,"column":44},"generated":{"line":1,"column":980}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":134,"column":2},"generated":{"line":1,"column":983}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fillStyle","original":{"line":134,"column":6},"generated":{"line":1,"column":985}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":134,"column":18},"generated":{"line":1,"column":995}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":135,"column":2},"generated":{"line":1,"column":1002}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"textBaseline","original":{"line":135,"column":6},"generated":{"line":1,"column":1004}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":135,"column":21},"generated":{"line":1,"column":1017}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":136,"column":2},"generated":{"line":1,"column":1030}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"textAlign","original":{"line":136,"column":6},"generated":{"line":1,"column":1032}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":136,"column":18},"generated":{"line":1,"column":1042}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":143,"column":7},"generated":{"line":1,"column":1049}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"setFontAtlasCacheLimit","original":{"line":143,"column":16},"generated":{"line":1,"column":1058}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"limit","original":{"line":143,"column":39},"generated":{"line":1,"column":1060}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"log","original":{"line":144,"column":2},"generated":{"line":1,"column":1063}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":144,"column":5},"generated":{"line":1,"column":1065}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"assert","original":{"line":144,"column":6},"generated":{"line":1,"column":1069}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"Number","original":{"line":144,"column":13},"generated":{"line":1,"column":1076}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"isFinite","original":{"line":144,"column":20},"generated":{"line":1,"column":1083}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"limit","original":{"line":144,"column":29},"generated":{"line":1,"column":1092}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"limit","original":{"line":144,"column":39},"generated":{"line":1,"column":1096}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"CACHE_LIMIT","original":{"line":144,"column":48},"generated":{"line":1,"column":1099}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":144,"column":61},"generated":{"line":1,"column":1101}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cache","original":{"line":146,"column":2},"generated":{"line":1,"column":1124}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":146,"column":10},"generated":{"line":1,"column":1126}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"LRUCache","original":{"line":146,"column":14},"generated":{"line":1,"column":1130}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":146,"column":10},"generated":{"line":1,"column":1132}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"limit","original":{"line":146,"column":23},"generated":{"line":1,"column":1140}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":15},"generated":{"line":1,"column":1143}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"FontAtlasManager","original":{"line":149,"column":21},"generated":{"line":1,"column":1149}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1151}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1166}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1168}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1170}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1179}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1184}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":151,"column":34},"generated":{"line":1,"column":1192}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"DEFAULT_FONT_SETTINGS","original":{"line":151,"column":38},"generated":{"line":1,"column":1196}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1201}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1203}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1205}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1214}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1219}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1231}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1235}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1237}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1239}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1248}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1253}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":1267}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":158,"column":13},"generated":{"line":1,"column":1270}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":159,"column":4},"generated":{"line":1,"column":1284}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":159,"column":11},"generated":{"line":1,"column":1291}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_atlas","original":{"line":159,"column":16},"generated":{"line":1,"column":1296}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":162,"column":13},"generated":{"line":1,"column":1303}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":163,"column":4},"generated":{"line":1,"column":1317}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":163,"column":11},"generated":{"line":1,"column":1324}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_atlas","original":{"line":163,"column":16},"generated":{"line":1,"column":1329}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":163,"column":26},"generated":{"line":1,"column":1337}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_atlas","original":{"line":163,"column":31},"generated":{"line":1,"column":1342}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":163,"column":38},"generated":{"line":1,"column":1349}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":166,"column":11},"generated":{"line":1,"column":1357}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":167,"column":4},"generated":{"line":1,"column":1369}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":167,"column":10},"generated":{"line":1,"column":1375}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":167,"column":11},"generated":{"line":1,"column":1384}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":167,"column":10},"generated":{"line":1,"column":1386}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":167,"column":21},"generated":{"line":1,"column":1393}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":167,"column":31},"generated":{"line":1,"column":1396}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":167,"column":36},"generated":{"line":1,"column":1401}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":168,"column":4},"generated":{"line":1,"column":1407}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":168,"column":12},"generated":{"line":1,"column":1414}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"HEIGHT_SCALE","original":{"line":168,"column":23},"generated":{"line":1,"column":1416}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":168,"column":47},"generated":{"line":1,"column":1418}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":168,"column":38},"generated":{"line":1,"column":1420}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":168,"column":52},"generated":{"line":1,"column":1423}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"setProps","original":{"line":171,"column":2},"generated":{"line":1,"column":1425}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":171,"column":11},"generated":{"line":1,"column":1434}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":171,"column":33},"generated":{"line":1,"column":1436}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"Object","original":{"line":172,"column":4},"generated":{"line":1,"column":1440}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"assign","original":{"line":172,"column":11},"generated":{"line":1,"column":1447}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":172,"column":18},"generated":{"line":1,"column":1454}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":172,"column":23},"generated":{"line":1,"column":1459}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":172,"column":30},"generated":{"line":1,"column":1465}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":175,"column":4},"generated":{"line":1,"column":1468}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_key","original":{"line":175,"column":9},"generated":{"line":1,"column":1473}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":175,"column":16},"generated":{"line":1,"column":1478}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_getKey","original":{"line":175,"column":21},"generated":{"line":1,"column":1483}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":177,"column":4},"generated":{"line":1,"column":1493}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"charSet","original":{"line":177,"column":10},"generated":{"line":1,"column":1499}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getNewChars","original":{"line":177,"column":20},"generated":{"line":1,"column":1501}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":177,"column":32},"generated":{"line":1,"column":1503}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_key","original":{"line":177,"column":37},"generated":{"line":1,"column":1508}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":177,"column":43},"generated":{"line":1,"column":1513}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":177,"column":48},"generated":{"line":1,"column":1518}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":177,"column":54},"generated":{"line":1,"column":1524}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":178,"column":10},"generated":{"line":1,"column":1538}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cache","original":{"line":178,"column":28},"generated":{"line":1,"column":1540}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"get","original":{"line":178,"column":34},"generated":{"line":1,"column":1542}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":178,"column":38},"generated":{"line":1,"column":1546}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_key","original":{"line":178,"column":43},"generated":{"line":1,"column":1551}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":182,"column":4},"generated":{"line":1,"column":1557}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":182,"column":8},"generated":{"line":1,"column":1560}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":182,"column":44},"generated":{"line":1,"column":1563}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"charSet","original":{"line":182,"column":27},"generated":{"line":1,"column":1567}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"size","original":{"line":182,"column":35},"generated":{"line":1,"column":1569}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":187,"column":6},"generated":{"line":1,"column":1574}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":184,"column":10},"generated":{"line":1,"column":1586}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_atlas","original":{"line":184,"column":15},"generated":{"line":1,"column":1591}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":184,"column":26},"generated":{"line":1,"column":1600}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":185,"column":8},"generated":{"line":1,"column":1604}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_atlas","original":{"line":185,"column":13},"generated":{"line":1,"column":1609}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":185,"column":22},"generated":{"line":1,"column":1616}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":191,"column":4},"generated":{"line":1,"column":1620}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontAtlas","original":{"line":191,"column":10},"generated":{"line":1,"column":1626}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":191,"column":22},"generated":{"line":1,"column":1628}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_generateFontAtlas","original":{"line":191,"column":27},"generated":{"line":1,"column":1633}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"charSet","original":{"line":191,"column":46},"generated":{"line":1,"column":1652}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":191,"column":55},"generated":{"line":1,"column":1654}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":192,"column":4},"generated":{"line":1,"column":1657}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_atlas","original":{"line":192,"column":9},"generated":{"line":1,"column":1662}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontAtlas","original":{"line":192,"column":18},"generated":{"line":1,"column":1669}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cache","original":{"line":195,"column":4},"generated":{"line":1,"column":1671}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"set","original":{"line":195,"column":10},"generated":{"line":1,"column":1673}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":195,"column":14},"generated":{"line":1,"column":1677}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_key","original":{"line":195,"column":19},"generated":{"line":1,"column":1682}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontAtlas","original":{"line":195,"column":25},"generated":{"line":1,"column":1687}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_generateFontAtlas","original":{"line":199,"column":10},"generated":{"line":1,"column":1690}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":199,"column":29},"generated":{"line":1,"column":1709}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":199,"column":56},"generated":{"line":1,"column":1711}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":4},"generated":{"line":1,"column":1714}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1720}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":200,"column":11},"generated":{"line":1,"column":1731}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1733}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":200,"column":23},"generated":{"line":1,"column":1744}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1746}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":200,"column":35},"generated":{"line":1,"column":1755}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1757}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":200,"column":45},"generated":{"line":1,"column":1764}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1766}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"sdf","original":{"line":200,"column":53},"generated":{"line":1,"column":1770}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1772}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"radius","original":{"line":200,"column":58},"generated":{"line":1,"column":1779}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":10},"generated":{"line":1,"column":1781}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cutoff","original":{"line":200,"column":66},"generated":{"line":1,"column":1788}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":200,"column":76},"generated":{"line":1,"column":1791}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":200,"column":81},"generated":{"line":1,"column":1796}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":201,"column":4},"generated":{"line":1,"column":1802}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":201,"column":8},"generated":{"line":1,"column":1806}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":201,"column":17},"generated":{"line":1,"column":1808}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":201,"column":36},"generated":{"line":1,"column":1811}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"data","original":{"line":201,"column":52},"generated":{"line":1,"column":1813}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":202,"column":9},"generated":{"line":1,"column":1818}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":203,"column":6},"generated":{"line":1,"column":1823}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"document","original":{"line":203,"column":15},"generated":{"line":1,"column":1825}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"createElement","original":{"line":203,"column":24},"generated":{"line":1,"column":1834}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":203,"column":38},"generated":{"line":1,"column":1848}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":204,"column":13},"generated":{"line":1,"column":1859}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"MAX_CANVAS_WIDTH","original":{"line":204,"column":21},"generated":{"line":1,"column":1865}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":206,"column":4},"generated":{"line":1,"column":1868}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":206,"column":10},"generated":{"line":1,"column":1874}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":206,"column":16},"generated":{"line":1,"column":1876}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getContext","original":{"line":206,"column":23},"generated":{"line":1,"column":1878}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":206,"column":34},"generated":{"line":1,"column":1889}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":206,"column":40},"generated":{"line":1,"column":1894}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"willReadFrequently","original":{"line":206,"column":41},"generated":{"line":1,"column":1895}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":206,"column":61},"generated":{"line":1,"column":1915}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"setTextStyle","original":{"line":208,"column":4},"generated":{"line":1,"column":1919}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":208,"column":17},"generated":{"line":1,"column":1921}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":208,"column":22},"generated":{"line":1,"column":1923}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":208,"column":34},"generated":{"line":1,"column":1925}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":208,"column":44},"generated":{"line":1,"column":1927}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":4},"generated":{"line":1,"column":1930}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":1,"column":1936}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":211,"column":11},"generated":{"line":1,"column":1944}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":1,"column":1946}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvasHeight","original":{"line":211,"column":20},"generated":{"line":1,"column":1959}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":1,"column":1961}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"xOffset","original":{"line":211,"column":34},"generated":{"line":1,"column":1969}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":10},"generated":{"line":1,"column":1971}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"yOffset","original":{"line":211,"column":43},"generated":{"line":1,"column":1979}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buildMapping","original":{"line":211,"column":54},"generated":{"line":1,"column":1983}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buildMapping","original":{"line":211,"column":54},"generated":{"line":1,"column":1985}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":66},"generated":{"line":1,"column":1987}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":211,"column":67},"generated":{"line":1,"column":2001}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getFontWidth","original":{"line":212,"column":6},"generated":{"line":1,"column":2002}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":212,"column":20},"generated":{"line":1,"column":2015}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":212,"column":28},"generated":{"line":1,"column":2018}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"measureText","original":{"line":212,"column":32},"generated":{"line":1,"column":2020}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":212,"column":44},"generated":{"line":1,"column":2032}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":212,"column":50},"generated":{"line":1,"column":2035}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontHeight","original":{"line":213,"column":6},"generated":{"line":1,"column":2041}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":213,"column":18},"generated":{"line":1,"column":2052}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"HEIGHT_SCALE","original":{"line":213,"column":29},"generated":{"line":1,"column":2054}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":214,"column":6},"generated":{"line":1,"column":2056}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":214,"column":6},"generated":{"line":1,"column":2063}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":215,"column":6},"generated":{"line":1,"column":2065}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":215,"column":6},"generated":{"line":1,"column":2078}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"maxCanvasWidth","original":{"line":216,"column":6},"generated":{"line":1,"column":2080}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"MAX_CANVAS_WIDTH","original":{"line":216,"column":22},"generated":{"line":1,"column":2095}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":217,"column":10},"generated":{"line":1,"column":2100}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":217,"column":29},"generated":{"line":1,"column":2103}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":218,"column":8},"generated":{"line":1,"column":2104}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":218,"column":17},"generated":{"line":1,"column":2112}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":218,"column":33},"generated":{"line":1,"column":2114}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"xOffset","original":{"line":219,"column":8},"generated":{"line":1,"column":2122}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":219,"column":17},"generated":{"line":1,"column":2130}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"xOffset","original":{"line":219,"column":33},"generated":{"line":1,"column":2132}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"yOffset","original":{"line":220,"column":8},"generated":{"line":1,"column":2140}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cachedFontAtlas","original":{"line":220,"column":17},"generated":{"line":1,"column":2148}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"yOffset","original":{"line":220,"column":33},"generated":{"line":1,"column":2150}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":226,"column":4},"generated":{"line":1,"column":2161}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":226,"column":8},"generated":{"line":1,"column":2164}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":226,"column":15},"generated":{"line":1,"column":2166}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvasHeight","original":{"line":226,"column":26},"generated":{"line":1,"column":2175}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":226,"column":40},"generated":{"line":1,"column":2177}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":227,"column":6},"generated":{"line":1,"column":2178}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":227,"column":12},"generated":{"line":1,"column":2184}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":227,"column":24},"generated":{"line":1,"column":2186}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"getImageData","original":{"line":227,"column":28},"generated":{"line":1,"column":2188}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":227,"column":41},"generated":{"line":1,"column":2201}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":227,"column":44},"generated":{"line":1,"column":2203}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":227,"column":47},"generated":{"line":1,"column":2205}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":227,"column":54},"generated":{"line":1,"column":2207}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":227,"column":61},"generated":{"line":1,"column":2213}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":227,"column":68},"generated":{"line":1,"column":2215}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":228,"column":6},"generated":{"line":1,"column":2223}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":228,"column":13},"generated":{"line":1,"column":2225}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvasHeight","original":{"line":228,"column":22},"generated":{"line":1,"column":2232}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":229,"column":6},"generated":{"line":1,"column":2234}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"putImageData","original":{"line":229,"column":10},"generated":{"line":1,"column":2236}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":229,"column":23},"generated":{"line":1,"column":2249}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":229,"column":34},"generated":{"line":1,"column":2251}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":229,"column":37},"generated":{"line":1,"column":2253}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":234,"column":4},"generated":{"line":1,"column":2256}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"setTextStyle","original":{"line":231,"column":4},"generated":{"line":1,"column":2259}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":231,"column":17},"generated":{"line":1,"column":2261}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":231,"column":22},"generated":{"line":1,"column":2263}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":231,"column":34},"generated":{"line":1,"column":2265}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":231,"column":44},"generated":{"line":1,"column":2267}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"sdf","original":{"line":234,"column":8},"generated":{"line":1,"column":2270}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":234,"column":13},"generated":{"line":1,"column":2272}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":235,"column":6},"generated":{"line":1,"column":2273}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"tinySDF","original":{"line":235,"column":12},"generated":{"line":1,"column":2279}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":235,"column":22},"generated":{"line":1,"column":2281}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"TinySDF","original":{"line":235,"column":26},"generated":{"line":1,"column":2285}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":235,"column":22},"generated":{"line":1,"column":2287}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":235,"column":34},"generated":{"line":1,"column":2295}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":236,"column":8},"generated":{"line":1,"column":2296}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":236,"column":8},"generated":{"line":1,"column":2305}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":237,"column":8},"generated":{"line":1,"column":2307}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":237,"column":8},"generated":{"line":1,"column":2314}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"radius","original":{"line":238,"column":8},"generated":{"line":1,"column":2316}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"radius","original":{"line":238,"column":8},"generated":{"line":1,"column":2323}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cutoff","original":{"line":239,"column":8},"generated":{"line":1,"column":2325}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cutoff","original":{"line":239,"column":8},"generated":{"line":1,"column":2332}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":240,"column":8},"generated":{"line":1,"column":2334}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":240,"column":8},"generated":{"line":1,"column":2345}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":241,"column":8},"generated":{"line":1,"column":2347}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":241,"column":18},"generated":{"line":1,"column":2358}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":241,"column":18},"generated":{"line":1,"column":2361}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":241,"column":23},"generated":{"line":1,"column":2368}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":244,"column":6},"generated":{"line":1,"column":2373}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":244,"column":11},"generated":{"line":1,"column":2377}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":244,"column":17},"generated":{"line":1,"column":2383}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":244,"column":25},"generated":{"line":1,"column":2388}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":244,"column":39},"generated":{"line":1,"column":2390}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":245,"column":8},"generated":{"line":1,"column":2391}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":245,"column":14},"generated":{"line":1,"column":2397}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"data","original":{"line":245,"column":15},"generated":{"line":1,"column":2402}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":245,"column":14},"generated":{"line":1,"column":2404}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":245,"column":21},"generated":{"line":1,"column":2410}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":245,"column":14},"generated":{"line":1,"column":2412}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":245,"column":28},"generated":{"line":1,"column":2419}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":245,"column":14},"generated":{"line":1,"column":2421}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"glyphTop","original":{"line":245,"column":36},"generated":{"line":1,"column":2430}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"tinySDF","original":{"line":245,"column":48},"generated":{"line":1,"column":2433}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"draw","original":{"line":245,"column":56},"generated":{"line":1,"column":2435}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":245,"column":61},"generated":{"line":1,"column":2440}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":246,"column":8},"generated":{"line":1,"column":2443}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":246,"column":16},"generated":{"line":1,"column":2445}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":246,"column":22},"generated":{"line":1,"column":2448}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":246,"column":30},"generated":{"line":1,"column":2454}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":247,"column":8},"generated":{"line":1,"column":2456}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":247,"column":16},"generated":{"line":1,"column":2458}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"layoutOffsetY","original":{"line":247,"column":22},"generated":{"line":1,"column":2461}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":247,"column":38},"generated":{"line":1,"column":2475}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"BASELINE_SCALE","original":{"line":247,"column":49},"generated":{"line":1,"column":2477}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"glyphTop","original":{"line":247,"column":66},"generated":{"line":1,"column":2479}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":249,"column":8},"generated":{"line":1,"column":2481}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":249,"column":14},"generated":{"line":1,"column":2487}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":249,"column":26},"generated":{"line":1,"column":2489}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"createImageData","original":{"line":249,"column":30},"generated":{"line":1,"column":2491}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":249,"column":46},"generated":{"line":1,"column":2507}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":249,"column":53},"generated":{"line":1,"column":2509}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"populateAlphaChannel","original":{"line":250,"column":8},"generated":{"line":1,"column":2512}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"data","original":{"line":250,"column":29},"generated":{"line":1,"column":2514}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":250,"column":35},"generated":{"line":1,"column":2516}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":251,"column":8},"generated":{"line":1,"column":2519}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"putImageData","original":{"line":251,"column":12},"generated":{"line":1,"column":2521}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"imageData","original":{"line":251,"column":25},"generated":{"line":1,"column":2534}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":251,"column":36},"generated":{"line":1,"column":2536}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":251,"column":44},"generated":{"line":1,"column":2538}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"x","original":{"line":251,"column":50},"generated":{"line":1,"column":2541}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":251,"column":53},"generated":{"line":1,"column":2543}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":251,"column":61},"generated":{"line":1,"column":2545}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"y","original":{"line":251,"column":67},"generated":{"line":1,"column":2548}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":254,"column":6},"generated":{"line":1,"column":2557}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":254,"column":11},"generated":{"line":1,"column":2561}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":254,"column":17},"generated":{"line":1,"column":2567}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"characterSet","original":{"line":254,"column":25},"generated":{"line":1,"column":2572}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"ctx","original":{"line":255,"column":8},"generated":{"line":1,"column":2574}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fillText","original":{"line":255,"column":12},"generated":{"line":1,"column":2576}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":255,"column":21},"generated":{"line":1,"column":2585}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":255,"column":27},"generated":{"line":1,"column":2587}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":255,"column":35},"generated":{"line":1,"column":2589}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"x","original":{"line":255,"column":41},"generated":{"line":1,"column":2592}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":255,"column":44},"generated":{"line":1,"column":2594}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"char","original":{"line":255,"column":52},"generated":{"line":1,"column":2596}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"y","original":{"line":255,"column":58},"generated":{"line":1,"column":2599}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":255,"column":62},"generated":{"line":1,"column":2601}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":255,"column":71},"generated":{"line":1,"column":2603}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"BASELINE_SCALE","original":{"line":255,"column":82},"generated":{"line":1,"column":2605}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":259,"column":4},"generated":{"line":1,"column":2608}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":259,"column":11},"generated":{"line":1,"column":2614}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"xOffset","original":{"line":260,"column":6},"generated":{"line":1,"column":2615}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"xOffset","original":{"line":260,"column":6},"generated":{"line":1,"column":2623}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"yOffset","original":{"line":261,"column":6},"generated":{"line":1,"column":2625}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"yOffset","original":{"line":261,"column":6},"generated":{"line":1,"column":2633}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":262,"column":6},"generated":{"line":1,"column":2635}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"mapping","original":{"line":262,"column":6},"generated":{"line":1,"column":2643}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"data","original":{"line":263,"column":6},"generated":{"line":1,"column":2645}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":263,"column":12},"generated":{"line":1,"column":2650}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":264,"column":6},"generated":{"line":1,"column":2652}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":264,"column":13},"generated":{"line":1,"column":2658}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"width","original":{"line":264,"column":20},"generated":{"line":1,"column":2660}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":265,"column":6},"generated":{"line":1,"column":2666}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"canvas","original":{"line":265,"column":14},"generated":{"line":1,"column":2673}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"height","original":{"line":265,"column":21},"generated":{"line":1,"column":2675}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"_getKey","original":{"line":269,"column":10},"generated":{"line":1,"column":2683}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":4},"generated":{"line":1,"column":2693}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2699}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":270,"column":11},"generated":{"line":1,"column":2710}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2712}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":270,"column":23},"generated":{"line":1,"column":2723}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2725}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":270,"column":35},"generated":{"line":1,"column":2734}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2736}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":270,"column":45},"generated":{"line":1,"column":2743}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2745}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"sdf","original":{"line":270,"column":53},"generated":{"line":1,"column":2749}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2751}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"radius","original":{"line":270,"column":58},"generated":{"line":1,"column":2758}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":10},"generated":{"line":1,"column":2760}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cutoff","original":{"line":270,"column":66},"generated":{"line":1,"column":2767}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":270,"column":76},"generated":{"line":1,"column":2770}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"props","original":{"line":270,"column":81},"generated":{"line":1,"column":2775}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":271,"column":4},"generated":{"line":1,"column":2781}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"sdf","original":{"line":271,"column":8},"generated":{"line":1,"column":2788}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2790}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2793}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":272,"column":16},"generated":{"line":1,"column":2800}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2802}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2807}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":272,"column":30},"generated":{"line":1,"column":2814}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2816}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2821}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":272,"column":44},"generated":{"line":1,"column":2828}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2830}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2835}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":272,"column":56},"generated":{"line":1,"column":2842}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2844}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2849}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"radius","original":{"line":272,"column":66},"generated":{"line":1,"column":2856}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2858}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":272,"column":6},"generated":{"line":1,"column":2863}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"cutoff","original":{"line":272,"column":76},"generated":{"line":1,"column":2870}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2873}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2876}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontFamily","original":{"line":274,"column":14},"generated":{"line":1,"column":2883}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2885}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2890}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontWeight","original":{"line":274,"column":28},"generated":{"line":1,"column":2897}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2899}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2904}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"fontSize","original":{"line":274,"column":42},"generated":{"line":1,"column":2911}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2913}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":274,"column":4},"generated":{"line":1,"column":2918}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":"buffer","original":{"line":274,"column":54},"generated":{"line":1,"column":2925}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":2929}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":2937}},{"source":"../../../src/text-layer/font-atlas-manager.ts","name":null,"original":{"line":149,"column":38},"generated":{"line":1,"column":2945}}],"sources":{"../../../src/text-layer/font-atlas-manager.ts":"/* global document */\nimport TinySDF from '@mapbox/tiny-sdf';\n\nimport {log} from '@deck.gl/core';\n\nimport {buildMapping, CharacterMapping} from './utils';\nimport LRUCache from './lru-cache';\n\nimport type {Texture} from '@deck.gl/core';\n\nfunction getDefaultCharacterSet() {\n  const charSet: string[] = [];\n  for (let i = 32; i < 128; i++) {\n    charSet.push(String.fromCharCode(i));\n  }\n  return charSet;\n}\n\nexport type FontSettings = {\n  /** CSS font family\n   * @default 'Monaco, monospace'\n   */\n  fontFamily?: string;\n  /** CSS font weight\n   * @default 'normal'\n   */\n  fontWeight?: string | number;\n  /** Specifies a list of characters to include in the font.\n   * @default (ASCII characters 32-128)\n   */\n  characterSet?: Set<string> | string[] | string;\n  /** Font size in pixels. This option is only applied for generating `fontAtlas`, it does not impact the size of displayed text labels. Larger `fontSize` will give you a sharper look when rendering text labels with very large font sizes. But larger `fontSize` requires more time and space to generate the `fontAtlas`.\n   * @default 64\n   */\n  fontSize?: number;\n  /** Whitespace buffer around each side of the character. In general, bigger `fontSize` requires bigger `buffer`. Increase `buffer` will add more space between each character when layout `characterSet` in `fontAtlas`. This option could be tuned to provide sufficient space for drawing each character and avoiding overlapping of neighboring characters.\n   * @default 4\n   */\n  buffer?: number;\n  /** Flag to enable / disable `sdf`. [`sdf` (Signed Distance Fields)](http://cs.brown.edu/people/pfelzens/papers/dt-final.pdf) will provide a sharper look when rendering with very large or small font sizes. `TextLayer` integrates with [`TinySDF`](https://github.com/mapbox/tiny-sdf) which implements the `sdf` algorithm.\n   * @default false\n   */\n  sdf?: boolean;\n  /** How much of the radius (relative) is used for the inside part the glyph. Bigger `cutoff` makes character thinner. Smaller `cutoff` makes character look thicker. Only applies when `sdf: true`.\n   * @default 0.25\n   */\n  cutoff?: number;\n  /** How many pixels around the glyph shape to use for encoding distance. Bigger radius yields higher quality outcome. Only applies when `sdf: true`.\n   * @default 12\n   */\n  radius?: number;\n  /** How much smoothing to apply to the text edges. Only applies when `sdf: true`.\n   * @default 0.1\n   */\n  smoothing?: number;\n};\n\nexport const DEFAULT_FONT_SETTINGS: Required<FontSettings> = {\n  fontFamily: 'Monaco, monospace',\n  fontWeight: 'normal',\n  characterSet: getDefaultCharacterSet(),\n  fontSize: 64,\n  buffer: 4,\n  sdf: false,\n  cutoff: 0.25,\n  radius: 12,\n  smoothing: 0.1\n};\n\nconst MAX_CANVAS_WIDTH = 1024;\n\nconst BASELINE_SCALE = 0.9;\nconst HEIGHT_SCALE = 1.2;\n\n// only preserve latest three fontAtlas\nconst CACHE_LIMIT = 3;\n\ntype FontAtlas = {\n  /** x position of last character in mapping */\n  xOffset: number;\n  /** y position of last character in mapping */\n  yOffset: number;\n  /** bounding box of each character in the texture */\n  mapping: CharacterMapping;\n  /** packed texture */\n  data: HTMLCanvasElement;\n  /** texture width */\n  width: number;\n  /** texture height */\n  height: number;\n};\n\nlet cache = new LRUCache<FontAtlas>(CACHE_LIMIT);\n\n/**\n * get all the chars not in cache\n * @returns chars not in cache\n */\nfunction getNewChars(cacheKey: string, characterSet: Set<string> | string[] | string): Set<string> {\n  let newCharSet: Set<string>;\n  if (typeof characterSet === 'string') {\n    newCharSet = new Set(Array.from(characterSet));\n  } else {\n    newCharSet = new Set(characterSet);\n  }\n\n  const cachedFontAtlas = cache.get(cacheKey);\n  if (!cachedFontAtlas) {\n    return newCharSet;\n  }\n\n  for (const char in cachedFontAtlas.mapping) {\n    if (newCharSet.has(char)) {\n      newCharSet.delete(char);\n    }\n  }\n  return newCharSet;\n}\n\nfunction populateAlphaChannel(alphaChannel: Uint8ClampedArray, imageData: ImageData): void {\n  // populate distance value from tinySDF to image alpha channel\n  for (let i = 0; i < alphaChannel.length; i++) {\n    imageData.data[4 * i + 3] = alphaChannel[i];\n  }\n}\n\nfunction setTextStyle(\n  ctx: CanvasRenderingContext2D,\n  fontFamily: string,\n  fontSize: number,\n  fontWeight: string | number\n): void {\n  ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n  ctx.fillStyle = '#000';\n  ctx.textBaseline = 'alphabetic';\n  ctx.textAlign = 'left';\n}\n\n/**\n * Sets the Font Atlas LRU Cache Limit\n * @param {number} limit LRU Cache limit\n */\nexport function setFontAtlasCacheLimit(limit: number): void {\n  log.assert(Number.isFinite(limit) && limit >= CACHE_LIMIT, 'Invalid cache limit');\n\n  cache = new LRUCache(limit);\n}\n\nexport default class FontAtlasManager {\n  /** Font settings */\n  props: Required<FontSettings> = {...DEFAULT_FONT_SETTINGS};\n\n  /** Cache key of the current font atlas */\n  private _key?: string;\n  /** The current font atlas */\n  private _atlas?: FontAtlas;\n\n  get texture(): Texture | undefined {\n    return this._atlas;\n  }\n\n  get mapping(): CharacterMapping | undefined {\n    return this._atlas && this._atlas.mapping;\n  }\n\n  get scale(): number {\n    const {fontSize, buffer} = this.props;\n    return (fontSize * HEIGHT_SCALE + buffer * 2) / fontSize;\n  }\n\n  setProps(props: FontSettings = {}) {\n    Object.assign(this.props, props);\n\n    // update cache key\n    this._key = this._getKey();\n\n    const charSet = getNewChars(this._key, this.props.characterSet);\n    const cachedFontAtlas = cache.get(this._key);\n\n    // if a fontAtlas associated with the new settings is cached and\n    // there are no new chars\n    if (cachedFontAtlas && charSet.size === 0) {\n      // update texture with cached fontAtlas\n      if (this._atlas !== cachedFontAtlas) {\n        this._atlas = cachedFontAtlas;\n      }\n      return;\n    }\n\n    // update fontAtlas with new settings\n    const fontAtlas = this._generateFontAtlas(charSet, cachedFontAtlas);\n    this._atlas = fontAtlas;\n\n    // update cache\n    cache.set(this._key, fontAtlas);\n  }\n\n  // eslint-disable-next-line max-statements\n  private _generateFontAtlas(characterSet: Set<string>, cachedFontAtlas?: FontAtlas): FontAtlas {\n    const {fontFamily, fontWeight, fontSize, buffer, sdf, radius, cutoff} = this.props;\n    let canvas = cachedFontAtlas && cachedFontAtlas.data;\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.width = MAX_CANVAS_WIDTH;\n    }\n    const ctx = canvas.getContext('2d', {willReadFrequently: true})!;\n\n    setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n\n    // 1. build mapping\n    const {mapping, canvasHeight, xOffset, yOffset} = buildMapping({\n      getFontWidth: char => ctx.measureText(char).width,\n      fontHeight: fontSize * HEIGHT_SCALE,\n      buffer,\n      characterSet,\n      maxCanvasWidth: MAX_CANVAS_WIDTH,\n      ...(cachedFontAtlas && {\n        mapping: cachedFontAtlas.mapping,\n        xOffset: cachedFontAtlas.xOffset,\n        yOffset: cachedFontAtlas.yOffset\n      })\n    });\n\n    // 2. update canvas\n    // copy old canvas data to new canvas only when height changed\n    if (canvas.height !== canvasHeight) {\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      canvas.height = canvasHeight;\n      ctx.putImageData(imageData, 0, 0);\n    }\n    setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n\n    // 3. layout characters\n    if (sdf) {\n      const tinySDF = new TinySDF({\n        fontSize,\n        buffer,\n        radius,\n        cutoff,\n        fontFamily,\n        fontWeight: `${fontWeight}`\n      });\n\n      for (const char of characterSet) {\n        const {data, width, height, glyphTop} = tinySDF.draw(char);\n        mapping[char].width = width;\n        mapping[char].layoutOffsetY = fontSize * BASELINE_SCALE - glyphTop;\n\n        const imageData = ctx.createImageData(width, height);\n        populateAlphaChannel(data, imageData);\n        ctx.putImageData(imageData, mapping[char].x, mapping[char].y);\n      }\n    } else {\n      for (const char of characterSet) {\n        ctx.fillText(char, mapping[char].x, mapping[char].y + buffer + fontSize * BASELINE_SCALE);\n      }\n    }\n\n    return {\n      xOffset,\n      yOffset,\n      mapping,\n      data: canvas,\n      width: canvas.width,\n      height: canvas.height\n    };\n  }\n\n  private _getKey(): string {\n    const {fontFamily, fontWeight, fontSize, buffer, sdf, radius, cutoff} = this.props;\n    if (sdf) {\n      return `${fontFamily} ${fontWeight} ${fontSize} ${buffer} ${radius} ${cutoff}`;\n    }\n    return `${fontFamily} ${fontWeight} ${fontSize} ${buffer}`;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"cd9bab522ebc809aa8685c9f4bf60de9","cacheData":{"env":{}}}