{"id":"BccJ","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js.map","includedInParent":true,"mtime":1688284131006},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/package.json","includedInParent":true,"mtime":1688284131006},{"name":"./web-mercator-utils","loc":{"line":1,"column":30,"index":30},"parent":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js"},{"name":"./math-utils","loc":{"line":2,"column":26,"index":80},"parent":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/math-utils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=i;var t=require(\"./web-mercator-utils\"),e=require(\"./math-utils\");const o=512;function i(i){const{width:r,height:l,pitch:n=0}=i;let{longitude:s,latitude:u,zoom:d,bearing:a=0}=i;(s<-180||s>180)&&(s=(0,e.mod)(s+180,360)-180),(a<-180||a>180)&&(a=(0,e.mod)(a+180,360)-180);const c=(0,e.log2)(l/o);if(d<=c)d=c,u=0;else{const e=l/2/Math.pow(2,d),i=(0,t.worldToLngLat)([0,e])[1];if(u<i)u=i;else{const i=(0,t.worldToLngLat)([0,o-e])[1];u>i&&(u=i)}}return{width:r,height:l,longitude:s,latitude:u,zoom:d,pitch:n,bearing:a}}"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":0}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":13}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":20}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":35}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":43}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":56}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":57}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":64}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":68}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":76}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":55,"column":1},"generated":{"line":1,"column":84}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":124}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":126}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":134}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":150}},{"source":"../../src/normalize-viewport-props.ts","name":"TILE_SIZE","original":{"line":5,"column":6},"generated":{"line":1,"column":156}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":5,"column":18},"generated":{"line":1,"column":158}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":23,"column":15},"generated":{"line":1,"column":162}},{"source":"../../src/normalize-viewport-props.ts","name":"normalizeViewportProps","original":{"line":23,"column":24},"generated":{"line":1,"column":171}},{"source":"../../src/normalize-viewport-props.ts","name":"props","original":{"line":23,"column":47},"generated":{"line":1,"column":173}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":1,"column":176}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":182}},{"source":"../../src/normalize-viewport-props.ts","name":"width","original":{"line":24,"column":9},"generated":{"line":1,"column":188}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":190}},{"source":"../../src/normalize-viewport-props.ts","name":"height","original":{"line":24,"column":16},"generated":{"line":1,"column":197}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":199}},{"source":"../../src/normalize-viewport-props.ts","name":"pitch","original":{"line":24,"column":24},"generated":{"line":1,"column":205}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":24,"column":32},"generated":{"line":1,"column":207}},{"source":"../../src/normalize-viewport-props.ts","name":"props","original":{"line":24,"column":37},"generated":{"line":1,"column":210}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":25,"column":2},"generated":{"line":1,"column":212}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":216}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":25,"column":7},"generated":{"line":1,"column":226}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":228}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":25,"column":18},"generated":{"line":1,"column":237}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":239}},{"source":"../../src/normalize-viewport-props.ts","name":"zoom","original":{"line":25,"column":28},"generated":{"line":1,"column":244}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":246}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":25,"column":34},"generated":{"line":1,"column":254}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":25,"column":44},"generated":{"line":1,"column":256}},{"source":"../../src/normalize-viewport-props.ts","name":"props","original":{"line":25,"column":49},"generated":{"line":1,"column":259}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":28,"column":6},"generated":{"line":1,"column":262}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":28,"column":19},"generated":{"line":1,"column":265}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":28,"column":26},"generated":{"line":1,"column":270}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":28,"column":38},"generated":{"line":1,"column":272}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":29,"column":4},"generated":{"line":1,"column":279}},{"source":"../../src/normalize-viewport-props.ts","name":"mod","original":{"line":29,"column":16},"generated":{"line":1,"column":282}},{"source":"../../src/normalize-viewport-props.ts","name":"mod","original":{"line":29,"column":16},"generated":{"line":1,"column":284}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":286}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":29,"column":20},"generated":{"line":1,"column":291}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":29,"column":32},"generated":{"line":1,"column":293}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":29,"column":37},"generated":{"line":1,"column":297}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":29,"column":44},"generated":{"line":1,"column":302}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":31,"column":6},"generated":{"line":1,"column":308}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":311}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":31,"column":24},"generated":{"line":1,"column":316}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":31,"column":34},"generated":{"line":1,"column":318}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":32,"column":4},"generated":{"line":1,"column":325}},{"source":"../../src/normalize-viewport-props.ts","name":"mod","original":{"line":32,"column":14},"generated":{"line":1,"column":328}},{"source":"../../src/normalize-viewport-props.ts","name":"mod","original":{"line":32,"column":14},"generated":{"line":1,"column":330}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":32,"column":17},"generated":{"line":1,"column":332}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":32,"column":18},"generated":{"line":1,"column":337}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":32,"column":28},"generated":{"line":1,"column":339}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":32,"column":33},"generated":{"line":1,"column":343}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":32,"column":40},"generated":{"line":1,"column":348}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":353}},{"source":"../../src/normalize-viewport-props.ts","name":"minZoom","original":{"line":36,"column":8},"generated":{"line":1,"column":359}},{"source":"../../src/normalize-viewport-props.ts","name":"log2","original":{"line":36,"column":18},"generated":{"line":1,"column":362}},{"source":"../../src/normalize-viewport-props.ts","name":"log2","original":{"line":36,"column":18},"generated":{"line":1,"column":364}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":36,"column":22},"generated":{"line":1,"column":366}},{"source":"../../src/normalize-viewport-props.ts","name":"height","original":{"line":36,"column":23},"generated":{"line":1,"column":372}},{"source":"../../src/normalize-viewport-props.ts","name":"TILE_SIZE","original":{"line":36,"column":32},"generated":{"line":1,"column":374}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":37,"column":2},"generated":{"line":1,"column":377}},{"source":"../../src/normalize-viewport-props.ts","name":"zoom","original":{"line":37,"column":6},"generated":{"line":1,"column":380}},{"source":"../../src/normalize-viewport-props.ts","name":"minZoom","original":{"line":37,"column":14},"generated":{"line":1,"column":383}},{"source":"../../src/normalize-viewport-props.ts","name":"zoom","original":{"line":38,"column":4},"generated":{"line":1,"column":385}},{"source":"../../src/normalize-viewport-props.ts","name":"minZoom","original":{"line":38,"column":11},"generated":{"line":1,"column":387}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":39,"column":4},"generated":{"line":1,"column":389}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":1,"column":391}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":1,"column":397}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":42,"column":4},"generated":{"line":1,"column":398}},{"source":"../../src/normalize-viewport-props.ts","name":"halfHeightPixels","original":{"line":42,"column":10},"generated":{"line":1,"column":404}},{"source":"../../src/normalize-viewport-props.ts","name":"height","original":{"line":42,"column":29},"generated":{"line":1,"column":406}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":42,"column":38},"generated":{"line":1,"column":408}},{"source":"../../src/normalize-viewport-props.ts","name":"Math","original":{"line":42,"column":42},"generated":{"line":1,"column":410}},{"source":"../../src/normalize-viewport-props.ts","name":"pow","original":{"line":42,"column":47},"generated":{"line":1,"column":415}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":42,"column":51},"generated":{"line":1,"column":419}},{"source":"../../src/normalize-viewport-props.ts","name":"zoom","original":{"line":42,"column":54},"generated":{"line":1,"column":421}},{"source":"../../src/normalize-viewport-props.ts","name":"minLatitude","original":{"line":43,"column":10},"generated":{"line":1,"column":424}},{"source":"../../src/normalize-viewport-props.ts","name":"worldToLngLat","original":{"line":43,"column":24},"generated":{"line":1,"column":427}},{"source":"../../src/normalize-viewport-props.ts","name":"worldToLngLat","original":{"line":43,"column":24},"generated":{"line":1,"column":429}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":43,"column":37},"generated":{"line":1,"column":431}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":43,"column":38},"generated":{"line":1,"column":446}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":43,"column":39},"generated":{"line":1,"column":447}},{"source":"../../src/normalize-viewport-props.ts","name":"halfHeightPixels","original":{"line":43,"column":42},"generated":{"line":1,"column":449}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":43,"column":61},"generated":{"line":1,"column":453}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":456}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":44,"column":8},"generated":{"line":1,"column":459}},{"source":"../../src/normalize-viewport-props.ts","name":"minLatitude","original":{"line":44,"column":19},"generated":{"line":1,"column":461}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":45,"column":6},"generated":{"line":1,"column":463}},{"source":"../../src/normalize-viewport-props.ts","name":"minLatitude","original":{"line":45,"column":17},"generated":{"line":1,"column":465}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":471}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":47,"column":6},"generated":{"line":1,"column":472}},{"source":"../../src/normalize-viewport-props.ts","name":"maxLatitude","original":{"line":47,"column":12},"generated":{"line":1,"column":478}},{"source":"../../src/normalize-viewport-props.ts","name":"worldToLngLat","original":{"line":47,"column":26},"generated":{"line":1,"column":481}},{"source":"../../src/normalize-viewport-props.ts","name":"worldToLngLat","original":{"line":47,"column":26},"generated":{"line":1,"column":483}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":47,"column":39},"generated":{"line":1,"column":485}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":47,"column":40},"generated":{"line":1,"column":500}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":47,"column":41},"generated":{"line":1,"column":501}},{"source":"../../src/normalize-viewport-props.ts","name":"TILE_SIZE","original":{"line":47,"column":44},"generated":{"line":1,"column":503}},{"source":"../../src/normalize-viewport-props.ts","name":"halfHeightPixels","original":{"line":47,"column":56},"generated":{"line":1,"column":505}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":47,"column":75},"generated":{"line":1,"column":509}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":48,"column":10},"generated":{"line":1,"column":512}},{"source":"../../src/normalize-viewport-props.ts","name":"maxLatitude","original":{"line":48,"column":21},"generated":{"line":1,"column":514}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":49,"column":8},"generated":{"line":1,"column":518}},{"source":"../../src/normalize-viewport-props.ts","name":"maxLatitude","original":{"line":49,"column":19},"generated":{"line":1,"column":520}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":524}},{"source":"../../src/normalize-viewport-props.ts","name":null,"original":{"line":54,"column":9},"generated":{"line":1,"column":530}},{"source":"../../src/normalize-viewport-props.ts","name":"width","original":{"line":54,"column":10},"generated":{"line":1,"column":531}},{"source":"../../src/normalize-viewport-props.ts","name":"width","original":{"line":54,"column":10},"generated":{"line":1,"column":537}},{"source":"../../src/normalize-viewport-props.ts","name":"height","original":{"line":54,"column":17},"generated":{"line":1,"column":539}},{"source":"../../src/normalize-viewport-props.ts","name":"height","original":{"line":54,"column":17},"generated":{"line":1,"column":546}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":54,"column":25},"generated":{"line":1,"column":548}},{"source":"../../src/normalize-viewport-props.ts","name":"longitude","original":{"line":54,"column":25},"generated":{"line":1,"column":558}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":54,"column":36},"generated":{"line":1,"column":560}},{"source":"../../src/normalize-viewport-props.ts","name":"latitude","original":{"line":54,"column":36},"generated":{"line":1,"column":569}},{"source":"../../src/normalize-viewport-props.ts","name":"zoom","original":{"line":54,"column":46},"generated":{"line":1,"column":571}},{"source":"../../src/normalize-viewport-props.ts","name":"zoom","original":{"line":54,"column":46},"generated":{"line":1,"column":576}},{"source":"../../src/normalize-viewport-props.ts","name":"pitch","original":{"line":54,"column":52},"generated":{"line":1,"column":578}},{"source":"../../src/normalize-viewport-props.ts","name":"pitch","original":{"line":54,"column":52},"generated":{"line":1,"column":584}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":54,"column":59},"generated":{"line":1,"column":586}},{"source":"../../src/normalize-viewport-props.ts","name":"bearing","original":{"line":54,"column":59},"generated":{"line":1,"column":594}}],"sources":{"../../src/normalize-viewport-props.ts":"import {worldToLngLat} from './web-mercator-utils';\nimport {mod, log2} from './math-utils';\n\n// defined by mapbox-gl\nconst TILE_SIZE = 512;\n\n/** Description of viewport */\nexport type ViewportProps = {\n  width: number;\n  height: number;\n  longitude: number;\n  latitude: number;\n  zoom: number;\n  pitch?: number;\n  bearing?: number;\n};\n\n/**\n * Apply mathematical constraints to viewport props\n * @param props\n */\n// eslint-disable-next-line complexity\nexport default function normalizeViewportProps(props: ViewportProps): ViewportProps {\n  const {width, height, pitch = 0} = props;\n  let {longitude, latitude, zoom, bearing = 0} = props;\n\n  // Normalize degrees\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  // Constrain zoom and shift center at low zoom levels\n  const minZoom = log2(height / TILE_SIZE);\n  if (zoom <= minZoom) {\n    zoom = minZoom;\n    latitude = 0;\n  } else {\n    // Eliminate white space above and below the map\n    const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n    const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n    if (latitude < minLatitude) {\n      latitude = minLatitude;\n    } else {\n      const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n      if (latitude > maxLatitude) {\n        latitude = maxLatitude;\n      }\n    }\n  }\n\n  return {width, height, longitude, latitude, zoom, pitch, bearing};\n}\n"},"lineCount":null}},"error":null,"hash":"310cdc8a50b1f8cc534d745378d205b4","cacheData":{"env":{}}}