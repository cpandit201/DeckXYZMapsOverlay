{"id":"AJ0f","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"../../lib/constants","loc":{"line":1,"column":34,"index":34},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/constants.js"},{"name":"./viewport-uniforms","loc":{"line":2,"column":32,"index":89},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js"},{"name":"../../viewports/web-mercator-viewport","loc":{"line":3,"column":32,"index":144},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js"},{"name":"gl-matrix/vec4","loc":{"line":4,"column":22,"index":207},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","resolved":"/project/deck-gl-examples-01/node_modules/gl-matrix/esm/vec4.js"},{"name":"gl-matrix/vec3","loc":{"line":5,"column":22,"index":247},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","resolved":"/project/deck-gl-examples-01/node_modules/gl-matrix/esm/vec3.js"},{"name":"@math.gl/web-mercator","loc":{"line":6,"column":34,"index":299},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","resolved":"/project/deck-gl-examples-01/node_modules/@math.gl/web-mercator/dist/esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.getWorldPosition=O,exports.projectPosition=l;var e=require(\"../../lib/constants\"),t=require(\"./viewport-uniforms\"),r=c(require(\"../../viewports/web-mercator-viewport\")),o=s(require(\"gl-matrix/vec4\")),i=s(require(\"gl-matrix/vec3\")),n=require(\"@math.gl/web-mercator\");function a(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(\"default\"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=i?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function c(e){return e&&e.__esModule?e:{default:e}}const f=[0,0,0];function u(e,t,o=!1){const i=t.projectPosition(e);if(o&&t instanceof r.default){const[r,o,n=0]=e,a=t.getDistanceScales([r,o]);i[2]=n*a.unitsPerMeter[2]}return i}function d(t){const{viewport:r,modelMatrix:o,coordinateOrigin:i}=t;let{coordinateSystem:n,fromCoordinateSystem:a,fromCoordinateOrigin:s}=t;return n===e.COORDINATE_SYSTEM.DEFAULT&&(n=r.isGeospatial?e.COORDINATE_SYSTEM.LNGLAT:e.COORDINATE_SYSTEM.CARTESIAN),void 0===a&&(a=n),void 0===s&&(s=i),{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}}function O(t,{viewport:r,modelMatrix:i,coordinateSystem:a,coordinateOrigin:s,offsetMode:c}){let[f,d,O=0]=t;switch(i&&([f,d,O]=o.transformMat4([],[f,d,O,1],i)),a){case e.COORDINATE_SYSTEM.LNGLAT:return u([f,d,O],r,c);case e.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return u([f+s[0],d+s[1],O+(s[2]||0)],r,c);case e.COORDINATE_SYSTEM.METER_OFFSETS:return u((0,n.addMetersToLngLat)(s,[f,d,O]),r,c);case e.COORDINATE_SYSTEM.CARTESIAN:default:return r.isGeospatial?[f+s[0],d+s[1],O+s[2]]:r.projectPosition([f,d,O])}}function l(e,r){const{viewport:o,coordinateSystem:n,coordinateOrigin:a,modelMatrix:s,fromCoordinateSystem:c,fromCoordinateOrigin:u}=d(r),{autoOffset:l=!0}=r,{geospatialOrigin:p=f,shaderCoordinateOrigin:S=f,offsetMode:m=!1}=l?(0,t.getOffsetOrigin)(o,n,a):{},M=O(e,{viewport:o,modelMatrix:s,coordinateSystem:c,coordinateOrigin:u,offsetMode:m});if(m){const e=o.projectPosition(p||S);i.sub(M,M,e)}return M}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":93}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":95}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":103}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":188,"column":1},"generated":{"line":1,"column":119}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":121}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":125}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":127}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":135}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":158}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":160}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":168}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":191}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":193}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":195}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":203}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":245}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":247}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":249}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":257}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":276}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":278}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":280}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":288}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":307}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":309}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":317}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":342}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":351}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":353}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":356}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":359}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":378}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":386}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":393}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":398}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":402}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":404}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":408}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":416}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":418}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":422}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":430}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":437}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":439}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":448}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":451}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":458}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":460}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":462}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":466}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":469}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":478}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":480}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":482}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":485}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":489}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":492}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":495}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":497}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":508}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":515}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":517}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":520}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":527}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":530}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":547}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":550}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":569}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":571}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":577}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":578}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":586}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":589}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":593}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":595}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":597}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":600}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":603}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":606}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":608}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":612}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":615}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":622}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":624}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":628}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":631}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":635}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":637}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":640}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":642}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":649}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":665}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":672}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":697}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":701}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":705}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":710}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":712}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":715}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":727}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":730}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":737}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":747}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":762}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":767}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":769}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":772}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":773}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":777}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":779}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":781}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":788}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":813}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":815}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":818}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":823}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":827}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":829}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":834}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":836}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":841}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":848}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":863}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":865}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":867}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":870}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":872}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":875}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":877}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":880}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":887}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":889}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":897}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":899}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":902}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":904}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":908}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":910}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":913}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":915}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":924}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":926}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":929}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":936}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":939}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":941}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":952}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":954}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":955}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":963}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":966}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"DEFAULT_COORDINATE_ORIGIN","original":{"line":17,"column":6},"generated":{"line":1,"column":972}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":17,"column":34},"generated":{"line":1,"column":974}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":17,"column":35},"generated":{"line":1,"column":975}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":17,"column":38},"generated":{"line":1,"column":977}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":17,"column":41},"generated":{"line":1,"column":979}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":982}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZToWorldPosition","original":{"line":22,"column":9},"generated":{"line":1,"column":991}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZ","original":{"line":23,"column":2},"generated":{"line":1,"column":993}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":24,"column":2},"generated":{"line":1,"column":995}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":25,"column":2},"generated":{"line":1,"column":997}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":1000}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":1,"column":1003}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"p","original":{"line":27,"column":8},"generated":{"line":1,"column":1009}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":27,"column":12},"generated":{"line":1,"column":1011}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"projectPosition","original":{"line":27,"column":21},"generated":{"line":1,"column":1013}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZ","original":{"line":27,"column":37},"generated":{"line":1,"column":1029}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":1032}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":30,"column":6},"generated":{"line":1,"column":1035}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":30,"column":20},"generated":{"line":1,"column":1038}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"WebMercatorViewport","original":{"line":30,"column":40},"generated":{"line":1,"column":1051}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":1,"column":1053}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":30,"column":61},"generated":{"line":1,"column":1061}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":1062}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"longitude","original":{"line":31,"column":11},"generated":{"line":1,"column":1068}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"latitude","original":{"line":31,"column":22},"generated":{"line":1,"column":1070}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":31,"column":32},"generated":{"line":1,"column":1072}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":31,"column":36},"generated":{"line":1,"column":1074}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZ","original":{"line":31,"column":41},"generated":{"line":1,"column":1077}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"distanceScales","original":{"line":32,"column":10},"generated":{"line":1,"column":1079}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":32,"column":27},"generated":{"line":1,"column":1081}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"getDistanceScales","original":{"line":32,"column":36},"generated":{"line":1,"column":1083}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":32,"column":54},"generated":{"line":1,"column":1101}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"longitude","original":{"line":32,"column":55},"generated":{"line":1,"column":1102}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"latitude","original":{"line":32,"column":66},"generated":{"line":1,"column":1104}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"p","original":{"line":33,"column":4},"generated":{"line":1,"column":1108}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":1110}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":33,"column":11},"generated":{"line":1,"column":1113}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"distanceScales","original":{"line":33,"column":15},"generated":{"line":1,"column":1115}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"unitsPerMeter","original":{"line":33,"column":30},"generated":{"line":1,"column":1117}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":33,"column":44},"generated":{"line":1,"column":1131}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":1134}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"p","original":{"line":35,"column":9},"generated":{"line":1,"column":1141}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":1,"column":1143}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"normalizeParameters","original":{"line":38,"column":9},"generated":{"line":1,"column":1152}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"opts","original":{"line":38,"column":29},"generated":{"line":1,"column":1154}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":1157}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1163}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":53,"column":9},"generated":{"line":1,"column":1172}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1174}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":53,"column":19},"generated":{"line":1,"column":1186}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1188}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":53,"column":32},"generated":{"line":1,"column":1205}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"opts","original":{"line":53,"column":52},"generated":{"line":1,"column":1208}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":1210}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":1214}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":54,"column":7},"generated":{"line":1,"column":1231}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":1233}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":54,"column":25},"generated":{"line":1,"column":1254}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":1256}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":54,"column":47},"generated":{"line":1,"column":1277}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"opts","original":{"line":54,"column":71},"generated":{"line":1,"column":1280}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":69,"column":2},"generated":{"line":1,"column":1282}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":56,"column":6},"generated":{"line":1,"column":1289}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":56,"column":27},"generated":{"line":1,"column":1293}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":56,"column":44},"generated":{"line":1,"column":1295}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"DEFAULT","original":{"line":56,"column":45},"generated":{"line":1,"column":1313}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":57,"column":4},"generated":{"line":1,"column":1323}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":57,"column":23},"generated":{"line":1,"column":1325}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"isGeospatial","original":{"line":57,"column":32},"generated":{"line":1,"column":1327}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":58,"column":8},"generated":{"line":1,"column":1340}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":58,"column":25},"generated":{"line":1,"column":1342}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"LNGLAT","original":{"line":58,"column":26},"generated":{"line":1,"column":1360}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":59,"column":8},"generated":{"line":1,"column":1367}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":1,"column":1369}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"CARTESIAN","original":{"line":59,"column":26},"generated":{"line":1,"column":1387}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"undefined","original":{"line":62,"column":31},"generated":{"line":1,"column":1403}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":62,"column":6},"generated":{"line":1,"column":1407}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":63,"column":4},"generated":{"line":1,"column":1411}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":63,"column":27},"generated":{"line":1,"column":1413}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"undefined","original":{"line":65,"column":31},"generated":{"line":1,"column":1421}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":65,"column":6},"generated":{"line":1,"column":1425}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":66,"column":4},"generated":{"line":1,"column":1429}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":66,"column":27},"generated":{"line":1,"column":1431}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":69,"column":9},"generated":{"line":1,"column":1434}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":70,"column":4},"generated":{"line":1,"column":1435}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":70,"column":4},"generated":{"line":1,"column":1444}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":71,"column":4},"generated":{"line":1,"column":1446}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":71,"column":4},"generated":{"line":1,"column":1463}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":72,"column":4},"generated":{"line":1,"column":1465}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":72,"column":4},"generated":{"line":1,"column":1482}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":73,"column":4},"generated":{"line":1,"column":1484}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":73,"column":4},"generated":{"line":1,"column":1496}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":74,"column":4},"generated":{"line":1,"column":1498}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":74,"column":4},"generated":{"line":1,"column":1519}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":75,"column":4},"generated":{"line":1,"column":1521}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":75,"column":4},"generated":{"line":1,"column":1542}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":80,"column":7},"generated":{"line":1,"column":1545}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"getWorldPosition","original":{"line":80,"column":16},"generated":{"line":1,"column":1554}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"position","original":{"line":81,"column":2},"generated":{"line":1,"column":1556}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":82,"column":2},"generated":{"line":1,"column":1559}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":83,"column":4},"generated":{"line":1,"column":1568}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":82,"column":2},"generated":{"line":1,"column":1570}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":84,"column":4},"generated":{"line":1,"column":1582}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":82,"column":2},"generated":{"line":1,"column":1584}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":85,"column":4},"generated":{"line":1,"column":1601}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":82,"column":2},"generated":{"line":1,"column":1603}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":86,"column":4},"generated":{"line":1,"column":1620}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":82,"column":2},"generated":{"line":1,"column":1622}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":87,"column":4},"generated":{"line":1,"column":1633}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1637}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":96,"column":7},"generated":{"line":1,"column":1641}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":96,"column":10},"generated":{"line":1,"column":1643}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":96,"column":13},"generated":{"line":1,"column":1645}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":96,"column":17},"generated":{"line":1,"column":1647}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"position","original":{"line":96,"column":22},"generated":{"line":1,"column":1650}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":102,"column":2},"generated":{"line":1,"column":1652}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":98,"column":6},"generated":{"line":1,"column":1659}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":99,"column":5},"generated":{"line":1,"column":1664}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":99,"column":8},"generated":{"line":1,"column":1666}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":99,"column":11},"generated":{"line":1,"column":1668}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"vec4","original":{"line":99,"column":16},"generated":{"line":1,"column":1671}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"transformMat4","original":{"line":99,"column":21},"generated":{"line":1,"column":1673}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":99,"column":35},"generated":{"line":1,"column":1687}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":99,"column":39},"generated":{"line":1,"column":1690}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":99,"column":40},"generated":{"line":1,"column":1691}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":99,"column":43},"generated":{"line":1,"column":1693}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":99,"column":46},"generated":{"line":1,"column":1695}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":99,"column":49},"generated":{"line":1,"column":1697}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":99,"column":55},"generated":{"line":1,"column":1700}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":102,"column":10},"generated":{"line":1,"column":1704}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":103,"column":4},"generated":{"line":1,"column":1707}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":103,"column":9},"generated":{"line":1,"column":1712}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":103,"column":26},"generated":{"line":1,"column":1714}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"LNGLAT","original":{"line":103,"column":27},"generated":{"line":1,"column":1732}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":104,"column":6},"generated":{"line":1,"column":1739}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZToWorldPosition","original":{"line":104,"column":13},"generated":{"line":1,"column":1746}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":104,"column":36},"generated":{"line":1,"column":1748}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":104,"column":37},"generated":{"line":1,"column":1749}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":104,"column":40},"generated":{"line":1,"column":1751}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":104,"column":43},"generated":{"line":1,"column":1753}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":104,"column":47},"generated":{"line":1,"column":1756}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":104,"column":57},"generated":{"line":1,"column":1758}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":106,"column":4},"generated":{"line":1,"column":1761}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":106,"column":9},"generated":{"line":1,"column":1766}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":106,"column":26},"generated":{"line":1,"column":1768}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"LNGLAT_OFFSETS","original":{"line":106,"column":27},"generated":{"line":1,"column":1786}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":1801}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZToWorldPosition","original":{"line":107,"column":13},"generated":{"line":1,"column":1808}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":1810}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":108,"column":9},"generated":{"line":1,"column":1811}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":108,"column":13},"generated":{"line":1,"column":1813}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":108,"column":30},"generated":{"line":1,"column":1815}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":108,"column":34},"generated":{"line":1,"column":1818}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":108,"column":38},"generated":{"line":1,"column":1820}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":108,"column":55},"generated":{"line":1,"column":1822}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":108,"column":59},"generated":{"line":1,"column":1825}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":108,"column":64},"generated":{"line":1,"column":1828}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":108,"column":81},"generated":{"line":1,"column":1830}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":108,"column":87},"generated":{"line":1,"column":1834}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":109,"column":8},"generated":{"line":1,"column":1838}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":110,"column":8},"generated":{"line":1,"column":1840}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":1,"column":1843}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":113,"column":9},"generated":{"line":1,"column":1848}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":113,"column":26},"generated":{"line":1,"column":1850}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"METER_OFFSETS","original":{"line":113,"column":27},"generated":{"line":1,"column":1868}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":114,"column":6},"generated":{"line":1,"column":1882}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"lngLatZToWorldPosition","original":{"line":114,"column":13},"generated":{"line":1,"column":1889}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"addMetersToLngLat","original":{"line":115,"column":8},"generated":{"line":1,"column":1892}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"addMetersToLngLat","original":{"line":115,"column":8},"generated":{"line":1,"column":1894}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":115,"column":25},"generated":{"line":1,"column":1896}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":115,"column":26},"generated":{"line":1,"column":1915}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":115,"column":44},"generated":{"line":1,"column":1917}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":115,"column":45},"generated":{"line":1,"column":1918}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":115,"column":48},"generated":{"line":1,"column":1920}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":115,"column":51},"generated":{"line":1,"column":1922}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":116,"column":8},"generated":{"line":1,"column":1926}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":117,"column":8},"generated":{"line":1,"column":1928}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":120,"column":4},"generated":{"line":1,"column":1931}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"COORDINATE_SYSTEM","original":{"line":120,"column":9},"generated":{"line":1,"column":1936}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":120,"column":26},"generated":{"line":1,"column":1938}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"CARTESIAN","original":{"line":120,"column":27},"generated":{"line":1,"column":1956}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":121,"column":4},"generated":{"line":1,"column":1966}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":122,"column":6},"generated":{"line":1,"column":1974}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":122,"column":13},"generated":{"line":1,"column":1981}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"isGeospatial","original":{"line":122,"column":22},"generated":{"line":1,"column":1983}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":123,"column":10},"generated":{"line":1,"column":1996}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":123,"column":11},"generated":{"line":1,"column":1997}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":123,"column":15},"generated":{"line":1,"column":1999}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":123,"column":32},"generated":{"line":1,"column":2001}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":123,"column":36},"generated":{"line":1,"column":2004}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":123,"column":40},"generated":{"line":1,"column":2006}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":123,"column":57},"generated":{"line":1,"column":2008}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":123,"column":61},"generated":{"line":1,"column":2011}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":123,"column":65},"generated":{"line":1,"column":2013}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":123,"column":82},"generated":{"line":1,"column":2015}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":124,"column":10},"generated":{"line":1,"column":2019}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"projectPosition","original":{"line":124,"column":19},"generated":{"line":1,"column":2021}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":124,"column":35},"generated":{"line":1,"column":2037}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"x","original":{"line":124,"column":36},"generated":{"line":1,"column":2038}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"y","original":{"line":124,"column":39},"generated":{"line":1,"column":2040}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"z","original":{"line":124,"column":42},"generated":{"line":1,"column":2042}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":133,"column":7},"generated":{"line":1,"column":2047}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"projectPosition","original":{"line":133,"column":16},"generated":{"line":1,"column":2056}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"position","original":{"line":134,"column":2},"generated":{"line":1,"column":2058}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"params","original":{"line":135,"column":2},"generated":{"line":1,"column":2060}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":2},"generated":{"line":1,"column":2063}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":2069}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":157,"column":4},"generated":{"line":1,"column":2078}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":2080}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":158,"column":4},"generated":{"line":1,"column":2097}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":2099}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":159,"column":4},"generated":{"line":1,"column":2116}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":2118}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":160,"column":4},"generated":{"line":1,"column":2130}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":2132}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":161,"column":4},"generated":{"line":1,"column":2153}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":156,"column":8},"generated":{"line":1,"column":2155}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":162,"column":4},"generated":{"line":1,"column":2176}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"normalizeParameters","original":{"line":163,"column":6},"generated":{"line":1,"column":2179}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"params","original":{"line":163,"column":26},"generated":{"line":1,"column":2181}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":164,"column":8},"generated":{"line":1,"column":2185}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"autoOffset","original":{"line":164,"column":9},"generated":{"line":1,"column":2196}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":164,"column":22},"generated":{"line":1,"column":2199}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"params","original":{"line":164,"column":30},"generated":{"line":1,"column":2202}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":166,"column":8},"generated":{"line":1,"column":2205}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"geospatialOrigin","original":{"line":167,"column":4},"generated":{"line":1,"column":2222}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"DEFAULT_COORDINATE_ORIGIN","original":{"line":167,"column":23},"generated":{"line":1,"column":2224}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":166,"column":8},"generated":{"line":1,"column":2226}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"shaderCoordinateOrigin","original":{"line":168,"column":4},"generated":{"line":1,"column":2249}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"DEFAULT_COORDINATE_ORIGIN","original":{"line":168,"column":29},"generated":{"line":1,"column":2251}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":166,"column":8},"generated":{"line":1,"column":2253}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":169,"column":4},"generated":{"line":1,"column":2264}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":169,"column":17},"generated":{"line":1,"column":2267}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"autoOffset","original":{"line":170,"column":6},"generated":{"line":1,"column":2270}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"getOffsetOrigin","original":{"line":170,"column":19},"generated":{"line":1,"column":2273}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"getOffsetOrigin","original":{"line":170,"column":19},"generated":{"line":1,"column":2275}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":170,"column":34},"generated":{"line":1,"column":2277}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":170,"column":35},"generated":{"line":1,"column":2294}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":170,"column":45},"generated":{"line":1,"column":2296}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":170,"column":63},"generated":{"line":1,"column":2298}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":170,"column":83},"generated":{"line":1,"column":2301}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"worldPosition","original":{"line":172,"column":8},"generated":{"line":1,"column":2304}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"getWorldPosition","original":{"line":172,"column":24},"generated":{"line":1,"column":2306}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"position","original":{"line":172,"column":41},"generated":{"line":1,"column":2308}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":172,"column":51},"generated":{"line":1,"column":2310}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":173,"column":4},"generated":{"line":1,"column":2311}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":173,"column":4},"generated":{"line":1,"column":2320}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":174,"column":4},"generated":{"line":1,"column":2322}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"modelMatrix","original":{"line":174,"column":4},"generated":{"line":1,"column":2334}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateSystem","original":{"line":175,"column":4},"generated":{"line":1,"column":2336}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateSystem","original":{"line":175,"column":22},"generated":{"line":1,"column":2353}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"coordinateOrigin","original":{"line":176,"column":4},"generated":{"line":1,"column":2355}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"fromCoordinateOrigin","original":{"line":176,"column":22},"generated":{"line":1,"column":2372}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":177,"column":4},"generated":{"line":1,"column":2374}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":177,"column":4},"generated":{"line":1,"column":2385}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":180,"column":2},"generated":{"line":1,"column":2389}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"offsetMode","original":{"line":180,"column":6},"generated":{"line":1,"column":2392}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":180,"column":18},"generated":{"line":1,"column":2394}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":181,"column":4},"generated":{"line":1,"column":2395}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"positionCommonSpace","original":{"line":181,"column":10},"generated":{"line":1,"column":2401}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"viewport","original":{"line":181,"column":32},"generated":{"line":1,"column":2403}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"projectPosition","original":{"line":181,"column":41},"generated":{"line":1,"column":2405}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"geospatialOrigin","original":{"line":182,"column":6},"generated":{"line":1,"column":2421}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"shaderCoordinateOrigin","original":{"line":182,"column":26},"generated":{"line":1,"column":2424}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"vec3","original":{"line":184,"column":4},"generated":{"line":1,"column":2427}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"sub","original":{"line":184,"column":9},"generated":{"line":1,"column":2429}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"worldPosition","original":{"line":184,"column":13},"generated":{"line":1,"column":2433}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"worldPosition","original":{"line":184,"column":28},"generated":{"line":1,"column":2435}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"positionCommonSpace","original":{"line":184,"column":43},"generated":{"line":1,"column":2437}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":null,"original":{"line":187,"column":2},"generated":{"line":1,"column":2440}},{"source":"../../../../src/shaderlib/project/project-functions.ts","name":"worldPosition","original":{"line":187,"column":9},"generated":{"line":1,"column":2447}}],"sources":{"../../../../src/shaderlib/project/project-functions.ts":"/**\n * Projection utils\n * TODO: move to Viewport class?\n */\nimport {COORDINATE_SYSTEM} from '../../lib/constants';\nimport {getOffsetOrigin} from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\n\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport {addMetersToLngLat} from '@math.gl/web-mercator';\n\nimport type {CoordinateSystem} from '../../lib/constants';\nimport type Viewport from '../../viewports/viewport';\nimport type {NumericArray} from '../../types/types';\n\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\n\n// In project.glsl, offset modes calculate z differently from LNG_LAT mode.\n// offset modes apply the y adjustment (unitsPerMeter2) when projecting z\n// LNG_LAT mode only use the linear scale.\nfunction lngLatZToWorldPosition(\n  lngLatZ: [number, number, number],\n  viewport: Viewport,\n  offsetMode: boolean = false\n): [number, number, number] {\n  const p = viewport.projectPosition(lngLatZ);\n\n  // TODO - avoid using instanceof\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n  return p;\n}\n\nfunction normalizeParameters(opts: {\n  viewport: Viewport;\n  coordinateSystem: CoordinateSystem;\n  coordinateOrigin: [number, number, number];\n  modelMatrix?: NumericArray | null;\n  fromCoordinateSystem?: CoordinateSystem;\n  fromCoordinateOrigin?: [number, number, number];\n}): {\n  viewport: Viewport;\n  coordinateSystem: CoordinateSystem;\n  coordinateOrigin: [number, number, number];\n  modelMatrix?: NumericArray | null;\n  fromCoordinateSystem: CoordinateSystem;\n  fromCoordinateOrigin: [number, number, number];\n} {\n  const {viewport, modelMatrix, coordinateOrigin} = opts;\n  let {coordinateSystem, fromCoordinateSystem, fromCoordinateOrigin} = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial\n      ? COORDINATE_SYSTEM.LNGLAT\n      : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    fromCoordinateSystem = coordinateSystem;\n  }\n  if (fromCoordinateOrigin === undefined) {\n    fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  return {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  };\n}\n\n/** Get the common space position from world coordinates in the given coordinate system */\nexport function getWorldPosition(\n  position: number[],\n  {\n    viewport,\n    modelMatrix,\n    coordinateSystem,\n    coordinateOrigin,\n    offsetMode\n  }: {\n    viewport: Viewport;\n    modelMatrix?: NumericArray | null;\n    coordinateSystem: CoordinateSystem;\n    coordinateOrigin: [number, number, number];\n    offsetMode?: boolean;\n  }\n): [number, number, number] {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition(\n        [x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)],\n        viewport,\n        offsetMode\n      );\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(\n        addMetersToLngLat(coordinateOrigin, [x, y, z]) as [number, number, number],\n        viewport,\n        offsetMode\n      );\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial\n        ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]]\n        : viewport.projectPosition([x, y, z]);\n  }\n}\n\n/**\n * Equivalent to project_position in project.glsl\n * projects a user supplied position to world position directly with or without\n * a reference coordinate system\n */\nexport function projectPosition(\n  position: number[],\n  params: {\n    /** The current viewport */\n    viewport: Viewport;\n    /** The reference coordinate system used to align world position */\n    coordinateSystem: CoordinateSystem;\n    /** The reference coordinate origin used to align world position */\n    coordinateOrigin: [number, number, number];\n    /** The model matrix of the supplied position */\n    modelMatrix?: NumericArray | null;\n    /** The coordinate system that the supplied position is in. Default to the same as `coordinateSystem`. */\n    fromCoordinateSystem?: CoordinateSystem;\n    /** The coordinate origin that the supplied position is in. Default to the same as `coordinateOrigin`. */\n    fromCoordinateOrigin?: [number, number, number];\n    /** Whether to apply offset mode automatically as does the project shader module.\n     * Offset mode places the origin of the common space at the given viewport's center. It is used in some use cases\n     * to improve precision in the vertex shader due to the fp32 float limitation.\n     * Use `autoOffset:false` if the returned position should not be dependent on the current viewport.\n     * Default `true` */\n    autoOffset?: boolean;\n  }\n): [number, number, number] {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {autoOffset = true} = params;\n\n  const {\n    geospatialOrigin = DEFAULT_COORDINATE_ORIGIN,\n    shaderCoordinateOrigin = DEFAULT_COORDINATE_ORIGIN,\n    offsetMode = false\n  } = autoOffset ? getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin) : {};\n\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(\n      geospatialOrigin || shaderCoordinateOrigin\n    );\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n"},"lineCount":null}},"error":null,"hash":"fb124d2b727a2886a45b4eb208102dad","cacheData":{"env":{}}}