{"id":"Eruv","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js.map","includedInParent":true,"mtime":1688284130514},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/package.json","includedInParent":true,"mtime":1688284130514},{"name":"../../utils/log","loc":{"line":1,"column":16,"index":16},"parent":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","resolved":"/project/deck-gl-examples-01/node_modules/@deck.gl/core/dist/esm/utils/log.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.getClosestObject=r,exports.getUniqueObjects=i;var e=o(require(\"../../utils/log\"));function o(e){return e&&e.__esModule?e:{default:e}}const t={pickedColor:null,pickedObjectIndex:-1};function r({pickedColors:o,decodePickingColor:r,deviceX:i,deviceY:c,deviceRadius:n,deviceRect:s}){const{x:l,y:d,width:u,height:f}=s;let p=n*n,a=-1,k=0;for(let e=0;e<f;e++){const t=e+d-c,r=t*t;if(r>p)k+=4*u;else for(let e=0;e<u;e++){if(o[k+3]-1>=0){const o=e+l-i,t=o*o+r;t<=p&&(p=t,a=k)}k+=4}}if(a>=0){const t=o.slice(a,a+4),i=r(t);if(i){const e=Math.floor(a/4/u),o=a/4-e*u;return{...i,pickedColor:t,pickedX:l+o,pickedY:d+e}}e.default.error(\"Picked non-existent layer. Is picking buffer corrupt?\")()}return t}function i({pickedColors:o,decodePickingColor:t}){const r=new Map;if(o)for(let i=0;i<o.length;i+=4){if(o[i+3]-1>=0){const c=o.slice(i,i+4),n=c.join(\",\");if(!r.has(n)){const o=t(c);o?r.set(n,{...o,color:c}):e.default.error(\"Picked non-existent layer. Is picking buffer corrupt?\")()}}}return Array.from(r.values())}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":93}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":95}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":103}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":152,"column":1},"generated":{"line":1,"column":120}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":122}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":126}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":128}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":130}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":138}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":158}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":167}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":169}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":172}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":179}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":182}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":184}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":195}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":197}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":198}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":206}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":1,"column":209}},{"source":"../../../../src/lib/picking/query-object.ts","name":"NO_PICKED_OBJECT","original":{"line":35,"column":6},"generated":{"line":1,"column":215}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":35,"column":25},"generated":{"line":1,"column":217}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":36,"column":2},"generated":{"line":1,"column":218}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":36,"column":15},"generated":{"line":1,"column":230}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObjectIndex","original":{"line":37,"column":2},"generated":{"line":1,"column":235}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":37,"column":22},"generated":{"line":1,"column":254}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":7},"generated":{"line":1,"column":257}},{"source":"../../../../src/lib/picking/query-object.ts","name":"getClosestObject","original":{"line":45,"column":16},"generated":{"line":1,"column":266}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":269}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":46,"column":2},"generated":{"line":1,"column":282}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":284}},{"source":"../../../../src/lib/picking/query-object.ts","name":"decodePickingColor","original":{"line":47,"column":2},"generated":{"line":1,"column":303}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":305}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceX","original":{"line":48,"column":2},"generated":{"line":1,"column":313}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":315}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceY","original":{"line":49,"column":2},"generated":{"line":1,"column":323}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":325}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceRadius","original":{"line":50,"column":2},"generated":{"line":1,"column":338}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":340}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceRect","original":{"line":51,"column":2},"generated":{"line":1,"column":351}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":62,"column":2},"generated":{"line":1,"column":355}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":361}},{"source":"../../../../src/lib/picking/query-object.ts","name":"x","original":{"line":62,"column":9},"generated":{"line":1,"column":363}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":365}},{"source":"../../../../src/lib/picking/query-object.ts","name":"y","original":{"line":62,"column":12},"generated":{"line":1,"column":367}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":369}},{"source":"../../../../src/lib/picking/query-object.ts","name":"width","original":{"line":62,"column":15},"generated":{"line":1,"column":375}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":377}},{"source":"../../../../src/lib/picking/query-object.ts","name":"height","original":{"line":62,"column":22},"generated":{"line":1,"column":384}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceRect","original":{"line":62,"column":32},"generated":{"line":1,"column":387}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":63,"column":2},"generated":{"line":1,"column":389}},{"source":"../../../../src/lib/picking/query-object.ts","name":"minSquareDistanceToCenter","original":{"line":63,"column":6},"generated":{"line":1,"column":393}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceRadius","original":{"line":63,"column":34},"generated":{"line":1,"column":395}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceRadius","original":{"line":63,"column":49},"generated":{"line":1,"column":397}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":64,"column":6},"generated":{"line":1,"column":399}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":1,"column":402}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":65,"column":6},"generated":{"line":1,"column":404}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":1,"column":406}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":67,"column":2},"generated":{"line":1,"column":408}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":67,"column":7},"generated":{"line":1,"column":412}},{"source":"../../../../src/lib/picking/query-object.ts","name":"row","original":{"line":67,"column":11},"generated":{"line":1,"column":416}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":67,"column":17},"generated":{"line":1,"column":418}},{"source":"../../../../src/lib/picking/query-object.ts","name":"row","original":{"line":67,"column":20},"generated":{"line":1,"column":420}},{"source":"../../../../src/lib/picking/query-object.ts","name":"height","original":{"line":67,"column":26},"generated":{"line":1,"column":422}},{"source":"../../../../src/lib/picking/query-object.ts","name":"row","original":{"line":67,"column":34},"generated":{"line":1,"column":424}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":67,"column":41},"generated":{"line":1,"column":428}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":429}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy","original":{"line":68,"column":10},"generated":{"line":1,"column":435}},{"source":"../../../../src/lib/picking/query-object.ts","name":"row","original":{"line":68,"column":15},"generated":{"line":1,"column":437}},{"source":"../../../../src/lib/picking/query-object.ts","name":"y","original":{"line":68,"column":21},"generated":{"line":1,"column":439}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceY","original":{"line":68,"column":25},"generated":{"line":1,"column":441}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy2","original":{"line":69,"column":10},"generated":{"line":1,"column":443}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy","original":{"line":69,"column":16},"generated":{"line":1,"column":445}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy","original":{"line":69,"column":21},"generated":{"line":1,"column":447}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":71,"column":4},"generated":{"line":1,"column":449}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy2","original":{"line":71,"column":8},"generated":{"line":1,"column":452}},{"source":"../../../../src/lib/picking/query-object.ts","name":"minSquareDistanceToCenter","original":{"line":71,"column":14},"generated":{"line":1,"column":454}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":73,"column":6},"generated":{"line":1,"column":456}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":73,"column":11},"generated":{"line":1,"column":459}},{"source":"../../../../src/lib/picking/query-object.ts","name":"width","original":{"line":73,"column":15},"generated":{"line":1,"column":461}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":75,"column":6},"generated":{"line":1,"column":468}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":75,"column":11},"generated":{"line":1,"column":472}},{"source":"../../../../src/lib/picking/query-object.ts","name":"col","original":{"line":75,"column":15},"generated":{"line":1,"column":476}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":75,"column":21},"generated":{"line":1,"column":478}},{"source":"../../../../src/lib/picking/query-object.ts","name":"col","original":{"line":75,"column":24},"generated":{"line":1,"column":480}},{"source":"../../../../src/lib/picking/query-object.ts","name":"width","original":{"line":75,"column":30},"generated":{"line":1,"column":482}},{"source":"../../../../src/lib/picking/query-object.ts","name":"col","original":{"line":75,"column":37},"generated":{"line":1,"column":484}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":75,"column":44},"generated":{"line":1,"column":488}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":489}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":77,"column":33},"generated":{"line":1,"column":492}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":77,"column":46},"generated":{"line":1,"column":494}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":77,"column":50},"generated":{"line":1,"column":496}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":77,"column":55},"generated":{"line":1,"column":499}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":79,"column":32},"generated":{"line":1,"column":502}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":79,"column":35},"generated":{"line":1,"column":504}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":80,"column":10},"generated":{"line":1,"column":505}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dx","original":{"line":80,"column":16},"generated":{"line":1,"column":511}},{"source":"../../../../src/lib/picking/query-object.ts","name":"col","original":{"line":80,"column":21},"generated":{"line":1,"column":513}},{"source":"../../../../src/lib/picking/query-object.ts","name":"x","original":{"line":80,"column":27},"generated":{"line":1,"column":515}},{"source":"../../../../src/lib/picking/query-object.ts","name":"deviceX","original":{"line":80,"column":31},"generated":{"line":1,"column":517}},{"source":"../../../../src/lib/picking/query-object.ts","name":"d2","original":{"line":81,"column":16},"generated":{"line":1,"column":519}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dx","original":{"line":81,"column":21},"generated":{"line":1,"column":521}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dx","original":{"line":81,"column":26},"generated":{"line":1,"column":523}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy2","original":{"line":81,"column":31},"generated":{"line":1,"column":525}},{"source":"../../../../src/lib/picking/query-object.ts","name":"d2","original":{"line":83,"column":14},"generated":{"line":1,"column":527}},{"source":"../../../../src/lib/picking/query-object.ts","name":"minSquareDistanceToCenter","original":{"line":83,"column":20},"generated":{"line":1,"column":530}},{"source":"../../../../src/lib/picking/query-object.ts","name":"minSquareDistanceToCenter","original":{"line":84,"column":12},"generated":{"line":1,"column":534}},{"source":"../../../../src/lib/picking/query-object.ts","name":"d2","original":{"line":84,"column":40},"generated":{"line":1,"column":536}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":85,"column":12},"generated":{"line":1,"column":538}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":85,"column":32},"generated":{"line":1,"column":540}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":88,"column":8},"generated":{"line":1,"column":543}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":88,"column":13},"generated":{"line":1,"column":546}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":549}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":93,"column":6},"generated":{"line":1,"column":552}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":93,"column":27},"generated":{"line":1,"column":555}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":93,"column":30},"generated":{"line":1,"column":557}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":95,"column":4},"generated":{"line":1,"column":558}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":95,"column":10},"generated":{"line":1,"column":564}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":95,"column":24},"generated":{"line":1,"column":566}},{"source":"../../../../src/lib/picking/query-object.ts","name":"slice","original":{"line":95,"column":37},"generated":{"line":1,"column":568}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":95,"column":43},"generated":{"line":1,"column":574}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":95,"column":62},"generated":{"line":1,"column":576}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":95,"column":82},"generated":{"line":1,"column":578}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObject","original":{"line":96,"column":10},"generated":{"line":1,"column":581}},{"source":"../../../../src/lib/picking/query-object.ts","name":"decodePickingColor","original":{"line":96,"column":25},"generated":{"line":1,"column":583}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":96,"column":44},"generated":{"line":1,"column":585}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":97,"column":4},"generated":{"line":1,"column":588}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObject","original":{"line":97,"column":8},"generated":{"line":1,"column":591}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":97,"column":22},"generated":{"line":1,"column":593}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":98,"column":6},"generated":{"line":1,"column":594}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy","original":{"line":98,"column":12},"generated":{"line":1,"column":600}},{"source":"../../../../src/lib/picking/query-object.ts","name":"Math","original":{"line":98,"column":17},"generated":{"line":1,"column":602}},{"source":"../../../../src/lib/picking/query-object.ts","name":"floor","original":{"line":98,"column":22},"generated":{"line":1,"column":607}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":98,"column":28},"generated":{"line":1,"column":613}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":98,"column":48},"generated":{"line":1,"column":615}},{"source":"../../../../src/lib/picking/query-object.ts","name":"width","original":{"line":98,"column":52},"generated":{"line":1,"column":617}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dx","original":{"line":99,"column":12},"generated":{"line":1,"column":620}},{"source":"../../../../src/lib/picking/query-object.ts","name":"closestPixelIndex","original":{"line":99,"column":17},"generated":{"line":1,"column":622}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":99,"column":37},"generated":{"line":1,"column":624}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy","original":{"line":99,"column":41},"generated":{"line":1,"column":626}},{"source":"../../../../src/lib/picking/query-object.ts","name":"width","original":{"line":99,"column":46},"generated":{"line":1,"column":628}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":100,"column":6},"generated":{"line":1,"column":630}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":100,"column":13},"generated":{"line":1,"column":636}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObject","original":{"line":101,"column":11},"generated":{"line":1,"column":640}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":102,"column":8},"generated":{"line":1,"column":642}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":102,"column":8},"generated":{"line":1,"column":654}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedX","original":{"line":103,"column":8},"generated":{"line":1,"column":656}},{"source":"../../../../src/lib/picking/query-object.ts","name":"x","original":{"line":103,"column":17},"generated":{"line":1,"column":664}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dx","original":{"line":103,"column":21},"generated":{"line":1,"column":666}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedY","original":{"line":104,"column":8},"generated":{"line":1,"column":668}},{"source":"../../../../src/lib/picking/query-object.ts","name":"y","original":{"line":104,"column":17},"generated":{"line":1,"column":676}},{"source":"../../../../src/lib/picking/query-object.ts","name":"dy","original":{"line":104,"column":21},"generated":{"line":1,"column":678}},{"source":"../../../../src/lib/picking/query-object.ts","name":"log","original":{"line":107,"column":4},"generated":{"line":1,"column":681}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":107,"column":7},"generated":{"line":1,"column":683}},{"source":"../../../../src/lib/picking/query-object.ts","name":"error","original":{"line":107,"column":8},"generated":{"line":1,"column":691}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":107,"column":14},"generated":{"line":1,"column":697}},{"source":"../../../../src/lib/picking/query-object.ts","name":"log","original":{"line":107,"column":4},"generated":{"line":1,"column":753}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":1,"column":756}},{"source":"../../../../src/lib/picking/query-object.ts","name":"NO_PICKED_OBJECT","original":{"line":109,"column":9},"generated":{"line":1,"column":763}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":116,"column":7},"generated":{"line":1,"column":765}},{"source":"../../../../src/lib/picking/query-object.ts","name":"getUniqueObjects","original":{"line":116,"column":16},"generated":{"line":1,"column":774}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":116,"column":33},"generated":{"line":1,"column":777}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":117,"column":2},"generated":{"line":1,"column":790}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":116,"column":33},"generated":{"line":1,"column":792}},{"source":"../../../../src/lib/picking/query-object.ts","name":"decodePickingColor","original":{"line":118,"column":2},"generated":{"line":1,"column":811}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":123,"column":2},"generated":{"line":1,"column":815}},{"source":"../../../../src/lib/picking/query-object.ts","name":"uniqueColors","original":{"line":123,"column":8},"generated":{"line":1,"column":821}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":123,"column":23},"generated":{"line":1,"column":823}},{"source":"../../../../src/lib/picking/query-object.ts","name":"Map","original":{"line":123,"column":27},"generated":{"line":1,"column":827}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":126,"column":2},"generated":{"line":1,"column":831}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":126,"column":6},"generated":{"line":1,"column":834}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":127,"column":4},"generated":{"line":1,"column":836}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":127,"column":9},"generated":{"line":1,"column":840}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":127,"column":13},"generated":{"line":1,"column":844}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":127,"column":17},"generated":{"line":1,"column":846}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":127,"column":20},"generated":{"line":1,"column":848}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":127,"column":24},"generated":{"line":1,"column":850}},{"source":"../../../../src/lib/picking/query-object.ts","name":"length","original":{"line":127,"column":37},"generated":{"line":1,"column":852}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":127,"column":45},"generated":{"line":1,"column":859}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":127,"column":50},"generated":{"line":1,"column":862}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":127,"column":53},"generated":{"line":1,"column":864}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":131,"column":6},"generated":{"line":1,"column":865}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":129,"column":31},"generated":{"line":1,"column":868}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":129,"column":44},"generated":{"line":1,"column":870}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":129,"column":48},"generated":{"line":1,"column":872}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":129,"column":53},"generated":{"line":1,"column":875}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":131,"column":30},"generated":{"line":1,"column":878}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":131,"column":33},"generated":{"line":1,"column":880}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":132,"column":8},"generated":{"line":1,"column":881}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":132,"column":14},"generated":{"line":1,"column":887}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColors","original":{"line":132,"column":28},"generated":{"line":1,"column":889}},{"source":"../../../../src/lib/picking/query-object.ts","name":"slice","original":{"line":132,"column":41},"generated":{"line":1,"column":891}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":132,"column":47},"generated":{"line":1,"column":897}},{"source":"../../../../src/lib/picking/query-object.ts","name":"i","original":{"line":132,"column":50},"generated":{"line":1,"column":899}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":132,"column":54},"generated":{"line":1,"column":901}},{"source":"../../../../src/lib/picking/query-object.ts","name":"colorKey","original":{"line":133,"column":14},"generated":{"line":1,"column":904}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":133,"column":25},"generated":{"line":1,"column":906}},{"source":"../../../../src/lib/picking/query-object.ts","name":"join","original":{"line":133,"column":37},"generated":{"line":1,"column":908}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":133,"column":42},"generated":{"line":1,"column":913}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":135,"column":8},"generated":{"line":1,"column":918}},{"source":"../../../../src/lib/picking/query-object.ts","name":"uniqueColors","original":{"line":135,"column":13},"generated":{"line":1,"column":922}},{"source":"../../../../src/lib/picking/query-object.ts","name":"has","original":{"line":135,"column":26},"generated":{"line":1,"column":924}},{"source":"../../../../src/lib/picking/query-object.ts","name":"colorKey","original":{"line":135,"column":30},"generated":{"line":1,"column":928}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":135,"column":41},"generated":{"line":1,"column":931}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":136,"column":10},"generated":{"line":1,"column":932}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObject","original":{"line":136,"column":16},"generated":{"line":1,"column":938}},{"source":"../../../../src/lib/picking/query-object.ts","name":"decodePickingColor","original":{"line":136,"column":31},"generated":{"line":1,"column":940}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":136,"column":50},"generated":{"line":1,"column":942}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObject","original":{"line":138,"column":14},"generated":{"line":1,"column":945}},{"source":"../../../../src/lib/picking/query-object.ts","name":"uniqueColors","original":{"line":139,"column":12},"generated":{"line":1,"column":947}},{"source":"../../../../src/lib/picking/query-object.ts","name":"set","original":{"line":139,"column":25},"generated":{"line":1,"column":949}},{"source":"../../../../src/lib/picking/query-object.ts","name":"colorKey","original":{"line":139,"column":29},"generated":{"line":1,"column":953}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":139,"column":39},"generated":{"line":1,"column":955}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedObject","original":{"line":140,"column":17},"generated":{"line":1,"column":959}},{"source":"../../../../src/lib/picking/query-object.ts","name":"color","original":{"line":141,"column":14},"generated":{"line":1,"column":961}},{"source":"../../../../src/lib/picking/query-object.ts","name":"pickedColor","original":{"line":141,"column":21},"generated":{"line":1,"column":967}},{"source":"../../../../src/lib/picking/query-object.ts","name":"log","original":{"line":144,"column":12},"generated":{"line":1,"column":971}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":144,"column":15},"generated":{"line":1,"column":973}},{"source":"../../../../src/lib/picking/query-object.ts","name":"error","original":{"line":144,"column":16},"generated":{"line":1,"column":981}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":144,"column":22},"generated":{"line":1,"column":987}},{"source":"../../../../src/lib/picking/query-object.ts","name":"log","original":{"line":144,"column":12},"generated":{"line":1,"column":1043}},{"source":"../../../../src/lib/picking/query-object.ts","name":null,"original":{"line":151,"column":2},"generated":{"line":1,"column":1048}},{"source":"../../../../src/lib/picking/query-object.ts","name":"Array","original":{"line":151,"column":9},"generated":{"line":1,"column":1055}},{"source":"../../../../src/lib/picking/query-object.ts","name":"from","original":{"line":151,"column":15},"generated":{"line":1,"column":1061}},{"source":"../../../../src/lib/picking/query-object.ts","name":"uniqueColors","original":{"line":151,"column":20},"generated":{"line":1,"column":1066}},{"source":"../../../../src/lib/picking/query-object.ts","name":"values","original":{"line":151,"column":33},"generated":{"line":1,"column":1068}}],"sources":{"../../../../src/lib/picking/query-object.ts":"// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport log from '../../utils/log';\nimport type Layer from '../layer';\nimport type Viewport from '../../viewports/viewport';\nimport type {PickingColorDecoder} from '../../passes/pick-layers-pass';\n\nexport type PickedPixel = {\n  pickedColor: Uint8Array | null;\n  pickedLayer?: Layer;\n  pickedViewports?: Viewport[];\n  pickedX?: number;\n  pickedY?: number;\n  pickedObjectIndex: number;\n};\n\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedObjectIndex: -1\n};\n\n/* eslint-disable max-depth, max-statements */\n/**\n * Pick at a specified pixel with a tolerance radius\n * Returns the closest object to the pixel in shape `{pickedColor, pickedLayer, pickedObjectIndex}`\n */\nexport function getClosestObject({\n  pickedColors,\n  decodePickingColor,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}: {\n  pickedColors: Uint8Array;\n  decodePickingColor: PickingColorDecoder;\n  deviceX: number;\n  deviceY: number;\n  deviceRadius: number;\n  deviceRect: {x: number; y: number; width: number; height: number};\n}): PickedPixel {\n  // Traverse all pixels in picking results and find the one closest to the supplied\n  // [deviceX, deviceY]\n  const {x, y, width, height} = deviceRect;\n  let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n  let closestPixelIndex = -1;\n  let i = 0;\n\n  for (let row = 0; row < height; row++) {\n    const dy = row + y - deviceY;\n    const dy2 = dy * dy;\n\n    if (dy2 > minSquareDistanceToCenter) {\n      // skip this row\n      i += 4 * width;\n    } else {\n      for (let col = 0; col < width; col++) {\n        // Decode picked layer from color\n        const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n        if (pickedLayerIndex >= 0) {\n          const dx = col + x - deviceX;\n          const d2 = dx * dx + dy2;\n\n          if (d2 <= minSquareDistanceToCenter) {\n            minSquareDistanceToCenter = d2;\n            closestPixelIndex = i;\n          }\n        }\n        i += 4;\n      }\n    }\n  }\n\n  if (closestPixelIndex >= 0) {\n    // Decode picked object index from color\n    const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n    const pickedObject = decodePickingColor(pickedColor);\n    if (pickedObject) {\n      const dy = Math.floor(closestPixelIndex / 4 / width);\n      const dx = closestPixelIndex / 4 - dy * width;\n      return {\n        ...pickedObject,\n        pickedColor,\n        pickedX: x + dx,\n        pickedY: y + dy\n      };\n    }\n    log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n  }\n  return NO_PICKED_OBJECT;\n}\n\n/**\n * Examines a picking buffer for unique colors\n * Returns array of unique objects in shape `{x, y, pickedColor, pickedLayer, pickedObjectIndex}`\n */\nexport function getUniqueObjects({\n  pickedColors,\n  decodePickingColor\n}: {\n  pickedColors: Uint8Array;\n  decodePickingColor: PickingColorDecoder;\n}): PickedPixel[] {\n  const uniqueColors = new Map();\n\n  // Traverse all pixels in picking results and get unique colors\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      // Decode picked layer from color\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n        // eslint-disable-next-line\n        if (!uniqueColors.has(colorKey)) {\n          const pickedObject = decodePickingColor(pickedColor);\n          // eslint-disable-next-line\n          if (pickedObject) {\n            uniqueColors.set(colorKey, {\n              ...pickedObject,\n              color: pickedColor\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n"},"lineCount":null}},"error":null,"hash":"ac6acd45e48fa881106198c289476681","cacheData":{"env":{}}}