{"id":"hdw8","dependencies":[{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js.map","includedInParent":true,"mtime":1688284132458},{"name":"/project/deck-gl-examples-01/package.json","includedInParent":true,"mtime":1688495957541},{"name":"/project/deck-gl-examples-01/node_modules/@luma.gl/shadertools/package.json","includedInParent":true,"mtime":1688284132458}],"generated":{"js":"\"use strict\";function e(e){return new RegExp(\"\\\\b\".concat(e,\"[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)\"),\"g\")}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=g;const t=[[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/,\"#version 300 es\\n\"],[/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g,\"textureLod(\"],[/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g,\"texture(\"]],n=[...t,[e(\"attribute\"),\"in $1\"],[e(\"varying\"),\"out $1\"]],r=[...t,[e(\"varying\"),\"in $1\"]],o=[[/^#version[ \\t]+300[ \\t]+es/,\"#version 100\"],[/\\btexture(2D|2DProj|Cube)Lod\\(/g,\"texture$1LodEXT(\"],[/\\btexture\\(/g,\"texture2D(\"],[/\\btextureLod\\(/g,\"texture2DLodEXT(\"]],c=[...o,[e(\"in\"),\"attribute $1\"],[e(\"out\"),\"varying $1\"]],u=[...o,[e(\"in\"),\"varying $1\"]],a=\"gl_FragColor\",i=/\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/,s=/void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;function g(e,t,r){switch(t){case 300:return r?b(e,n):x(e);case 100:return r?b(e,c):l(e);default:throw new Error(\"unknown GLSL version \".concat(t))}}function b(e,t){for(const[n,r]of t)e=e.replace(n,r);return e}function x(e){const t=(e=b(e,r)).match(i);if(t){const n=t[1];e=e.replace(new RegExp(\"\\\\b\".concat(a,\"\\\\b\"),\"g\"),n)}else{const t=\"fragmentColor\";e=e.replace(s,e=>\"out vec4 \".concat(t,\";\\n\").concat(e)).replace(new RegExp(\"\\\\b\".concat(a,\"\\\\b\"),\"g\"),t)}return e}function l(e){const t=(e=b(e,u)).match(i);if(t){const n=t[1];e=e.replace(i,\"\").replace(new RegExp(\"\\\\b\".concat(n,\"\\\\b\"),\"g\"),a)}return e}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":3,"column":9},"generated":{"line":1,"column":22}},{"source":"../../../src/lib/transpile-shader.js","name":"qualifier","original":{"line":3,"column":22},"generated":{"line":1,"column":24}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":27}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":34}},{"source":"../../../src/lib/transpile-shader.js","name":"RegExp","original":{"line":11,"column":13},"generated":{"line":1,"column":38}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":45}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":51}},{"source":"../../../src/lib/transpile-shader.js","name":"qualifier","original":{"line":11,"column":26},"generated":{"line":1,"column":58}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":60}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":11,"column":77},"generated":{"line":1,"column":102}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":107}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":114}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":129}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":137}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":150}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":151}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":158}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":162}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":170}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":121,"column":1},"generated":{"line":1,"column":178}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":15,"column":0},"generated":{"line":1,"column":180}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_REPLACEMENTS","original":{"line":15,"column":6},"generated":{"line":1,"column":186}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":15,"column":27},"generated":{"line":1,"column":188}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":189}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":17,"column":3},"generated":{"line":1,"column":190}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":17,"column":50},"generated":{"line":1,"column":236}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":19,"column":2},"generated":{"line":1,"column":257}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":19,"column":3},"generated":{"line":1,"column":258}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":19,"column":44},"generated":{"line":1,"column":298}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":313}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":20,"column":3},"generated":{"line":1,"column":314}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":20,"column":41},"generated":{"line":1,"column":351}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_VERTEX_REPLACEMENTS","original":{"line":23,"column":6},"generated":{"line":1,"column":364}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":23,"column":34},"generated":{"line":1,"column":366}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_REPLACEMENTS","original":{"line":24,"column":5},"generated":{"line":1,"column":370}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":372}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":26,"column":3},"generated":{"line":1,"column":373}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":26,"column":16},"generated":{"line":1,"column":375}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":26,"column":30},"generated":{"line":1,"column":388}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":28,"column":2},"generated":{"line":1,"column":397}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":28,"column":3},"generated":{"line":1,"column":398}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":28,"column":16},"generated":{"line":1,"column":400}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":28,"column":28},"generated":{"line":1,"column":411}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_FRAGMENT_REPLACEMENTS","original":{"line":32,"column":6},"generated":{"line":1,"column":422}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":32,"column":36},"generated":{"line":1,"column":424}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_REPLACEMENTS","original":{"line":33,"column":5},"generated":{"line":1,"column":428}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":430}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":35,"column":3},"generated":{"line":1,"column":431}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":35,"column":16},"generated":{"line":1,"column":433}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":35,"column":28},"generated":{"line":1,"column":444}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_REPLACEMENTS","original":{"line":38,"column":6},"generated":{"line":1,"column":454}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":38,"column":27},"generated":{"line":1,"column":456}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":457}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":39,"column":3},"generated":{"line":1,"column":458}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":39,"column":33},"generated":{"line":1,"column":487}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":42,"column":2},"generated":{"line":1,"column":503}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":42,"column":3},"generated":{"line":1,"column":504}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":42,"column":38},"generated":{"line":1,"column":538}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":46,"column":2},"generated":{"line":1,"column":558}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":46,"column":3},"generated":{"line":1,"column":559}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":46,"column":19},"generated":{"line":1,"column":574}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":47,"column":2},"generated":{"line":1,"column":588}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":47,"column":3},"generated":{"line":1,"column":589}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":47,"column":22},"generated":{"line":1,"column":607}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_VERTEX_REPLACEMENTS","original":{"line":50,"column":6},"generated":{"line":1,"column":628}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":50,"column":34},"generated":{"line":1,"column":630}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_REPLACEMENTS","original":{"line":51,"column":5},"generated":{"line":1,"column":634}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":52,"column":2},"generated":{"line":1,"column":636}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":52,"column":3},"generated":{"line":1,"column":637}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":52,"column":16},"generated":{"line":1,"column":639}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":52,"column":23},"generated":{"line":1,"column":645}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":661}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":53,"column":3},"generated":{"line":1,"column":662}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":53,"column":16},"generated":{"line":1,"column":664}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":53,"column":24},"generated":{"line":1,"column":671}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_FRAGMENT_REPLACEMENTS","original":{"line":56,"column":6},"generated":{"line":1,"column":686}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":56,"column":36},"generated":{"line":1,"column":688}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_REPLACEMENTS","original":{"line":57,"column":5},"generated":{"line":1,"column":692}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":59,"column":2},"generated":{"line":1,"column":694}},{"source":"../../../src/lib/transpile-shader.js","name":"testVariable","original":{"line":59,"column":3},"generated":{"line":1,"column":695}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":697}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":59,"column":23},"generated":{"line":1,"column":703}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_FRAGMENT_OUTPUT_NAME","original":{"line":62,"column":6},"generated":{"line":1,"column":718}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":62,"column":35},"generated":{"line":1,"column":720}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_FRAGMENT_OUTPUT_REGEX","original":{"line":63,"column":6},"generated":{"line":1,"column":735}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":63,"column":36},"generated":{"line":1,"column":737}},{"source":"../../../src/lib/transpile-shader.js","name":"REGEX_START_OF_MAIN","original":{"line":65,"column":6},"generated":{"line":1,"column":776}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":65,"column":28},"generated":{"line":1,"column":778}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":70,"column":15},"generated":{"line":1,"column":812}},{"source":"../../../src/lib/transpile-shader.js","name":"transpileShader","original":{"line":70,"column":24},"generated":{"line":1,"column":821}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":70,"column":40},"generated":{"line":1,"column":823}},{"source":"../../../src/lib/transpile-shader.js","name":"targetGLSLVersion","original":{"line":70,"column":48},"generated":{"line":1,"column":825}},{"source":"../../../src/lib/transpile-shader.js","name":"isVertex","original":{"line":70,"column":67},"generated":{"line":1,"column":827}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":71,"column":2},"generated":{"line":1,"column":830}},{"source":"../../../src/lib/transpile-shader.js","name":"targetGLSLVersion","original":{"line":71,"column":10},"generated":{"line":1,"column":837}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":72,"column":4},"generated":{"line":1,"column":840}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":72,"column":9},"generated":{"line":1,"column":845}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":73,"column":6},"generated":{"line":1,"column":849}},{"source":"../../../src/lib/transpile-shader.js","name":"isVertex","original":{"line":73,"column":13},"generated":{"line":1,"column":856}},{"source":"../../../src/lib/transpile-shader.js","name":"convertShader","original":{"line":74,"column":10},"generated":{"line":1,"column":858}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":74,"column":24},"generated":{"line":1,"column":860}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_VERTEX_REPLACEMENTS","original":{"line":74,"column":32},"generated":{"line":1,"column":862}},{"source":"../../../src/lib/transpile-shader.js","name":"convertFragmentShaderTo300","original":{"line":75,"column":10},"generated":{"line":1,"column":865}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":75,"column":37},"generated":{"line":1,"column":867}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":870}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":76,"column":9},"generated":{"line":1,"column":875}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":879}},{"source":"../../../src/lib/transpile-shader.js","name":"isVertex","original":{"line":77,"column":13},"generated":{"line":1,"column":886}},{"source":"../../../src/lib/transpile-shader.js","name":"convertShader","original":{"line":78,"column":10},"generated":{"line":1,"column":888}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":78,"column":24},"generated":{"line":1,"column":890}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_VERTEX_REPLACEMENTS","original":{"line":78,"column":32},"generated":{"line":1,"column":892}},{"source":"../../../src/lib/transpile-shader.js","name":"convertFragmentShaderTo100","original":{"line":79,"column":10},"generated":{"line":1,"column":895}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":79,"column":37},"generated":{"line":1,"column":897}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":900}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":81,"column":6},"generated":{"line":1,"column":908}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":914}},{"source":"../../../src/lib/transpile-shader.js","name":"Error","original":{"line":81,"column":16},"generated":{"line":1,"column":918}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":924}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":948}},{"source":"../../../src/lib/transpile-shader.js","name":"targetGLSLVersion","original":{"line":81,"column":46},"generated":{"line":1,"column":955}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":85,"column":0},"generated":{"line":1,"column":960}},{"source":"../../../src/lib/transpile-shader.js","name":"convertShader","original":{"line":85,"column":9},"generated":{"line":1,"column":969}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":85,"column":23},"generated":{"line":1,"column":971}},{"source":"../../../src/lib/transpile-shader.js","name":"replacements","original":{"line":85,"column":31},"generated":{"line":1,"column":973}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":86,"column":2},"generated":{"line":1,"column":976}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":86,"column":7},"generated":{"line":1,"column":980}},{"source":"../../../src/lib/transpile-shader.js","name":"pattern","original":{"line":86,"column":14},"generated":{"line":1,"column":986}},{"source":"../../../src/lib/transpile-shader.js","name":"replacement","original":{"line":86,"column":23},"generated":{"line":1,"column":988}},{"source":"../../../src/lib/transpile-shader.js","name":"replacements","original":{"line":86,"column":39},"generated":{"line":1,"column":993}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":87,"column":4},"generated":{"line":1,"column":995}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":87,"column":13},"generated":{"line":1,"column":997}},{"source":"../../../src/lib/transpile-shader.js","name":"replace","original":{"line":87,"column":20},"generated":{"line":1,"column":999}},{"source":"../../../src/lib/transpile-shader.js","name":"pattern","original":{"line":87,"column":28},"generated":{"line":1,"column":1007}},{"source":"../../../src/lib/transpile-shader.js","name":"replacement","original":{"line":87,"column":37},"generated":{"line":1,"column":1009}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":89,"column":2},"generated":{"line":1,"column":1012}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":89,"column":9},"generated":{"line":1,"column":1019}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":92,"column":0},"generated":{"line":1,"column":1021}},{"source":"../../../src/lib/transpile-shader.js","name":"convertFragmentShaderTo300","original":{"line":92,"column":9},"generated":{"line":1,"column":1030}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":92,"column":36},"generated":{"line":1,"column":1032}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":95,"column":2},"generated":{"line":1,"column":1035}},{"source":"../../../src/lib/transpile-shader.js","name":"outputMatch","original":{"line":95,"column":8},"generated":{"line":1,"column":1041}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":93,"column":2},"generated":{"line":1,"column":1044}},{"source":"../../../src/lib/transpile-shader.js","name":"convertShader","original":{"line":93,"column":11},"generated":{"line":1,"column":1046}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":93,"column":25},"generated":{"line":1,"column":1048}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_FRAGMENT_REPLACEMENTS","original":{"line":93,"column":33},"generated":{"line":1,"column":1050}},{"source":"../../../src/lib/transpile-shader.js","name":"match","original":{"line":95,"column":29},"generated":{"line":1,"column":1054}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_FRAGMENT_OUTPUT_REGEX","original":{"line":95,"column":35},"generated":{"line":1,"column":1060}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":96,"column":2},"generated":{"line":1,"column":1063}},{"source":"../../../src/lib/transpile-shader.js","name":"outputMatch","original":{"line":96,"column":6},"generated":{"line":1,"column":1066}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":96,"column":19},"generated":{"line":1,"column":1068}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":97,"column":4},"generated":{"line":1,"column":1069}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":97,"column":10},"generated":{"line":1,"column":1075}},{"source":"../../../src/lib/transpile-shader.js","name":"outputMatch","original":{"line":97,"column":23},"generated":{"line":1,"column":1077}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":97,"column":35},"generated":{"line":1,"column":1079}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":98,"column":4},"generated":{"line":1,"column":1082}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":98,"column":13},"generated":{"line":1,"column":1084}},{"source":"../../../src/lib/transpile-shader.js","name":"replace","original":{"line":98,"column":20},"generated":{"line":1,"column":1086}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":98,"column":28},"generated":{"line":1,"column":1094}},{"source":"../../../src/lib/transpile-shader.js","name":"RegExp","original":{"line":98,"column":32},"generated":{"line":1,"column":1098}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":98,"column":28},"generated":{"line":1,"column":1105}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":98,"column":28},"generated":{"line":1,"column":1111}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_FRAGMENT_OUTPUT_NAME","original":{"line":98,"column":45},"generated":{"line":1,"column":1118}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":98,"column":28},"generated":{"line":1,"column":1120}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":98,"column":78},"generated":{"line":1,"column":1127}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":98,"column":84},"generated":{"line":1,"column":1132}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":99,"column":9},"generated":{"line":1,"column":1139}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":100,"column":4},"generated":{"line":1,"column":1140}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":100,"column":10},"generated":{"line":1,"column":1146}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":100,"column":23},"generated":{"line":1,"column":1148}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":101,"column":4},"generated":{"line":1,"column":1164}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":101,"column":13},"generated":{"line":1,"column":1166}},{"source":"../../../src/lib/transpile-shader.js","name":"replace","original":{"line":102,"column":7},"generated":{"line":1,"column":1168}},{"source":"../../../src/lib/transpile-shader.js","name":"REGEX_START_OF_MAIN","original":{"line":102,"column":15},"generated":{"line":1,"column":1176}},{"source":"../../../src/lib/transpile-shader.js","name":"match","original":{"line":102,"column":36},"generated":{"line":1,"column":1178}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":102,"column":41},"generated":{"line":1,"column":1181}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":102,"column":41},"generated":{"line":1,"column":1193}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":102,"column":57},"generated":{"line":1,"column":1200}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":102,"column":41},"generated":{"line":1,"column":1202}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":102,"column":41},"generated":{"line":1,"column":1209}},{"source":"../../../src/lib/transpile-shader.js","name":"match","original":{"line":102,"column":73},"generated":{"line":1,"column":1216}},{"source":"../../../src/lib/transpile-shader.js","name":"replace","original":{"line":103,"column":7},"generated":{"line":1,"column":1220}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":103,"column":15},"generated":{"line":1,"column":1228}},{"source":"../../../src/lib/transpile-shader.js","name":"RegExp","original":{"line":103,"column":19},"generated":{"line":1,"column":1232}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":103,"column":15},"generated":{"line":1,"column":1239}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":103,"column":15},"generated":{"line":1,"column":1245}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_FRAGMENT_OUTPUT_NAME","original":{"line":103,"column":32},"generated":{"line":1,"column":1252}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":103,"column":15},"generated":{"line":1,"column":1254}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":103,"column":65},"generated":{"line":1,"column":1261}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":103,"column":71},"generated":{"line":1,"column":1266}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":106,"column":2},"generated":{"line":1,"column":1269}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":106,"column":9},"generated":{"line":1,"column":1276}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":109,"column":0},"generated":{"line":1,"column":1278}},{"source":"../../../src/lib/transpile-shader.js","name":"convertFragmentShaderTo100","original":{"line":109,"column":9},"generated":{"line":1,"column":1287}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":109,"column":36},"generated":{"line":1,"column":1289}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":112,"column":2},"generated":{"line":1,"column":1292}},{"source":"../../../src/lib/transpile-shader.js","name":"outputMatch","original":{"line":112,"column":8},"generated":{"line":1,"column":1298}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":110,"column":2},"generated":{"line":1,"column":1301}},{"source":"../../../src/lib/transpile-shader.js","name":"convertShader","original":{"line":110,"column":11},"generated":{"line":1,"column":1303}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":110,"column":25},"generated":{"line":1,"column":1305}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_FRAGMENT_REPLACEMENTS","original":{"line":110,"column":33},"generated":{"line":1,"column":1307}},{"source":"../../../src/lib/transpile-shader.js","name":"match","original":{"line":112,"column":29},"generated":{"line":1,"column":1311}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_FRAGMENT_OUTPUT_REGEX","original":{"line":112,"column":35},"generated":{"line":1,"column":1317}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":1320}},{"source":"../../../src/lib/transpile-shader.js","name":"outputMatch","original":{"line":113,"column":6},"generated":{"line":1,"column":1323}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":113,"column":19},"generated":{"line":1,"column":1325}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":114,"column":4},"generated":{"line":1,"column":1326}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":114,"column":10},"generated":{"line":1,"column":1332}},{"source":"../../../src/lib/transpile-shader.js","name":"outputMatch","original":{"line":114,"column":23},"generated":{"line":1,"column":1334}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":114,"column":35},"generated":{"line":1,"column":1336}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":115,"column":4},"generated":{"line":1,"column":1339}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":115,"column":13},"generated":{"line":1,"column":1341}},{"source":"../../../src/lib/transpile-shader.js","name":"replace","original":{"line":116,"column":7},"generated":{"line":1,"column":1343}},{"source":"../../../src/lib/transpile-shader.js","name":"ES300_FRAGMENT_OUTPUT_REGEX","original":{"line":116,"column":15},"generated":{"line":1,"column":1351}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":116,"column":44},"generated":{"line":1,"column":1353}},{"source":"../../../src/lib/transpile-shader.js","name":"replace","original":{"line":117,"column":7},"generated":{"line":1,"column":1357}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":117,"column":15},"generated":{"line":1,"column":1365}},{"source":"../../../src/lib/transpile-shader.js","name":"RegExp","original":{"line":117,"column":19},"generated":{"line":1,"column":1369}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":117,"column":15},"generated":{"line":1,"column":1376}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":117,"column":15},"generated":{"line":1,"column":1382}},{"source":"../../../src/lib/transpile-shader.js","name":"outputName","original":{"line":117,"column":32},"generated":{"line":1,"column":1389}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":117,"column":15},"generated":{"line":1,"column":1391}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":117,"column":49},"generated":{"line":1,"column":1398}},{"source":"../../../src/lib/transpile-shader.js","name":"ES100_FRAGMENT_OUTPUT_NAME","original":{"line":117,"column":55},"generated":{"line":1,"column":1403}},{"source":"../../../src/lib/transpile-shader.js","name":null,"original":{"line":120,"column":2},"generated":{"line":1,"column":1406}},{"source":"../../../src/lib/transpile-shader.js","name":"source","original":{"line":120,"column":9},"generated":{"line":1,"column":1413}}],"sources":{"../../../src/lib/transpile-shader.js":"// TRANSPILATION TABLES\n\nfunction testVariable(qualifier) {\n  /*\n    should match:\n      in float weight;\n      out vec4 positions[2];\n    should not match:\n      void f(out float a, in float b) {}\n   */\n  return new RegExp(`\\\\b${qualifier}[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)`, 'g');\n}\n\n/** Simple regex replacements for GLSL ES 1.00 syntax that has changed in GLSL ES 3.00 */\nconst ES300_REPLACEMENTS = [\n  // Fix poorly formatted version directive\n  [/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'],\n  // The individual `texture...()` functions were replaced with `texture()` overloads\n  [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('],\n  [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']\n];\n\nconst ES300_VERTEX_REPLACEMENTS = [\n  ...ES300_REPLACEMENTS,\n  // `attribute` keyword replaced with `in`\n  [testVariable('attribute'), 'in $1'],\n  // `varying` keyword replaced with `out`\n  [testVariable('varying'), 'out $1']\n];\n\n/** Simple regex replacements for GLSL ES 1.00 syntax that has changed in GLSL ES 3.00 */\nconst ES300_FRAGMENT_REPLACEMENTS = [\n  ...ES300_REPLACEMENTS,\n  // `varying` keyword replaced with `in`\n  [testVariable('varying'), 'in $1']\n];\n\nconst ES100_REPLACEMENTS = [\n  [/^#version[ \\t]+300[ \\t]+es/, '#version 100'],\n\n  // In GLSL 1.00 ES these functions are provided by an extension\n  [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('],\n\n  // Overloads in GLSL 3.00 map to individual functions. Note that we cannot\n  // differentiate 2D,2DProj,Cube without type analysis so we choose the most common variant.\n  [/\\btexture\\(/g, 'texture2D('],\n  [/\\btextureLod\\(/g, 'texture2DLodEXT(']\n];\n\nconst ES100_VERTEX_REPLACEMENTS = [\n  ...ES100_REPLACEMENTS,\n  [testVariable('in'), 'attribute $1'],\n  [testVariable('out'), 'varying $1']\n];\n\nconst ES100_FRAGMENT_REPLACEMENTS = [\n  ...ES100_REPLACEMENTS,\n  // Replace `in` with `varying`\n  [testVariable('in'), 'varying $1']\n];\n\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\n\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/; // Beginning of main\n\n// Transpiles shader source code to target GLSL version\n// Note: We always run transpiler even if same version e.g. 3.00 => 3.00\n// RFC: https://github.com/visgl/luma.gl/blob/7.0-release/dev-docs/RFCs/v6.0/portable-glsl-300-rfc.md\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex\n        ? convertShader(source, ES300_VERTEX_REPLACEMENTS)\n        : convertFragmentShaderTo300(source);\n    case 100:\n      return isVertex\n        ? convertShader(source, ES100_VERTEX_REPLACEMENTS)\n        : convertFragmentShaderTo100(source);\n    default:\n      throw new Error(`unknown GLSL version ${targetGLSLVersion}`);\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(`\\\\b${ES100_FRAGMENT_OUTPUT_NAME}\\\\b`, 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source\n      .replace(REGEX_START_OF_MAIN, match => `out vec4 ${outputName};\\n${match}`)\n      .replace(new RegExp(`\\\\b${ES100_FRAGMENT_OUTPUT_NAME}\\\\b`, 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source\n      .replace(ES300_FRAGMENT_OUTPUT_REGEX, '')\n      .replace(new RegExp(`\\\\b${outputName}\\\\b`, 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n"},"lineCount":null}},"error":null,"hash":"19a39c8983b0b47e68114b21b8da7e8b","cacheData":{"env":{}}}